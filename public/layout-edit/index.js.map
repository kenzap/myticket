{"version":3,"file":"index.js","sources":["../../node_modules/@kenzap/k-cloud/index.js","../../src/_/_cnt_layout_edit.js","../../src/_/_ui.js","../../src/_/helpers/utils.js","../../src/_/geometry/area.js","../../src/_/helpers/helper.js","../../src/_/geometry/rectangle.js","../../node_modules/transformation-matrix/src/applyToPoint.js","../../node_modules/transformation-matrix/src/utils.js","../../node_modules/transformation-matrix/src/translate.js","../../node_modules/transformation-matrix/src/transform.js","../../node_modules/transformation-matrix/src/rotate.js","../../node_modules/transformation-matrix/src/fromTransformAttribute.autogenerated.js","../../src/_/geometry/polygon.js","../../src/_/geometry/circle.js","../../src/_/helpers/stats.js","../../src/_/mapping.js","../../src/layout-edit/index.js"],"sourcesContent":["/**\n * @name initHeader\n * @description Initiates Kenzap Cloud extension header and related scripts. Verifies user sessions, handles SSO, does cloud space navigation, initializes i18n localization. \n * @param {object} response\n */\nexport const initHeader = (response) => {\n\n    // cache header from backend\n    if(response.header) localStorage.setItem('header', response.header);\n  \n    // load header to html if not present\n    if(!document.querySelector(\"#k-script\")){\n  \n        let child = document.createElement('div');\n        child.innerHTML = localStorage.getItem('header');\n        child = child.firstChild;\n        document.body.prepend(child);\n  \n        // run header scripts\n        Function(document.querySelector(\"#k-script\").innerHTML).call('test');\n    }\n  \n    // load locales if present\n    if(response.locale) window.i18n.init(response.locale); \n}\n\n/**\n * @name showLoader\n * @description Initiates full screen three dots loader.\n */\nexport const showLoader = () => {\n\n    let el = document.querySelector(\".loader\");\n    if (el) el.style.display = 'block';\n}\n\n/**\n * @name hideLoader\n * @description Removes full screen three dots loader.\n */\nexport const hideLoader = () => {\n\n    let el = document.querySelector(\".loader\");\n    if (el) el.style.display = 'none';\n}\n\n/**\n * @name initFooter\n * @description Removes full screen three dots loader.\n * @param {string} left - Text or html code to be present on the left bottom side of screen\n * @param {string} right - Text or html code to be present on the left bottom side of screen\n */\nexport const initFooter = (left, right) => {\n\n    document.querySelector(\"footer .row\").innerHTML = `\n    <div class=\"d-sm-flex justify-content-center justify-content-sm-between\">\n        <span class=\"text-muted text-center text-sm-left d-block d-sm-inline-block\">${left}</span>\n        <span class=\"float-none float-sm-right d-block mt-1 mt-sm-0 text-center text-muted\">${right}</span>\n    </div>`;\n}\n\n/**\n * @name link\n * @description Handles Cloud navigation links between extensions and its pages. Takes care of custom url parameters.\n * @param {string} slug - Any inbound link\n * \n * @returns {string} link - Returns original link with kenzp cloud space ID identifier.\n */\nexport const link = (slug) => {\n    \n    let urlParams = new URLSearchParams(window.location.search);\n    let sid = urlParams.get('sid') ? urlParams.get('sid') : \"\";\n\n    let postfix = slug.indexOf('?') == -1 ? '?sid='+sid : '&sid='+sid;\n\n    return slug + postfix;\n}\n\n/**\n * @name getSiteId\n * @description Gets current Kenzap Cloud space ID identifier from the URL.\n * \n * @returns {string} id - Kenzap Cloud space ID.\n */\nexport const getSiteId = () => {\n    \n    let urlParams = new URLSearchParams(window.location.search);\n    let id = urlParams.get('sid') ? urlParams.get('sid') : \"\";\n\n    return id;\n}\n\n/**\n * @name setCookie\n * @description Set cookie by its name to all .kenzap.com subdomains\n * @param {string} name - Cookie name.\n * @param {string} value - Cookie value.\n * @param {string} days - Number of days when cookie expires.\n */\n export const setCookie = (name, value, days) => {\n\n    let expires = \"\";\n    if (days) {\n        let date = new Date();\n        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n        expires = \";expires=\" + date.toUTCString();\n    }\n    document.cookie = name + \"=\" + (escape(value) || \"\") + expires + \";path=/;domain=.kenzap.com\"; \n}\n\n/**\n * @name getCookie\n * @description Read cookie by its name.\n * @param {string} cname - Cookie name.\n * \n * @returns {string} value - Cookie value.\n */\nexport const getCookie = (cname) => {\n\n    let name = cname + \"=\";\n    let decodedCookie = decodeURIComponent(document.cookie);\n    let ca = decodedCookie.split(';');\n    for (let i = 0; i < ca.length; i++) {\n        let c = ca[i];\n        while (c.charAt(0) == ' ') {\n            c = c.substring(1);\n        }\n        if (c.indexOf(name) == 0) {\n            return c.substring(name.length, c.length);\n        }\n    }\n    return \"\";\n}\n\n/**\n * @name parseApiError\n * @description Set default logics for different API Error responses.\n * @param {object} object - API response.\n */\nexport const parseApiError = (data) => {\n \n    switch(data.code){\n\n        // unauthorized\n        case 401:\n\n            // dev mode\n            if(window.location.href.indexOf('localhost')){ \n\n                alert(data.reason); \n                return; \n            }\n\n            // production mode\n            location.href=\"https://auth.kenzap.com/?app=65432108792785&redirect=\"+window.location.href; break;\n        \n        // something else\n        default:\n\n            alert(data.reason); \n            break;\n    }\n}\n\n/**\n * @name initBreadcrumbs\n * @description Render ui breadcrumbs.\n * @param {array} data - List of link objects containing link text and url. If url is missing then renders breadcrumb as static text. Requires html holder with .bc class.\n */\nexport const initBreadcrumbs = (data) => {\n\n    let html = '<ol class=\"breadcrumb mt-2 mb-0\">';\n    for(let bc of data){\n        \n        if(typeof(bc.link) === 'undefined'){\n\n            html += `<li class=\"breadcrumb-item\">${ bc.text }</li>`;\n        }else{\n\n            html += `<li class=\"breadcrumb-item\"><a href=\"${ bc.link }\">${ bc.text }</a></li>`;\n        }\n    }\n    html += '</ol>';\n    \n    document.querySelector(\".bc\").innerHTML = html;\n}\n\n/**\n * @name onClick\n * @description One row click event listener declaration. Works with one or many HTML selectors.\n * @param {string} sel - HTML selector, id, class, etc.\n * @param {string} fn - callback function fired on click event.\n */\nexport const onClick = (sel, fn) => {\n\n    if(document.querySelector(sel)) for( let e of document.querySelectorAll(sel) ){\n\n        e.removeEventListener('click', fn, true);\n        e.addEventListener('click', fn, true);\n    }\n}\n\n/**\n * @name onKeyUp\n * @description One row key up event listener declaration. Works with one or many HTML selectors.\n * @param {string} sel - HTML selector, id, class, etc.\n * @param {string} fn - callback function fired on click event.\n */\nexport const onKeyUp = (sel, fn) => {\n\n    if(document.querySelector(sel)) for( let e of document.querySelectorAll(sel) ){\n\n        e.removeEventListener('keyup', fn, true);\n        e.addEventListener('keyup', fn, true);\n    }\n}\n\n/**\n * @name onChange\n * @description One row change event listener declaration. Works with one or many HTML selectors.\n * @param {string} sel - HTML selector, id, class, etc.\n * @param {string} fn - callback function fired on click event.\n */\nexport const onChange = (sel, fn) => {\n\n    if(document.querySelector(sel)) for( let e of document.querySelectorAll(sel) ){\n\n        e.removeEventListener('change', fn, true);\n        e.addEventListener('change', fn, true);\n    }\n}\n\n/**\n * @name loadScript\n * @description Asynchronous script loader function.\n * @param {string} url - HTML selector, id, class, etc.\n * @param {string} cb - callback function fired immediately after script is loaded.\n */\n export const loadScript = (url, cb) => {\n\n    if (!Array.from(document.querySelectorAll('script')).some(elm => elm.src == url)) {\n      let script = document.createElement('script')\n      script.onload = cb\n      script.src = url\n      document.getElementsByTagName('head')[0].appendChild(script)\n    }\n}\n\n/**\n * @name simulateClick\n * @description Trigger on click event without user interaction.\n * @param {string} elem - HTML selector, id, class, etc.\n */\n export const simulateClick = (elem) => {\n\n\t// create our event (with options)\n\tlet evt = new MouseEvent('click', {\n\t\tbubbles: true,\n\t\tcancelable: true,\n\t\tview: window\n\t});\n\n\t// if cancelled, don't dispatch the event\n\t!elem.dispatchEvent(evt);\n};\n\n/**\n * @name toast\n * @description Triggers toast notification. Adds toast html to the page if missing.\n * @param {string} text - Toast notification.\n */\n export const toast = (text) => {\n\n    // only add once\n    if(!document.querySelector(\".toast\")){\n\n        let html = `\n        <div class=\"position-fixed bottom-0 p-2 m-4 end-0 align-items-center\">\n            <div class=\"toast hide align-items-center text-white bg-dark border-0\" role=\"alert\" aria-live=\"assertive\" aria-atomic=\"true\" data-bs-delay=\"3000\">\n                <div class=\"d-flex\">\n                    <div class=\"toast-body\"></div>\n                    <button type=\"button\" class=\"btn-close btn-close-white me-2 m-auto\" data-bs-dismiss=\"toast\" aria-label=\"Close\"></button>\n                </div>\n            </div>\n        </div>`;\n        if(document.querySelector('body > div')) document.querySelector('body > div').insertAdjacentHTML('afterend', html);\n    }\n\n    let toast = new bootstrap.Toast(document.querySelector('.toast'));\n    document.querySelector('.toast .toast-body').innerHTML = text;  \n    toast.show();\n}","import { link } from \"../_/_helpers.js\"\n\nexport const HTMLContent = (__) => {\n \n    return `\n\n        <!-- seat mapping overlay controls -->\n        <div id=\"seat_mapping\">\n            <div id=\"reset_zone\" class=\"seat_head\" style=\"\"><span id=\"reset_zone_btn\">Reset</span></div>\n            <div id=\"top_toolbar\">\n                <div id=\"seat_mapping_close\">×</div>\n                <div id=\"seat_size\" class=\"seat_head\">Seat Size:</div>\n                <div id=\"ul-slider-5\" class=\"ul-slider slider-success\"></div>\n                <div id=\"seat_notice\" class=\"seat_head\" style=\"margin-left: 350px;\">Click on seat to drag it to a desired location.</div>\n                <div id=\"seat_row\" class=\"seat_head\">Seat Row: <input id=\"seat_row_in\" autocomplete=\"off\" type=\"text\" maxlength=\"6\" class=\"form-control-sm\" placeholder=\"-\" ></div>\n                <div id=\"seat_text\" class=\"seat_head\">Seat Number: <input id=\"seat_text_in\" autocomplete=\"off\" type=\"text\" maxlength=\"6\" class=\"form-control-sm\" placeholder=\"-\" ></div>\n                <div id=\"seat_price\" class=\"seat_head\">Seat Price: <input id=\"seat_price_in\" autocomplete=\"off\" type=\"text\" maxlength=\"12\" class=\"form-control-sm\" placeholder=\"-\" ></div>\n                <div id=\"seat_text_vis\" class=\"seat_head\">\n                <div class=\"checkbox\" >\n                    <input type=\"checkbox\" id=\"seat_text_vis_cb\" class=\"checkbox__input\">\n                    <label for=\"seat_text_vis_cb\" class=\"checkbox__label\">View Seat Numbers</label>\n                </div>\n                </div>\n            </div>\n\n            <div id=\"svg_mapping_cont\">\n                <img id=\"img_section\" src=\"\" alt=\"section preview\" >\n                <svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.2\" baseProfile=\"tiny\" id=\"svg_mapping\"> </svg>\n            </div>\n\n            <div style=\"width:0%;height:100%;float:right;overflow-y:scroll;padding:20px;display: none;\">\n                <ul id=\"svg_seats\"> </ul>\n            </div>\n\n        </div>\n        \n        <div class=\"container p-edit\">\n            <div class=\"d-flex justify-content-between bd-highlight mb-3\">\n                <nav class=\"bc\" aria-label=\"breadcrumb\"></nav>\n            </div>\n            <div class=\"row\">\n                <div class=\"col-lg-12 grid-margin stretch-card\">\n                    <div class=\"card border-white shadow-sm\">\n                        <div class=\"card-body\">\n                            <div id=\"wrapper\">\n                                <header id=\"header\">\n                                    <nav id=\"nav\" class=\"clearfix\">\n                                        <div class=\"btn-group\" role=\"group\" aria-label=\"Basic example\">\n                                            <button id=\"polygon\" type=\"button\" class=\"btn btna btn-outline-primary\">${ __('draw') }</button>\n                                            <button id=\"edit\" type=\"button\" class=\"btn btna btn-outline-primary\">${ __('edit') }</button>\n                                            <button id=\"seats\" type=\"button\" class=\"btn btna btn-outline-primary\">${ __('seats') }</button>\n                                            <button id=\"save\" type=\"button\" class=\"btn btna btn-outline-primary\">${ __('save') }</button>\n                                            <button id=\"new_image\" type=\"button\" class=\"btn btna btn-outline-primary\">${ __('image') }</button>\n                                            <button id=\"export\" type=\"button\" class=\"btn btn-outline-primary\">${ __('export') }</button>\n                                            <div class=\"more input-group dropdown\">\n                                                <button id=\"more\" type=\"button\" class=\"btn btn-outline-primary\" data-bs-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-three-dots-vertical\" viewBox=\"0 0 16 16\">\n                                                <path d=\"M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z\"/></svg></button>\n                                                <div class=\"dropdown-menu\">\n                                                    <a class=\"dropdown-item\" target=\"_blank\" href=\"https://kenzap.com/seat-reservation-in-wordpress-setup-service-1014779/\">${ __('Integration service') }</a>\n                                                    <a class=\"dropdown-item\" target=\"_blank\" href=\"https://kenzap.blog/how-to-create-custom-concert-hall-in-wordpress-with-seat-reservation/\">${ __('Free tutorial') }</a>\n                                                    <a class=\"dropdown-item\" target=\"_blank\" href=\"#\" data-bs-toggle=\"modal\" data-bs-target=\"#kenzap_import\">${ __('Import layout') }</a>\n                                                    <a id=\"stats_btn\" class=\"dropdown-item\" target=\"_blank\" href=\"#\" data-bs-toggle=\"modal\" style=\"\" data-bs-target=\"#kenzap_stats\">${ __('Layout stats') }</a>\n                                                    <div role=\"separator\" class=\"dropdown-divider\"></div>\n                                                    <a class=\"dropdown-item\" target=\"_blank\" href=\"https://kenzap.com/myticket-events-plugin/\">${ __('Community') }</a>\n                                                </div>\n                                            </div>\n                                        </div>\n\n                                    </nav>\n                                    <div id=\"coords\"></div>\n                                    <div id=\"debug\"></div>\n                                </header>\n                                <div id=\"image_wrapper\">\n                                    <div id=\"image\">\n                                    <img src=\"\" alt=\"#\" id=\"img\" style=\"max-width:1052px\" />\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" style=\"max-width:1052px\" version=\"1.2\" baseProfile=\"tiny\" id=\"svg\"></svg>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div id=\"get_image_wrapper\">\n                                <div id=\"get_image\">\n                                    <span title=\"close\" class=\"close_button\"></span>\n                                    <div id=\"loading\">${ __('Loading') }</div>\n                                    <div id=\"file_reader_support\">\n                                        <label>${ __('Drag an image of your layout below') }</label>\n                                        <div id=\"dropzone\">\n                                            <span class=\"clear_button\" title=\"clear\">x</span>\n                                            <img src=\"\" alt=\"preview\" id=\"sm_img\" />\n                                        </div>\n                                    </div>\n\n                                    <button id=\"button\" type=\"button\" style=\"margin-top:50px;\" class=\"btn btn-outline-success \">${ __('Upload This Layout') }</button>\n\n                                    <div style=\"display: none;\">\n                                        <label for=\"url\">type a url</label>\n                                        <span id=\"url_wrapper\">\n                                            <span class=\"clear_button\" title=\"clear\">x</span>\n                                            <input type=\"text\" id=\"url\" />\n                                        </span>\n                                        <button id=\"button\">${ __('OK') }</button>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <!-- For html image map code -->\n        <div id=\"code\">\n          <span class=\"close_button\" title=\"close\"></span>\n          <div id=\"code_content\"></div>\n        </div>\n\n        <!-- Edit details block -->\n        <form id=\"edit_details\">\n          <h5>Attributes</h5>\n          <span class=\"close_button\" title=\"close\"></span>\n          <p>\n            <label for=\"href_attr\">href</label>\n            <input type=\"text\" id=\"href_attr\" />\n          </p>\n          <p>\n            <label for=\"alt_attr\">alt</label>\n            <input type=\"text\" id=\"alt_attr\" />\n          </p>\n          <p>\n            <label for=\"title_attr\">title</label>\n            <input type=\"text\" id=\"title_attr\" />\n          </p>\n          <button id=\"save_details\">Save</button>\n        </form>\n\n        <!-- From html block -->\n        <div id=\"from_html_wrapper\">\n          <form id=\"from_html_form\">\n            <h5>Loading areas</h5>\n            <span class=\"close_button\" title=\"close\"></span>\n            <p>\n              <label for=\"code_input\">Enter your html code:</label>\n              <textarea id=\"code_input\"></textarea>\n            </p>\n            <button id=\"load_code_button\">Load</button>\n          </form>\n        </div>\n\n\n\n\n\n        <div id=\"kenzap_seat_map\" class=\"modal\">\n            <div class=\"modal-dialog\" role=\"document\">\n                <!-- Modal content -->\n                <div class=\"modal-content\">\n        \n                    <div class=\"modal-header\">\n                        <h5 class=\"modal-title\">${ __('Zone Settings') }</h5>\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n                    </div>\n        \n                    <div class=\"modal-body\">\n                        <div class=\"form-cont\">\n                        \n                            <div class=\"form-group mb-3\">\n                                <label for=\"zone_title\" class=\"form-label\">${ __('Zone label') }</label>\n                                <input type=\"text\" class=\"form-control\" id=\"zone_title\" autocomplete=\"off\" placeholder=\"A2 or 1001\">\n                            </div>\n                \n                            <div class=\"form-group mb-3\">\n                                <label for=\"zone_tws\" class=\"form-label\">${ __('Number of tickets with seat reservation') }</label>\n                                <input type=\"number\" class=\"form-control\" id=\"zone_tws\" autocomplete=\"off\" placeholder=\"0\" value=\"0\">\n                            </div>\n                \n                            <div class=\"form-group mb-3\">\n                                <label for=\"zone_tns\" class=\"form-label\">${ __('Number of tickets without seat reservation') }</label>\n                                <input type=\"number\" class=\"form-control\" id=\"zone_tns\" autocomplete=\"off\" placeholder=\"0\" value=\"0\">\n                            </div>\n                \n                            <div class=\"form-group mb-3\">\n                                <label for=\"zone_price\" class=\"form-label\">${ __('Default ticket price for entire zone') }</label>\n                                <input type=\"number\" class=\"form-control\" id=\"zone_price\" autocomplete=\"off\" placeholder=\"0\" value=\"0\">\n                            </div>\n                \n                            <div class=\"form-price-custom\">\n                \n                            </div>\n                \n                            <p class=\"form-link mb-1\" style=\"text-align:right;\"><a id=\"zone_add_price\" href=\"#\" data-attached=\"false\">add price variation</a><a href=\"https://kenzap.blog/how-to-create-custom-concert-hall-in-wordpress-with-seat-reservation/#pricing\" target=\"_blank\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-info mb-2\" viewBox=\"0 0 16 16\">\n                                <path d=\"m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z\"/>\n                                </svg></a>\n                            </p>\n                \n                \n                            <div class=\"form-group mb-3\">\n                                <label for=\"zone_bg\">${ __('Zone background (optional)') }</label>\n                                <div>\n                                <img id=\"zone_bg\" src=\"https://cdn.kenzap.com/loading.png\" />\n                                <input type=\"hidden\" id=\"zone_bgi\" value=\"\">\n                                <input type=\"file\" name=\"img[]\" class=\"dn bg-file\" style=\"display:none;\">\n                                <span class=\"remove\" title=\"Remove\">×</span>\n                                </div>\n                            </div>\n                \n                            <div class=\"form-group-custom\">\n                \n                            </div>\n                \n                            <p class=\"form-link\" style=\"text-align:right;\">\n                                <a id=\"zone_add_field\" href=\"#\" data-attached=\"false\">${ __('add custom field') }</a>\n                                <a href=\"https://kenzap.blog/how-to-customize-pdf-ticket-with-myticket-events-plugin/#extension-fields\" target=\"_blank\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-info mb-2\" viewBox=\"0 0 16 16\">\n                                    <path d=\"m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z\"/>\n                                    </svg>\n                                </a>\n                            </p>\n                        \n                        </div>\n                    </div>\n                    \n                    <div class=\"modal-footer\">\n                        <button id=\"saveSeatMap\" type=\"button\" class=\"btn btn-primary btn-modal\" data-bs-dismiss=\"modal\">${ __('Continue') }</button>\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">${ __('Cancel') }</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    \n    \n        <div id=\"kenzap_export\" class=\"modal\">\n            <div class=\"modal-dialog\" role=\"document\">\n                <!-- Modal content -->\n                <div class=\"modal-content\">\n        \n                    <div class=\"modal-header\">\n                        <h5 class=\"modal-title\">${ __('Export Layout') }</h5>\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n                    </div>\n        \n                    <div class=\"modal-body\">\n        \n                        <textarea class=\"form-control\" id=\"exportTextArea\" rows=\"4\"></textarea>\n            \n                        <ol class=\"mt-2\" >\n                            <li>${ __('Copy layout data above') }</li>\n                            <li>Install <b><a target=\"_blank\" href=\"https://wordpress.org/plugins/myticket-events/\" target=\"_blank\">MyTicket Events</a> </b> plugin</li>\n                            <li>${ __('Add <b>MyTicket Hall</b> block to your website') }</li>\n                            <li>${ __('Paste the code under Layout / Seat Code in the right pane') }</li>\n                            <li>${ __('For large layout imports refer to <b><a target=\"_blank\" href=\"https://kenzap.blog/importing-layouts-with-5000-seats-myticket-events-plugin/\">this guide</a></b>') }</li>\n                        </ol>\n            \n                        <p style=\"font-size:10pt;margin-top:20px;font-style: italic;\">${ __('Need help in designing your hall or stadium layout? <a target=\"_blank\" href=\"https://kenzap.com/seat-reservation-in-wordpress-setup-service-1014779/\">Contact support</a>.') }</p>\n                    </div>\n        \n                    <div class=\"modal-footer\">\n                        <button type=\"button\" class=\"btn btn-success\" data-bs-dismiss=\"modal\">${ __('Done') }</button>\n                        <button type=\"button\" class=\"btn btn-outline-dark btn-fw\" data-bs-dismiss=\"modal\">${ __('Cancel') }</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    \n\n        <div id=\"kenzap_import\" class=\"modal\">\n            <div class=\"modal-dialog\" role=\"document\">\n                <!-- Modal content -->\n                <div class=\"modal-content\">\n        \n                    <div class=\"modal-header\">\n                        <h5 class=\"modal-title\" id=\"ModalLabel\">${ __('Import Layout') }</h5>\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n                    </div>\n        \n                    <div class=\"modal-body\">\n        \n                        <textarea class=\"form-control\" id=\"importTextArea\" rows=\"4\"></textarea>\n            \n                        <ol class=\"mt-4\">\n                            <li>1. Backup current layout (make a copy)</li>\n                            <li>2. Verify JSON data is valid</li>\n                            <li>3. Paste your existing layout here</li>\n                        </ol>\n            \n                        <p class=\"text-danger\" style=\"font-size:10pt;margin-top:20px;font-style: italic;\">Warning. Wrong JSON structure may break current layout.</p>\n                    </div>\n        \n                    <div class=\"modal-footer\">\n                        <button id=\"import\" type=\"button\" class=\"btn btn-success\" data-bs-dismiss=\"modal\">${ __('Import') }</button>\n                        <button type=\"button\" class=\"btn btn-outline-dark btn-fw\" data-bs-dismiss=\"modal\">${ __('Cancel') }</button>\n                    </div>\n                </div>\n            </div> \n        </div>\n    \n\n        <div id=\"kenzap_stats\" class=\"modal\">\n            <div class=\"modal-dialog\" role=\"document\">\n                <!-- Modal content -->\n                <div class=\"modal-content\">\n        \n                    <div class=\"modal-header\">\n                        <h5 class=\"modal-title\" id=\"ModalLabel\">${ __('Layout Stats') }</h5>\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n                    </div>\n        \n                    <div id=\"stats-body\" class=\"modal-body\">\n        \n        \n                    </div>\n                </div>\n            </div>\n        </div>\n\n\n        <div class=\"modal\" tabindex=\"-1\">\n            <div class=\"modal-dialog\">\n                <div class=\"modal-content\">\n                    <div class=\"modal-header\">\n                        <h5 class=\"modal-title\"></h5>\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n                    </div>\n                    <div class=\"modal-body\">\n\n                    </div>\n                    <div class=\"modal-footer\">\n                        <button type=\"button\" class=\"btn btn-primary btn-modal\"></button>\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\"></button>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"toast-cont position-fixed bottom-0 p-2 m-4 end-0 align-items-center\">\n            <div class=\"toast hide align-items-center text-white bg-dark border-0\" role=\"alert\" aria-live=\"assertive\" aria-atomic=\"true\" data-bs-delay=\"3000\">\n                <div class=\"d-flex\">\n                    <div class=\"toast-body\"></div>\n                    <button type=\"button\" class=\"btn-close btn-close-white me-2 m-auto\" data-bs-dismiss=\"toast\" aria-label=\"Close\"></button>\n                </div>\n            </div>\n        </div>\n        \n    `;\n}","// initiate header and related scripts\nexport const initHeader = (response) => {\n\n    // cache header from backend\n    if(response.header) localStorage.setItem('header', response.header);\n  \n    // load header to html if not present\n    if(!document.querySelector(\"#k-script\")){\n  \n        let child = document.createElement('div');\n        child.innerHTML = localStorage.getItem('header');\n        child = child.firstChild;\n        document.body.prepend(child);\n  \n        // run header scripts\n        let script = Function(document.querySelector(\"#k-script\").innerHTML).call('test');\n    }\n  \n    // load locales if present\n    if(response.locale) window.i18n.init(response.locale); \n}\n\n// show loader\nexport const showLoader = () => {\n\n    let el = document.querySelector(\".loader\");\n    if (el) el.style.display = 'block';\n}\n\n// hide loader\nexport const hideLoader = () => {\n\n    let el = document.querySelector(\".loader\");\n    if (el) el.style.display = 'none';\n}\n\n// hide loader\nexport const initFooter = (left, right) => {\n\n    document.querySelector(\"footer .row\").innerHTML = `\n    <div class=\"d-sm-flex justify-content-center justify-content-sm-between\">\n        <span class=\"text-muted text-center text-sm-left d-block d-sm-inline-block\">${left}</span>\n        <span class=\"float-none float-sm-right d-block mt-1 mt-sm-0 text-center text-muted\">${right}</span>\n    </div>`;\n}","// import { app } from './this.app.js';\n\n/**\n * Set of public helper methods used by mapping.js or geometry classes\n */\n\nexport class Utils{\n\n    constructor(app) {\n\n        this._app = app;\n    }\n\n    CLASS_NAMES = {\n        SELECTED : 'selected',\n        WITH_HREF : 'with_href'\n    }\n\n    /**\n     * Returns offset from html page top-left corner for some element\n     *\n     * @param node {HTMLElement} - html element\n     * @returns {Object} - object with offsets, e.g. {x: 100, y: 200}\n     */\n    getOffset = function(node) {\n        let boxCoords = node.getBoundingClientRect();\n    \n        return {\n            x : Math.round(boxCoords.left + window.pageXOffset),\n            y : Math.round(boxCoords.top + window.pageYOffset)\n        };\n    };\n    \n    /**\n     * Returns correct coordinates (incl. offsets)\n     *\n     * @param x {number} - x-coordinate\n     * @param y {number} - y-coordinate\n     * @returns {Object} - object with recalculated coordinates, e.g. {x: 100, y: 200}\n     */ \n    getRightCoords = function(x, y) {\n        return {\n            x : x - app.getOffset('x'),\n            y : y - app.getOffset('y')\n        };\n    };\n\n    getOffset = function(arg) {\n        switch(arg) {\n            case 'x':\n            case 'y':\n                return state.offset[arg];\n        }\n    };\n    \n    /**\n     * TODO: will use same method of this.app.js\n     * @deprecated\n     */\n    id = function (str) {\n        return document.getElementById(str);\n    };\n    \n    /**\n     * TODO: will use same method of this.app.js\n     * @deprecated\n     */\n    hide = function(node) {\n        node.style.display = 'none';\n        \n        return this;\n    };\n    \n    /**\n     * TODO: will use same method of this.app.js\n     * @deprecated\n     */\n    show = function(node) {\n        node.style.display = 'block';\n        \n        return this;\n    };\n    \n    /**\n     * Escape < and > (for code output)\n     *\n     * @param str {string} - a string with < and >\n     * @returns {string} - a string with escaped < and >\n     */\n    encode = function(str) {\n        return str.replace(/</g, '&lt;').replace(/>/g, '&gt;');\n    };\n    \n    /**\n     * TODO: will use same method of this.app.js\n     * @deprecated\n     */\n    foreach = function(arr, func) {\n        for(let i = 0, count = arr.length; i < count; i++) {\n            func(arr[i], i);\n        }\n    };\n    \n    /**\n     * TODO: will use same method of this.app.js\n     * @deprecated\n     */\n    foreachReverse = function(arr, func) {\n        for(let i = arr.length - 1; i >= 0; i--) {\n            func(arr[i], i);\n        }\n    };\n    \n    /**\n     * Display debug info to some block\n     */\n    debug = (function() {\n        let output = document.getElementById('debug');\n        \n        return function() {\n            output.innerHTML = [].join.call(arguments, ' ');\n        };\n    })();\n    \n    /**\n     * TODO: will use same method of this.app.js\n     * @deprecated\n     */\n    stopEvent = function(e) {\n        e.stopPropagation();\n        e.preventDefault();\n        \n        return this;\n    };\n    \n    /**\n    * Get url params\n    */\n    getUrlParameter = function(sParam) {\n        let sPageURL = window.location.search.substring(1),\n            sURLVariables = sPageURL.split('&'),\n            sParameterName,\n            i;\n\n        for (i = 0; i < sURLVariables.length; i++) {\n            sParameterName = sURLVariables[i].split('=');\n\n            if (sParameterName[0] === sParam) {\n                return sParameterName[1] === undefined ? true : decodeURIComponent(sParameterName[1]);\n            }\n        }\n    };\n\n    /**\n     * Get cookie from current domain or subdomain by its name\n     * @param {String} cname - cookie name\n     */\n    getCookie = function(cname) {\n        let name = cname + \"=\";\n        let decodedCookie = decodeURIComponent(document.cookie);\n        let ca = decodedCookie.split(';');\n        for (let i = 0; i < ca.length; i++) {\n            let c = ca[i];\n            while (c.charAt(0) == ' ') {\n            c = c.substring(1);\n            }\n            if (c.indexOf(name) == 0) {\n                return unescape(c.substring(name.length, c.length));\n            }\n        }\n        return \"\";\n    };\n\n    /**\n     * TODO: will use same method of this.app.js\n     * @deprecated\n     */\n    extend = function(obj, options) {\n\n        let target = {};\n        for (let name in obj) {\n            if(obj.hasOwnProperty(name)) {\n                target[name] = options[name] ? options[name] : obj[name];\n            }\n        }\n\n        return target;\n    };\n\n    /**\n     * Returns copy of original polygon, selected and moved by (10,10) from it\n     * \n     * @param len {Integer}\n     * @returns {Area} - a copy of original area\n     */\n    genID = function (len) {\n\n        let text = \"\";\n        let possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n\n        for (let i = 0; i < len; i++)\n            text += possible.charAt(Math.floor(Math.random() * possible.length));\n\n        return text;\n    };\n    \n    inherits = (function() {\n        let F = function() {};\n        \n        return function(Child, Parent) {\n            F.prototype = Parent.prototype;\n            Child.prototype = new F();\n            Child.prototype.constructor = Child;\n        };\n    })();\n};","import { Utils } from '../helpers/utils.js';\n\n/**\n * The abstract constructor for all mapping shapes such as seat circle or zone polygon\n *\n * @param type {string} - type of area ('rectangle', 'circle' or 'polygon')\n * @param coords {Object} - coordinates of area (e.g. x, y, width, height)\n * @param attributes {Object} [attributes=undefined] - attributes for area (e.g. href, title)\n */\n export class Area{\n\n    // defaults\n    static SVG_NS = 'http://www.w3.org/2000/svg'; // TODO: move to main editor constructor\n    static CLASS_NAMES = {\n        SELECTED : 'selected',\n        WITH_HREF : 'with_href'\n    };\n    static CONSTRUCTORS = {\n        // rectangle : Rectangle,\n        // circle : Circle,\n        // polygon : Polygon\n    };\n    static REGEXP = {\n        AREA : /<area(?=.*? shape=\"(rect|circle|poly)\")(?=.*? coords=\"([\\d ,]+?)\")[\\s\\S]*?>/gmi,\n        HREF : / href=\"([\\S\\s]+?)\"/,\n        ALT : / alt=\"([\\S\\s]+?)\"/,\n        TITLE : / title=\"([\\S\\s]+?)\"/,\n        DELIMETER : / ?, ?/\n    };\n    static HTML_NAMES_TO_AREA_NAMES = {\n        rect : 'rectangle',\n        circle : 'circle',\n        poly : 'polygon'\n    };\n    static ATTRIBUTES_NAMES = ['ID', 'HREF', 'ALT', 'TITLE'];\n    \n    // Area class constructor\n    constructor(type, app, coords, seats, attributes) {\n\n        if (this.constructor === Area) {\n            throw new Error('This is abstract class');\n        }\n\n        this.utils = new Utils(app);\n\n        Area.CONSTRUCTORS[type] = this;\n\n        this._type = type;\n        this._app = app;\n\n        // seat array \n        this._seats = seats;\n\n        /**\n         * @namespace\n         * @property href {string} - href-attribute of area\n         * @property alt {string} - alt-attribute of area\n         * @property title {string} - title-attribute of area\n         */\n        this._attributes = {\n            id : this.utils.genID(6),\n            href : '',\n            points : []    \n        };\n\n        // the g-element, it contains this area and helpers elements\n        this._groupEl = document.createElementNS(Area.SVG_NS, 'g');\n\n        // attributes\n        if (attributes) {\n            this.setInfoAttributes(attributes);\n            this._groupEl.dataset.id = attributes.id;\n        }else{\n            this.setInfoAttributes(this._attributes);\n            this._groupEl.dataset.id = this._attributes.id;\n        }\n        \n        this._coords = coords;\n\n        this._app.addNodeToSvg(this._groupEl);\n        \n        // TODO: remove this field from DOM-element\n        // Link to parent object\n        this._groupEl.obj = this;\n        \n        // svg-dom-element of area\n        this._el = null; \n        \n        // Object with all helpers of area\n        this._helpers = {};\n        \n        // Add this new area to list of all areas \n        this._app.addObject(this);\n    }\n\n    /**\n     * This method should be implemented for child-classes \n     * \n     * @throws {AbstractMethodCall}\n     */\n    ABSTRACT_METHOD = function() {\n        throw new Error('This is abstract method');\n    };\n    \n    /**\n     * All these methods are abstract \n     * \n     * @throws {AbstractMethodCall}\n     */\n    // Area.prototype.setSVGCoords =\n    // Area.prototype.setCoords = \n    // Area.prototype.dynamicDraw = \n    // Area.prototype.onProcessDrawing = \n    // Area.prototype.onStopDrawing = \n    // Area.prototype.edit = \n    // Area.prototype.dynamicEdit = \n    // Area.prototype.onProcessEditing = \n    // Area.prototype.onStopEditing = \n    // Area.prototype.toString = \n    // Area.prototype.toHTMLMapElementString =\n    // Area.prototype.getCoordsForDisplayingInfo = \n    // Area.prototype.ABSTRACT_METHOD;\n    \n    /**\n     * Redraw this area with own or custom coordinates\n     * \n     * @param coords {Object} [coords=undefined]\n     * @returns {Area} - this area\n     */\n    redraw = function(coords) {\n        \n        this.setSVGCoords(coords ? coords : this._coords);\n        return this;\n    };\n    \n    /**\n     * Remove this area from DOM-tree\n     */\n    remove = function() {\n        this._app.removeNodeFromSvg(this._groupEl);\n    };\n\n    /**\n     * Move this area by dx, dy \n     * \n     * @returns {Area} - this area\n     */\n    move = function(dx, dy) {\n        this.setCoords(this.edit('move', dx, dy)).redraw();\n        return this;\n    };\n\n    /**\n     * Rotate this area by the angle\n     * \n     * @returns {Area} - this area\n     */\n    rotate = function(dx, dy) {\n        this.setCoords(this.edit('move', dx, dy)).redraw();\n        return this;\n    };\n    \n    /**\n     * Assign new id to this area\n     * \n     * @returns {Area} - this area\n     */\n    newID = function() {\n        \n        this._attributes.id = this.utils.genID(6);\n        this.redraw();\n        return this;\n    };\n    \n    /**\n     * Add class name for selected areas to this area\n     * \n     * @returns {Area} - this area\n     */\n    select = function() {\n\n        this._el.classList.add(Area.CLASS_NAMES.SELECTED);\n        // console.info(this.toString() + ' is selected now');\n        return this;\n    };\n    \n    /**\n     * Remove class name for selected areas from this area\n     * \n     * @returns {Area} - this area\n     */\n    deselect = function() {\n        this._el.classList.remove(Area.CLASS_NAMES.SELECTED);\n        \n        return this;\n    };\n    \n    /**\n     * Set style of element with href attribute for this area\n     * \n     * @returns {Area} - this area\n     */\n    setStyleOfElementWithHref = function() {\n        this._el.classList.add(Area.CLASS_NAMES.WITH_HREF);\n        \n        return this;\n    };\n    \n    /**\n     * Unset style of element with href attribute for this area\n     * \n     * @returns {Area} - this area\n     */\n    unsetStyleOfElementWithHref = function() {\n        this._el.classList.remove(Area.CLASS_NAMES.WITH_HREF);\n        \n        return this;\n    };\n    \n    /**\n     * Set attributes (href, alt and title) for this area\n     * \n     * @param attributes {Object} - Object with attributes for area\n     */\n    setInfoAttributes = function(attributes) {\n        this._attributes.id = attributes.id;\n        this._attributes.href = attributes.href;\n        this._attributes.alt = attributes.alt;\n        this._attributes.title = attributes.title;\n        // this._attributes.tws = attributes.tws;\n        // this._attributes.tns = attributes.tns;\n    };\n    \n    /**\n     * Returns json-representation of this area\n     * \n     * @returns {Object}\n     */\n    toJSON = function() {\n        /**\n         * @namespace\n         * @property type {string} - type of this area (e.g. 'rectangle', 'circle')\n         * @property coords {Object} - coordinates of this area (e.g. 'x', 'width') \n         * @property attributes {Object} - attributes of this area (e.g. 'href', 'title')\n         */\n        return {\n            type : this._type,\n            title : this._title,\n            seats : this._seats,\n            coords : this._coords,\n            attributes : this._attributes\n        };\n    };\n    \n    /**\n     * Returns new area object created with params from json-object\n     * \n     * @static\n     * @param params {Object} - params of area, incl. type, coords and attributes\n     * @returns {Rectangle|Circle|Polygon}\n     */\n    static fromJSON = function(app, params) {\n        \n        // console.log(params.type);\n        // var AreaConstructor = Area.CONSTRUCTORS[params.type];\n        \n        // if (!AreaConstructor) {\n        //     throw new Error('This area type is not valid');\n        // }\n        \n        // if (!AreaConstructor.testCoords(params.coords)) {\n        //     throw new Error('This coords is not valid for ' + params.type);\n        // }\n        \n        // app.setIsDraw(true);\n        \n        // var area = new AreaConstructor(params.coords, params.seats, params.attributes);\n        \n        // app.setIsDraw(false)\n        //    .resetNewArea();\n        \n        return app.fromJSONArea(params);\n    };\n\n    /**\n     * Returns copy of original polygon, selected and moved by (10,10) from it\n     * \n     * @param len {Integer}\n     * @returns {Area} - a copy of original area\n     */\n    static genID = function (len) {\n\n        let text = \"\";\n        let possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n\n        for (let i = 0; i < len; i++)\n            text += possible.charAt(Math.floor(Math.random() * possible.length));\n\n        return text;\n    };\n\n    /**\n     * Creates new areas from html-string with <area /> elements\n     * \n     * @param htmlStr {string}\n     * @returns {Array} - array with areas\n     */\n    createAreasFromHTMLOfMap = function(htmlStr) {\n        if (!htmlStr) {\n            return false;\n        } \n\n        while (true) {\n            var findedResult = Area.REGEXP.AREA.exec(htmlStr); // <area shape=\"$1\" coords=\"$2\" ... />\n            if (!findedResult) {\n                break;\n            }    \n\n            var htmlAreaFinded = findedResult[0], // <area shape=\"...\" coords=\"...\" ... />\n                type = findedResult[1], // $1\n                coords = findedResult[2].split(Area.REGEXP.DELIMETER), // $2\n                attributes = {}; \n            \n            Area.ATTRIBUTES_NAMES.forEach(function(item, i) {\n                var result = Area.REGEXP[item].exec(htmlAreaFinded);\n\n                if (result) {\n                    attributes[name] = result[1];\n                }    \n            });\n            \n            coords = coords.map(function(item) {\n                return Number(item);\n            });\n\n            type = Area.HTML_NAMES_TO_AREA_NAMES[type];\n\n            Area.fromJSON(this._app, {\n                type : type,\n                coords : Area.CONSTRUCTORS[type].getCoordsFromHTMLArray(coords),\n                seats: seats,\n                attributes : attributes\n            });\n\n        }\n\n        return Boolean(htmlAreaFinded);\n    };\n}","import { Area } from '../geometry/area.js';\n\n/**\n * Set of public helper methods used by mapping.js or geometry classes\n */\nexport class Helper{\n\n    static SIZE = 6;\n    static OFFSET = -Math.ceil(Helper.SIZE / 2);\n    static CLASS_NAME = 'helper';\n    static ACTIONS_TO_CURSORS = {\n        'move'            : 'move',\n        'editLeft'        : 'e-resize',\n        'editRight'       : 'w-resize',\n        'editTop'         : 'n-resize',\n        'editBottom'      : 's-resize',\n        'editTopLeft'     : 'nw-resize',\n        'editTopRight'    : 'ne-resize',\n        'editBottomLeft'  : 'sw-resize',\n        'editBottomRight' : 'se-resize',\n        'movePoint'       : 'pointer'\n    };\n\n    constructor(node, x, y, action) {\n        this._el = document.createElementNS(Area.SVG_NS, 'rect');\n        \n        this._el.classList.add(Helper.CLASS_NAME);\n        this._el.setAttribute('height', Helper.SIZE);\n        this._el.setAttribute('width', Helper.SIZE);\n        this._el.setAttribute('x', x + Helper.OFFSET);\n        this._el.setAttribute('y', y + Helper.OFFSET);\n        \n        node.appendChild(this._el);\n        \n        this._el.action = action; // TODO: move 'action' from dom el to data-attr\n        this._el.classList.add(Helper.ACTIONS_TO_CURSORS[action]);\n    }\n\n    /**\n     * Set coordinates for this helper\n     * \n     * @param x {number} - x-coordinate\n     * @param y {number} - y-coordinate\n     * @returns {Helper}\n     */\n    setCoords = function(x, y) {\n        this._el.setAttribute('x', x + Helper.OFFSET);\n        this._el.setAttribute('y', y + Helper.OFFSET);\n        \n        return this;\n    };\n\n    /**\n     * Set id of this helper in list of parent's helpers\n     * \n     * @param id {number} \n     * @returns {Helper}\n     */\n    setId = function(id) {\n        // TODO: move n-field from DOM-element to data-attribute\n        this._el.n = id;\n        \n        return this;\n    };    \n\n    \n}","import { Area } from './area.js';\nimport { Helper } from '../helpers/helper.js';\n\n/**\n * The constructor for rectangles\n * \n * (x, y) -----\n * |          | height\n * ------------\n *     width\n *\n * @constructor\n * @param coords {Object} - object with parameters of new area (x, y, width, height)\n *                          if some parameter is undefined, it will set 0\n * @param attributes {Object} [attributes=undefined] - attributes for area (e.g. href, title) \n */\n export class Rectangle extends Area{\n\n    constructor(app, coords, seats, attributes) {\n\n        super('rectangle', app, coords, seats, attributes);\n\n        this.app = app;\n\n        /**\n         * @namespace\n         * @property {number} x - Distance from the left edge of the image to the left side of the rectangle\n         * @property {number} y - Distance from the top edge of the image to the top side of the rectangle\n         * @property {number} width - Width of rectangle\n         * @property {number} height - Height of rectangle\n         */\n        this._coords = {\n            x: coords.x || 0,\n            y: coords.y || 0,\n            width: coords.width || 0,\n            height: coords.height || 0\n        };\n\n        this._el = document.createElementNS(Area.SVG_NS, 'rect');\n        this._groupEl.appendChild(this._el);\n\n        let x = coords.x - this._coords.width / 2,\n            y = coords.y - this._coords.height / 2;\n\n        this._helpers = {\n            center: new Helper(this._groupEl, x, y, 'move'),\n            top: new Helper(this._groupEl, x, y, 'editTop'),\n            bottom: new Helper(this._groupEl, x, y, 'editBottom'),\n            left: new Helper(this._groupEl, x, y, 'editLeft'),\n            right: new Helper(this._groupEl, x, y, 'editRight'),\n            topLeft: new Helper(this._groupEl, x, y, 'editTopLeft'),\n            topRight: new Helper(this._groupEl, x, y, 'editTopRight'),\n            bottomLeft: new Helper(this._groupEl, x, y, 'editBottomLeft'),\n            bottomRight: new Helper(this._groupEl, x, y, 'editBottomRight')\n        };\n\n        this.redraw();\n    }\n    // }\n    // utils.inherits(Rectangle, Area);\n\n    /**\n     * Set attributes for svg-elements of area by new parameters\n     * \n     * -----top------\n     * |            |\n     * ---center_y---\n     * |            |\n     * ----bottom----\n     * \n     * @param coords {Object} - Object with coords of this area (x, y, width, height)\n     * @returns {Rectangle} - this rectangle\n     */\n    setSVGCoords = function (coords) {\n        this._el.setAttribute('x', coords.x);\n        this._el.setAttribute('y', coords.y);\n        this._el.setAttribute('width', coords.width);\n        this._el.setAttribute('height', coords.height);\n\n        let top = coords.y,\n            center_y = coords.y + coords.height / 2,\n            bottom = coords.y + coords.height,\n            left = coords.x,\n            center_x = coords.x + coords.width / 2,\n            right = coords.x + coords.width;\n\n        this._helpers.center.setCoords(center_x, center_y);\n        this._helpers.top.setCoords(center_x, top);\n        this._helpers.bottom.setCoords(center_x, bottom);\n        this._helpers.left.setCoords(left, center_y);\n        this._helpers.right.setCoords(right, center_y);\n        this._helpers.topLeft.setCoords(left, top);\n        this._helpers.topRight.setCoords(right, top);\n        this._helpers.bottomLeft.setCoords(left, bottom);\n        this._helpers.bottomRight.setCoords(right, bottom);\n\n        return this;\n    };\n\n    /**\n     * Set coords for this area\n     * \n     * @param coords {coords}\n     * @returns {Rectangle} - this rectangle\n     */\n    setCoords = function (coords) {\n        this._coords.x = coords.x;\n        this._coords.y = coords.y;\n        this._coords.width = coords.width;\n        this._coords.height = coords.height;\n\n        return this;\n    };\n\n    /**\n     * Calculates new coordinates in process of drawing\n     * \n     * @param x {number} - x-coordinate of cursor\n     * @param y {number} - y-coordinate of cursor\n     * @param isSquare {boolean}\n     * @returns {Object} - calculated coords of this area\n     */\n    dynamicDraw = function (x, y, isSquare) {\n        let newCoords = {\n            x: this._coords.x,\n            y: this._coords.y,\n            width: x - this._coords.x,\n            height: y - this._coords.y\n        };\n\n        if (isSquare) {\n            newCoords = this.getSquareCoords(newCoords);\n        }\n\n        newCoords = this.getNormalizedCoords(newCoords);\n\n        this.redraw(newCoords);\n\n        return newCoords;\n    };\n\n    /**\n     * Handler for drawing process (by mousemove)\n     * It includes only redrawing area by new coords \n     * (this coords doesn't save as own area coords)\n     * \n     * @params e {MouseEvent} - mousemove event\n     */\n    onProcessDrawing = function (e) {\n        let coords = utils.getRightCoords(e.pageX, e.pageY);\n\n        this.dynamicDraw(coords.x, coords.y, e.shiftKey);\n    };\n\n    /**\n     * Handler for drawing stoping (by second click on drawing canvas)\n     * It includes redrawing area by new coords \n     * and saving this coords as own area coords\n     * \n     * @params e {MouseEvent} - click event\n     */\n    onStopDrawing = function (e) {\n        let coords = utils.getRightCoords(e.pageX, e.pageY);\n\n        this.setCoords(this.dynamicDraw(coords.x, coords.y, e.shiftKey)).deselect();\n\n        app.removeAllEvents()\n            .setIsDraw(false)\n            .resetNewArea();\n    };\n\n    /**\n     * Changes area parameters by editing type and offsets\n     * \n     * @param {string} editingType - A type of editing (e.g. 'move')\n     * @returns {Object} - Object with changed parameters of area \n     */\n    edit = function (editingType, dx, dy) {\n        let tempParams = Object.create(this._coords);\n\n        switch (editingType) {\n            case 'move':\n                tempParams.x += dx;\n                tempParams.y += dy;\n                break;\n\n            case 'editLeft':\n                tempParams.x += dx;\n                tempParams.width -= dx;\n                break;\n\n            case 'editRight':\n                tempParams.width += dx;\n                break;\n\n            case 'editTop':\n                tempParams.y += dy;\n                tempParams.height -= dy;\n                break;\n\n            case 'editBottom':\n                tempParams.height += dy;\n                break;\n\n            case 'editTopLeft':\n                tempParams.x += dx;\n                tempParams.y += dy;\n                tempParams.width -= dx;\n                tempParams.height -= dy;\n                break;\n\n            case 'editTopRight':\n                tempParams.y += dy;\n                tempParams.width += dx;\n                tempParams.height -= dy;\n                break;\n\n            case 'editBottomLeft':\n                tempParams.x += dx;\n                tempParams.width -= dx;\n                tempParams.height += dy;\n                break;\n\n            case 'editBottomRight':\n                tempParams.width += dx;\n                tempParams.height += dy;\n                break;\n        }\n\n        return tempParams;\n    };\n\n    /**\n     * Calculates new coordinates in process of editing\n     * \n     * @param coords {Object} - area coords \n     * @param saveProportions {boolean}\n     * @returns {Object} - new coordinates of area\n     */\n    dynamicEdit = function (coords, saveProportions) {\n        coords = this.getNormalizedCoords(coords);\n\n        if (saveProportions) {\n            coords = this.getSavedProportionsCoords(coords);\n        }\n\n        this.redraw(coords);\n\n        return coords;\n    };\n\n    /**\n     * Handler for editing process (by mousemove)\n     * It includes only redrawing area by new coords \n     * (this coords doesn't save as own area coords)\n     * \n     * @params e {MouseEvent} - mousemove event\n     */\n    onProcessEditing = function (e) {\n        return this.dynamicEdit(\n            this.edit(\n                app.getEditType(),\n                e.pageX - this.editingStartPoint.x,\n                e.pageY - this.editingStartPoint.y\n            ),\n            e.shiftKey\n        );\n    };\n\n    /**\n     * Handler for editing stoping (by mouseup)\n     * It includes redrawing area by new coords \n     * and saving this coords as own area coords\n     * \n     * @params e {MouseEvent} - mouseup event\n     */\n    onStopEditing = function (e) {\n        this.setCoords(this.onProcessEditing(e));\n        app.removeAllEvents();\n    };\n\n    /**\n     * Returns string-representation of this rectangle\n     * \n     * @returns {string}\n     */\n    toString = function () {\n        return 'Rectangle {x: ' + this._coords.x +\n            ', y: ' + this._coords.y +\n            ', width: ' + this._coords.width +\n            ', height: ' + this._coords.height + '}';\n    }\n\n    /**\n     * Returns html-string of area html element with params of this rectangle\n     * \n     * @returns {string}\n     */\n    toHTMLMapElementString = function () {\n        let x2 = this._coords.x + this._coords.width,\n            y2 = this._coords.y + this._coords.height;\n\n        return '<area shape=\"rect\" coords=\"' // TODO: use template engine\n            + this._coords.x + ', '\n            + this._coords.y + ', '\n            + x2 + ', '\n            + y2\n            + '\"'\n            + (this._attributes.href ? ' href=\"' + this._attributes.href + '\"' : '')\n            + (this._attributes.alt ? ' alt=\"' + this._attributes.alt + '\"' : '')\n            + (this._attributes.title ? ' title=\"' + this._attributes.title + '\"' : '')\n            + ' />';\n    };\n\n    /**\n     * Returns coords for area attributes form\n     * \n     * @returns {Object} - object width coordinates of point\n     */\n    getCoordsForDisplayingInfo = function () {\n        return {\n            x: this._coords.x,\n            y: this._coords.y\n        };\n    };\n\n    /**\n     * Returns true if coords is valid for rectangles and false otherwise\n     *\n     * @static\n     * @param coords {Object} - object with coords for new rectangle\n     * @return {boolean}\n     */\n    testCoords = function (coords) {\n        return coords.x && coords.y && coords.width && coords.height;\n    };\n\n    /**\n     * Returns true if html coords array is valid for rectangles and false otherwise\n     *\n     * @static\n     * @param coords {Array} - coords for new rectangle as array\n     * @return {boolean}\n     */\n    testHTMLCoords = function (coords) {\n        return coords.length === 4;\n    };\n\n    /**\n     * Return rectangle coords object from html array\n     * \n     * @param htmlCoordsArray {Array}\n     * @returns {Object}\n     */\n    getCoordsFromHTMLArray = function (htmlCoordsArray) {\n        if (!this.testHTMLCoords(htmlCoordsArray)) {\n            throw new Error('This html-coordinates is not valid for rectangle');\n        }\n\n        return {\n            x: htmlCoordsArray[0],\n            y: htmlCoordsArray[1],\n            width: htmlCoordsArray[2] - htmlCoordsArray[0],\n            height: htmlCoordsArray[3] - htmlCoordsArray[1]\n        };\n    };\n\n    /**\n     * Fixes coords if width or/and height are negative\n     * \n     * @static\n     * @param coords {Object} - Coordinates of this area \n     * @returns {Object} - Normalized coordinates of area\n     */\n    getNormalizedCoords = function (coords) {\n        if (coords.width < 0) {\n            coords.x += coords.width;\n            coords.width = Math.abs(coords.width);\n        }\n\n        if (coords.height < 0) {\n            coords.y += coords.height;\n            coords.height = Math.abs(coords.height);\n        }\n\n        return coords;\n    };\n\n    /**\n     * Returns coords with equivivalent width and height\n     * \n     * @static\n     * @param coords {Object} - Coordinates of this area \n     * @returns {Object} - Coordinates of area with equivivalent width and height\n     */\n    getSquareCoords = function (coords) {\n        let width = Math.abs(coords.width),\n            height = Math.abs(coords.height);\n\n        if (width > height) {\n            coords.width = coords.width > 0 ? height : -height;\n        } else {\n            coords.height = coords.height > 0 ? width : -width;\n        }\n\n        return coords;\n    };\n\n    /**\n     * Returns coords with saved proportions of original area\n     * \n     * @static\n     * @param coords {Object} - Coordinates of this area \n     * @param originalCoords {Object} - Coordinates of the original area\n     * @returns {Object} - Coordinates of area with saved proportions of original area\n     */\n    getSavedProportionsCoords = function (coords, originalCoords) {\n        let originalProportions = coords.width / coords.height,\n            currentProportions = originalCoords.width / originalCoords.height;\n\n        if (currentProportions > originalProportions) {\n            coords.width = Math.round(coords.height * originalProportions);\n        } else {\n            coords.height = Math.round(coords.width / originalProportions);\n        }\n\n        return coords;\n    };\n\n    /**\n     * Creates new rectangle and adds drawing handlers for DOM-elements\n     * \n     * @static\n     * @param firstPointCoords {Object}\n     * @returns {Rectangle}\n     */\n    createAndStartDrawing = function (firstPointCoords) {\n        let newArea = new Rectangle({\n            x: firstPointCoords.x,\n            y: firstPointCoords.y,\n            width: 0,\n            height: 0\n        });\n\n        app.addEvent(app.domElements.container, 'mousemove', newArea.onProcessDrawing.bind(newArea))\n            .addEvent(app.domElements.container, 'click', newArea.onStopDrawing.bind(newArea));\n\n        return newArea;\n    };\n }","/**\n * Calculate a point transformed with an affine matrix\n * @param matrix {Matrix} Affine Matrix\n * @param  point {Point} Point\n * @returns {Point} Point\n */\nexport function applyToPoint (matrix, point) {\n  return Array.isArray(point)\n    ? [\n        matrix.a * point[0] + matrix.c * point[1] + matrix.e,\n        matrix.b * point[0] + matrix.d * point[1] + matrix.f\n      ]\n    : {\n        x: matrix.a * point.x + matrix.c * point.y + matrix.e,\n        y: matrix.b * point.x + matrix.d * point.y + matrix.f\n      }\n}\n\n/**\n * Calculate an array of points transformed with an affine matrix\n * @param matrix {Matrix} Affine Matrix\n * @param points {Point[]} Array of point\n * @returns {Point[]} Array of point\n */\nexport function applyToPoints (matrix, points) {\n  return points.map(point => applyToPoint(matrix, point))\n}\n","export function isUndefined (val) {\n  return typeof val === 'undefined'\n}\n\nexport function isNumeric (n) {\n  return typeof n === 'number' &&\n    !Number.isNaN(n) &&\n    Number.isFinite(n)\n}\n\nexport function isObject (obj) {\n  return typeof obj === 'object' &&\n    obj !== null &&\n    !Array.isArray(obj)\n}\n\nexport function matchesShape (obj, keys) {\n  return keys.every(key => key in obj)\n}\n","/**\n * Calculate a translate matrix\n * @param tx {number} Translation on axis x\n * @param [ty = 0] {number} Translation on axis y\n * @returns {Matrix} Affine Matrix\n */\nexport function translate (tx, ty = 0) {\n  return {\n    a: 1,\n    c: 0,\n    e: tx,\n    b: 0,\n    d: 1,\n    f: ty\n  }\n}\n","/**\n * Merge multiple matrices into one\n * @param matrices {...Matrix | Matrix[]} Matrices listed as separate parameters or in an array\n * @returns {Matrix} Affine Matrix\n */\nexport function transform (...matrices) {\n  matrices = Array.isArray(matrices[0]) ? matrices[0] : matrices\n\n  const multiply = (m1, m2) => {\n    return {\n      a: m1.a * m2.a + m1.c * m2.b,\n      c: m1.a * m2.c + m1.c * m2.d,\n      e: m1.a * m2.e + m1.c * m2.f + m1.e,\n      b: m1.b * m2.a + m1.d * m2.b,\n      d: m1.b * m2.c + m1.d * m2.d,\n      f: m1.b * m2.e + m1.d * m2.f + m1.f\n    }\n  }\n\n  switch (matrices.length) {\n    case 0:\n      throw new Error('no matrices provided')\n\n    case 1:\n      return matrices[0]\n\n    case 2:\n      return multiply(matrices[0], matrices[1])\n\n    default: {\n      const [m1, m2, ...rest] = matrices\n      const m = multiply(m1, m2)\n      return transform(m, ...rest)\n    }\n  }\n}\n\n/**\n * Merge multiple matrices into one\n * @param matrices {...Matrix | Matrix[]} Matrices listed as separate parameters or in an array\n * @returns {Matrix} Affine Matrix\n */\nexport function compose (...matrices) {\n  return transform(...matrices)\n}\n","import { isUndefined } from './utils'\nimport { translate } from './translate'\nimport { transform } from './transform'\n\nconst { cos, sin, PI } = Math\n/**\n * Calculate a rotation matrix\n * @param angle {number} Angle in radians\n * @param [cx] {number} If (cx,cy) are supplied the rotate is about this point\n * @param [cy] {number} If (cx,cy) are supplied the rotate is about this point\n * @returns {Matrix} Affine Matrix\n */\nexport function rotate (angle, cx, cy) {\n  const cosAngle = cos(angle)\n  const sinAngle = sin(angle)\n  const rotationMatrix = {\n    a: cosAngle,\n    c: -sinAngle,\n    e: 0,\n    b: sinAngle,\n    d: cosAngle,\n    f: 0\n  }\n  if (isUndefined(cx) || isUndefined(cy)) {\n    return rotationMatrix\n  }\n\n  return transform([\n    translate(cx, cy),\n    rotationMatrix,\n    translate(-cx, -cy)\n  ])\n}\n\n/**\n * Calculate a rotation matrix with a DEG angle\n * @param angle {number} Angle in degree\n * @param [cx] {number} If (cx,cy) are supplied the rotate is about this point\n * @param [cy] {number} If (cx,cy) are supplied the rotate is about this point\n * @returns {Matrix} Affine Matrix\n */\nexport function rotateDEG (angle, cx = undefined, cy = undefined) {\n  return rotate(angle * PI / 180, cx, cy)\n}\n","// Generated by PEG.js v0.11.0-master.b7b87ea, https://pegjs.org/\n\nfunction peg$subclass(child, parent) {\n  function C() { this.constructor = child; }\n  C.prototype = parent.prototype;\n  child.prototype = new C();\n}\n\nfunction peg$SyntaxError(message, expected, found, location) {\n  this.message = message;\n  this.expected = expected;\n  this.found = found;\n  this.location = location;\n  this.name = \"SyntaxError\";\n\n  // istanbul ignore next\n  if (typeof Error.captureStackTrace === \"function\") {\n    Error.captureStackTrace(this, peg$SyntaxError);\n  }\n}\n\npeg$subclass(peg$SyntaxError, Error);\n\npeg$SyntaxError.buildMessage = function(expected, found, location) {\n  var DESCRIBE_EXPECTATION_FNS = {\n    literal: function(expectation) {\n      return \"\\\"\" + literalEscape(expectation.text) + \"\\\"\";\n    },\n\n    class: function(expectation) {\n      var escapedParts = expectation.parts.map(function(part) {\n        return Array.isArray(part)\n          ? classEscape(part[0]) + \"-\" + classEscape(part[1])\n          : classEscape(part);\n      });\n\n      return \"[\" + (expectation.inverted ? \"^\" : \"\") + escapedParts + \"]\";\n    },\n\n    any: function() {\n      return \"any character\";\n    },\n\n    end: function() {\n      return \"end of input\";\n    },\n\n    other: function(expectation) {\n      return expectation.description;\n    },\n\n    not: function(expectation) {\n      return \"not \" + describeExpectation(expectation.expected);\n    }\n  };\n\n  function hex(ch) {\n    return ch.charCodeAt(0).toString(16).toUpperCase();\n  }\n\n  function literalEscape(s) {\n    return s\n      .replace(/\\\\/g, \"\\\\\\\\\")\n      .replace(/\"/g,  \"\\\\\\\"\")\n      .replace(/\\0/g, \"\\\\0\")\n      .replace(/\\t/g, \"\\\\t\")\n      .replace(/\\n/g, \"\\\\n\")\n      .replace(/\\r/g, \"\\\\r\")\n      .replace(/[\\x00-\\x0F]/g,          function(ch) { return \"\\\\x0\" + hex(ch); })\n      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return \"\\\\x\"  + hex(ch); });\n  }\n\n  function classEscape(s) {\n    return s\n      .replace(/\\\\/g, \"\\\\\\\\\")\n      .replace(/\\]/g, \"\\\\]\")\n      .replace(/\\^/g, \"\\\\^\")\n      .replace(/-/g,  \"\\\\-\")\n      .replace(/\\0/g, \"\\\\0\")\n      .replace(/\\t/g, \"\\\\t\")\n      .replace(/\\n/g, \"\\\\n\")\n      .replace(/\\r/g, \"\\\\r\")\n      .replace(/[\\x00-\\x0F]/g,          function(ch) { return \"\\\\x0\" + hex(ch); })\n      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return \"\\\\x\"  + hex(ch); });\n  }\n\n  function describeExpectation(expectation) {\n    return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation);\n  }\n\n  function describeExpected(expected) {\n    var descriptions = expected.map(describeExpectation);\n    var i, j;\n\n    descriptions.sort();\n\n    if (descriptions.length > 0) {\n      for (i = 1, j = 1; i < descriptions.length; i++) {\n        if (descriptions[i - 1] !== descriptions[i]) {\n          descriptions[j] = descriptions[i];\n          j++;\n        }\n      }\n      descriptions.length = j;\n    }\n\n    switch (descriptions.length) {\n      case 1:\n        return descriptions[0];\n\n      case 2:\n        return descriptions[0] + \" or \" + descriptions[1];\n\n      default:\n        return descriptions.slice(0, -1).join(\", \")\n          + \", or \"\n          + descriptions[descriptions.length - 1];\n    }\n  }\n\n  function describeFound(found) {\n    return found ? \"\\\"\" + literalEscape(found) + \"\\\"\" : \"end of input\";\n  }\n\n  return \"Expected \" + describeExpected(expected) + \" but \" + describeFound(found) + \" found.\";\n};\n\nfunction peg$parse(input, options) {\n  options = options !== undefined ? options : {};\n\n  var peg$FAILED = {};\n\n  var peg$startRuleFunctions = { transformList: peg$parsetransformList };\n  var peg$startRuleFunction = peg$parsetransformList;\n\n  var peg$c0 = \"matrix\";\n  var peg$c1 = \"(\";\n  var peg$c2 = \")\";\n  var peg$c3 = \"translate\";\n  var peg$c4 = \"scale\";\n  var peg$c5 = \"rotate\";\n  var peg$c6 = \"skewX\";\n  var peg$c7 = \"skewY\";\n  var peg$c8 = \",\";\n  var peg$c9 = \".\";\n\n  var peg$r0 = /^[eE]/;\n  var peg$r1 = /^[+\\-]/;\n  var peg$r2 = /^[0-9]/;\n  var peg$r3 = /^[ \\t\\r\\n]/;\n\n  var peg$e0 = peg$literalExpectation(\"matrix\", false);\n  var peg$e1 = peg$literalExpectation(\"(\", false);\n  var peg$e2 = peg$literalExpectation(\")\", false);\n  var peg$e3 = peg$literalExpectation(\"translate\", false);\n  var peg$e4 = peg$literalExpectation(\"scale\", false);\n  var peg$e5 = peg$literalExpectation(\"rotate\", false);\n  var peg$e6 = peg$literalExpectation(\"skewX\", false);\n  var peg$e7 = peg$literalExpectation(\"skewY\", false);\n  var peg$e8 = peg$literalExpectation(\",\", false);\n  var peg$e9 = peg$otherExpectation(\"fractionalConstant\");\n  var peg$e10 = peg$classExpectation([\"e\", \"E\"], false, false);\n  var peg$e11 = peg$classExpectation([\"+\", \"-\"], false, false);\n  var peg$e12 = peg$classExpectation([[\"0\", \"9\"]], false, false);\n  var peg$e13 = peg$classExpectation([\" \", \"\\t\", \"\\r\", \"\\n\"], false, false);\n\n  var peg$f0 = function(ts) { return ts; };\n  var peg$f1 = function(t, ts) { return t.concat(ts) };\n  var peg$f2 = function(a, b, c, d, e, f) {\n        return [{type: 'matrix', a: a, b: b, c: c, d: d, e: e, f: f}];\n      };\n  var peg$f3 = function(tx, ty) {\n        var t = {type: 'translate', tx: tx};\n        if (ty) t.ty = ty;\n        return [t];\n      };\n  var peg$f4 = function(sx, sy) {\n        var s = {type:'scale', sx: sx};\n        if (sy) s.sy = sy;\n        return [s];\n      };\n  var peg$f5 = function(angle, c) {\n        var r = {type:'rotate', angle: angle};\n        if (c) {\n          r.cx = c[0];\n          r.cy = c[1];\n        }\n        return [r];\n      };\n  var peg$f6 = function(angle) {\n        return [{type: 'skewX', angle: angle}];\n      };\n  var peg$f7 = function(angle) {\n        return [{type: 'skewY', angle: angle}];\n      };\n  var peg$f8 = function(f) { return parseFloat(f.join(\"\")); };\n  var peg$f9 = function(i) { return parseInt(i.join(\"\")); };\n  var peg$f10 = function(n) { return n; };\n  var peg$f11 = function(n1, n2) { return [n1, n2]; };\n  var peg$f12 = function(ds) { return ds.join(\"\"); };\n  var peg$f13 = function(f, e) { return [f, e || null].join(\"\")};\n  var peg$f14 = function(d, e) { return [d, e].join(\"\")};\n  var peg$f15 = function(d1, d2) { return [d1 ? d1.join(\"\") : null, \".\", d2.join(\"\")].join(\"\"); };\n  var peg$f16 = function(d) { return d.join(\"\"); };\n  var peg$f17 = function(s, d) { return ['e', s, d.join(\"\")].join(\"\") };\n\n  var peg$currPos = 0;\n  var peg$savedPos = 0;\n  var peg$posDetailsCache = [{ line: 1, column: 1 }];\n  var peg$expected = [];\n  var peg$silentFails = 0;\n\n  var peg$result;\n\n  if (\"startRule\" in options) {\n    if (!(options.startRule in peg$startRuleFunctions)) {\n      throw new Error(\"Can't start parsing from rule \\\"\" + options.startRule + \"\\\".\");\n    }\n\n    peg$startRuleFunction = peg$startRuleFunctions[options.startRule];\n  }\n\n  function text() {\n    return input.substring(peg$savedPos, peg$currPos);\n  }\n\n  function offset() {\n    return peg$savedPos;\n  }\n\n  function range() {\n    return [peg$savedPos, peg$currPos];\n  }\n\n  function location() {\n    return peg$computeLocation(peg$savedPos, peg$currPos);\n  }\n\n  function expected(description, location) {\n    location = location !== undefined\n      ? location\n      : peg$computeLocation(peg$savedPos, peg$currPos);\n\n    throw peg$buildStructuredError(\n      [peg$otherExpectation(description)],\n      input.substring(peg$savedPos, peg$currPos),\n      location\n    );\n  }\n\n  function error(message, location) {\n    location = location !== undefined\n      ? location\n      : peg$computeLocation(peg$savedPos, peg$currPos);\n\n    throw peg$buildSimpleError(message, location);\n  }\n\n  function peg$literalExpectation(text, ignoreCase) {\n    return { type: \"literal\", text: text, ignoreCase: ignoreCase };\n  }\n\n  function peg$classExpectation(parts, inverted, ignoreCase) {\n    return { type: \"class\", parts: parts, inverted: inverted, ignoreCase: ignoreCase };\n  }\n\n  function peg$anyExpectation() {\n    return { type: \"any\" };\n  }\n\n  function peg$endExpectation() {\n    return { type: \"end\" };\n  }\n\n  function peg$otherExpectation(description) {\n    return { type: \"other\", description: description };\n  }\n\n  function peg$computePosDetails(pos) {\n    var details = peg$posDetailsCache[pos];\n    var p;\n\n    if (details) {\n      return details;\n    } else {\n      p = pos - 1;\n      while (!peg$posDetailsCache[p]) {\n        p--;\n      }\n\n      details = peg$posDetailsCache[p];\n      details = {\n        line: details.line,\n        column: details.column\n      };\n\n      while (p < pos) {\n        if (input.charCodeAt(p) === 10) {\n          details.line++;\n          details.column = 1;\n        } else {\n          details.column++;\n        }\n\n        p++;\n      }\n\n      peg$posDetailsCache[pos] = details;\n\n      return details;\n    }\n  }\n\n  var peg$VALIDFILENAME = typeof options.filename === \"string\" && options.filename.length > 0;\n  function peg$computeLocation(startPos, endPos) {\n    var loc = {};\n\n    if ( peg$VALIDFILENAME ) loc.filename = options.filename;\n\n    var startPosDetails = peg$computePosDetails(startPos);\n    loc.start = {\n      offset: startPos,\n      line: startPosDetails.line,\n      column: startPosDetails.column\n    };\n\n    var endPosDetails = peg$computePosDetails(endPos);\n    loc.end = {\n      offset: endPos,\n      line: endPosDetails.line,\n      column: endPosDetails.column\n    };\n\n    return loc;\n  }\n\n  function peg$begin() {\n    peg$expected.push({ pos: peg$currPos, variants: [] });\n  }\n\n  function peg$expect(expected) {\n    var top = peg$expected[peg$expected.length - 1];\n\n    if (peg$currPos < top.pos) { return; }\n\n    if (peg$currPos > top.pos) {\n      top.pos = peg$currPos;\n      top.variants = [];\n    }\n\n    top.variants.push(expected);\n  }\n\n  function peg$end(invert) {\n    var expected = peg$expected.pop();\n    var top = peg$expected[peg$expected.length - 1];\n    var variants = expected.variants;\n\n    if (top.pos !== expected.pos) { return; }\n\n    if (invert) {\n      variants = variants.map(function(e) {\n        return e.type === \"not\" ? e.expected : { type: \"not\", expected: e };\n      });\n    }\n\n    Array.prototype.push.apply(top.variants, variants);\n  }\n\n  function peg$buildSimpleError(message, location) {\n    return new peg$SyntaxError(message, null, null, location);\n  }\n\n  function peg$buildStructuredError(expected, found, location) {\n    return new peg$SyntaxError(\n      peg$SyntaxError.buildMessage(expected, found, location),\n      expected,\n      found,\n      location\n    );\n  }\n\n  function peg$buildError() {\n    var expected = peg$expected[0];\n    var failPos = expected.pos;\n\n    return peg$buildStructuredError(\n      expected.variants,\n      failPos < input.length ? input.charAt(failPos) : null,\n      failPos < input.length\n        ? peg$computeLocation(failPos, failPos + 1)\n        : peg$computeLocation(failPos, failPos)\n    );\n  }\n\n  function peg$parsetransformList() {\n    var s0, s1, s2, s3, s4;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = [];\n    s2 = peg$parsewsp();\n    while (s2 !== peg$FAILED) {\n      s1.push(s2);\n      s2 = peg$parsewsp();\n    }\n    s2 = peg$parsetransforms();\n    if (s2 === peg$FAILED) {\n      s2 = null;\n    }\n    s3 = [];\n    s4 = peg$parsewsp();\n    while (s4 !== peg$FAILED) {\n      s3.push(s4);\n      s4 = peg$parsewsp();\n    }\n    peg$savedPos = s0;\n    s0 = peg$f0(s2);\n\n    return s0;\n  }\n\n  function peg$parsetransforms() {\n    var s0, s1, s2, s3;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$parsetransform();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsecommaWsp();\n      if (s3 !== peg$FAILED) {\n        while (s3 !== peg$FAILED) {\n          s2.push(s3);\n          s3 = peg$parsecommaWsp();\n        }\n      } else {\n        s2 = peg$FAILED;\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsetransforms();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s0 = peg$f1(s1, s3);\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$parsetransform();\n    }\n\n    return s0;\n  }\n\n  function peg$parsetransform() {\n    var s0;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$parsematrix();\n    if (s0 === peg$FAILED) {\n      s0 = peg$parsetranslate();\n      if (s0 === peg$FAILED) {\n        s0 = peg$parsescale();\n        if (s0 === peg$FAILED) {\n          s0 = peg$parserotate();\n          if (s0 === peg$FAILED) {\n            s0 = peg$parseskewX();\n            if (s0 === peg$FAILED) {\n              s0 = peg$parseskewY();\n            }\n          }\n        }\n      }\n    }\n\n    return s0;\n  }\n\n  function peg$parsematrix() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8, s9, s10, s11, s12, s13, s14, s15, s16, s17;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e0);\n    if (input.substr(peg$currPos, 6) === peg$c0) {\n      s1 = peg$c0;\n      peg$currPos += 6;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      rule$expects(peg$e1);\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s3 = peg$c1;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s6 = peg$parsecommaWsp();\n          if (s6 !== peg$FAILED) {\n            s7 = peg$parsenumber();\n            if (s7 !== peg$FAILED) {\n              s8 = peg$parsecommaWsp();\n              if (s8 !== peg$FAILED) {\n                s9 = peg$parsenumber();\n                if (s9 !== peg$FAILED) {\n                  s10 = peg$parsecommaWsp();\n                  if (s10 !== peg$FAILED) {\n                    s11 = peg$parsenumber();\n                    if (s11 !== peg$FAILED) {\n                      s12 = peg$parsecommaWsp();\n                      if (s12 !== peg$FAILED) {\n                        s13 = peg$parsenumber();\n                        if (s13 !== peg$FAILED) {\n                          s14 = peg$parsecommaWsp();\n                          if (s14 !== peg$FAILED) {\n                            s15 = peg$parsenumber();\n                            if (s15 !== peg$FAILED) {\n                              s16 = [];\n                              s17 = peg$parsewsp();\n                              while (s17 !== peg$FAILED) {\n                                s16.push(s17);\n                                s17 = peg$parsewsp();\n                              }\n                              rule$expects(peg$e2);\n                              if (input.charCodeAt(peg$currPos) === 41) {\n                                s17 = peg$c2;\n                                peg$currPos++;\n                              } else {\n                                s17 = peg$FAILED;\n                              }\n                              if (s17 !== peg$FAILED) {\n                                peg$savedPos = s0;\n                                s0 = peg$f2(s5, s7, s9, s11, s13, s15);\n                              } else {\n                                peg$currPos = s0;\n                                s0 = peg$FAILED;\n                              }\n                            } else {\n                              peg$currPos = s0;\n                              s0 = peg$FAILED;\n                            }\n                          } else {\n                            peg$currPos = s0;\n                            s0 = peg$FAILED;\n                          }\n                        } else {\n                          peg$currPos = s0;\n                          s0 = peg$FAILED;\n                        }\n                      } else {\n                        peg$currPos = s0;\n                        s0 = peg$FAILED;\n                      }\n                    } else {\n                      peg$currPos = s0;\n                      s0 = peg$FAILED;\n                    }\n                  } else {\n                    peg$currPos = s0;\n                    s0 = peg$FAILED;\n                  }\n                } else {\n                  peg$currPos = s0;\n                  s0 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsetranslate() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e3);\n    if (input.substr(peg$currPos, 9) === peg$c3) {\n      s1 = peg$c3;\n      peg$currPos += 9;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      rule$expects(peg$e1);\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s3 = peg$c1;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s6 = peg$parsecommaWspNumber();\n          if (s6 === peg$FAILED) {\n            s6 = null;\n          }\n          s7 = [];\n          s8 = peg$parsewsp();\n          while (s8 !== peg$FAILED) {\n            s7.push(s8);\n            s8 = peg$parsewsp();\n          }\n          rule$expects(peg$e2);\n          if (input.charCodeAt(peg$currPos) === 41) {\n            s8 = peg$c2;\n            peg$currPos++;\n          } else {\n            s8 = peg$FAILED;\n          }\n          if (s8 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f3(s5, s6);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsescale() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e4);\n    if (input.substr(peg$currPos, 5) === peg$c4) {\n      s1 = peg$c4;\n      peg$currPos += 5;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      rule$expects(peg$e1);\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s3 = peg$c1;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s6 = peg$parsecommaWspNumber();\n          if (s6 === peg$FAILED) {\n            s6 = null;\n          }\n          s7 = [];\n          s8 = peg$parsewsp();\n          while (s8 !== peg$FAILED) {\n            s7.push(s8);\n            s8 = peg$parsewsp();\n          }\n          rule$expects(peg$e2);\n          if (input.charCodeAt(peg$currPos) === 41) {\n            s8 = peg$c2;\n            peg$currPos++;\n          } else {\n            s8 = peg$FAILED;\n          }\n          if (s8 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f4(s5, s6);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parserotate() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e5);\n    if (input.substr(peg$currPos, 6) === peg$c5) {\n      s1 = peg$c5;\n      peg$currPos += 6;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      rule$expects(peg$e1);\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s3 = peg$c1;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s6 = peg$parsecommaWspTwoNumbers();\n          if (s6 === peg$FAILED) {\n            s6 = null;\n          }\n          s7 = [];\n          s8 = peg$parsewsp();\n          while (s8 !== peg$FAILED) {\n            s7.push(s8);\n            s8 = peg$parsewsp();\n          }\n          rule$expects(peg$e2);\n          if (input.charCodeAt(peg$currPos) === 41) {\n            s8 = peg$c2;\n            peg$currPos++;\n          } else {\n            s8 = peg$FAILED;\n          }\n          if (s8 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f5(s5, s6);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseskewX() {\n    var s0, s1, s2, s3, s4, s5, s6, s7;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e6);\n    if (input.substr(peg$currPos, 5) === peg$c6) {\n      s1 = peg$c6;\n      peg$currPos += 5;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      rule$expects(peg$e1);\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s3 = peg$c1;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s6 = [];\n          s7 = peg$parsewsp();\n          while (s7 !== peg$FAILED) {\n            s6.push(s7);\n            s7 = peg$parsewsp();\n          }\n          rule$expects(peg$e2);\n          if (input.charCodeAt(peg$currPos) === 41) {\n            s7 = peg$c2;\n            peg$currPos++;\n          } else {\n            s7 = peg$FAILED;\n          }\n          if (s7 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f6(s5);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseskewY() {\n    var s0, s1, s2, s3, s4, s5, s6, s7;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e7);\n    if (input.substr(peg$currPos, 5) === peg$c7) {\n      s1 = peg$c7;\n      peg$currPos += 5;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      rule$expects(peg$e1);\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s3 = peg$c1;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s6 = [];\n          s7 = peg$parsewsp();\n          while (s7 !== peg$FAILED) {\n            s6.push(s7);\n            s7 = peg$parsewsp();\n          }\n          rule$expects(peg$e2);\n          if (input.charCodeAt(peg$currPos) === 41) {\n            s7 = peg$c2;\n            peg$currPos++;\n          } else {\n            s7 = peg$FAILED;\n          }\n          if (s7 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f7(s5);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsenumber() {\n    var s0, s1, s2, s3;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$currPos;\n    s2 = peg$parsesign();\n    if (s2 === peg$FAILED) {\n      s2 = null;\n    }\n    s3 = peg$parsefloatingPointConstant();\n    if (s3 !== peg$FAILED) {\n      s2 = [s2, s3];\n      s1 = s2;\n    } else {\n      peg$currPos = s1;\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$f8(s1);\n    }\n    s0 = s1;\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$currPos;\n      s2 = peg$parsesign();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      s3 = peg$parseintegerConstant();\n      if (s3 !== peg$FAILED) {\n        s2 = [s2, s3];\n        s1 = s2;\n      } else {\n        peg$currPos = s1;\n        s1 = peg$FAILED;\n      }\n      if (s1 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$f9(s1);\n      }\n      s0 = s1;\n    }\n\n    return s0;\n  }\n\n  function peg$parsecommaWspNumber() {\n    var s0, s1, s2;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$parsecommaWsp();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsenumber();\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s0 = peg$f10(s2);\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsecommaWspTwoNumbers() {\n    var s0, s1, s2, s3, s4;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$parsecommaWsp();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsenumber();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsecommaWsp();\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parsenumber();\n          if (s4 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s0 = peg$f11(s2, s4);\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsecommaWsp() {\n    var s0, s1, s2, s3, s4;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = [];\n    s2 = peg$parsewsp();\n    if (s2 !== peg$FAILED) {\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        s2 = peg$parsewsp();\n      }\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsecomma();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      s3 = [];\n      s4 = peg$parsewsp();\n      while (s4 !== peg$FAILED) {\n        s3.push(s4);\n        s4 = peg$parsewsp();\n      }\n      s1 = [s1, s2, s3];\n      s0 = s1;\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$parsecomma();\n      if (s1 !== peg$FAILED) {\n        s2 = [];\n        s3 = peg$parsewsp();\n        while (s3 !== peg$FAILED) {\n          s2.push(s3);\n          s3 = peg$parsewsp();\n        }\n        s1 = [s1, s2];\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    }\n\n    return s0;\n  }\n\n  function peg$parsecomma() {\n    var s0;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    rule$expects(peg$e8);\n    if (input.charCodeAt(peg$currPos) === 44) {\n      s0 = peg$c8;\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseintegerConstant() {\n    var s0, s1;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$parsedigitSequence();\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$f12(s1);\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parsefloatingPointConstant() {\n    var s0, s1, s2;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    s1 = peg$parsefractionalConstant();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parseexponent();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      peg$savedPos = s0;\n      s0 = peg$f13(s1, s2);\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$parsedigitSequence();\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parseexponent();\n        if (s2 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s0 = peg$f14(s1, s2);\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    }\n\n    return s0;\n  }\n\n  function peg$parsefractionalConstant() {\n    var s0, s1, s2, s3;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    rule$expects(peg$e9);\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = peg$parsedigitSequence();\n    if (s1 === peg$FAILED) {\n      s1 = null;\n    }\n    if (input.charCodeAt(peg$currPos) === 46) {\n      s2 = peg$c9;\n      peg$currPos++;\n    } else {\n      s2 = peg$FAILED;\n    }\n    if (s2 !== peg$FAILED) {\n      s3 = peg$parsedigitSequence();\n      if (s3 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s0 = peg$f15(s1, s3);\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$parsedigitSequence();\n      if (s1 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 46) {\n          s2 = peg$c9;\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n        }\n        if (s2 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s0 = peg$f16(s1);\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    }\n    peg$silentFails--;\n\n    return s0;\n  }\n\n  function peg$parseexponent() {\n    var s0, s1, s2, s3;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = peg$currPos;\n    rule$expects(peg$e10);\n    if (peg$r0.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsesign();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      s3 = peg$parsedigitSequence();\n      if (s3 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s0 = peg$f17(s2, s3);\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsesign() {\n    var s0;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    rule$expects(peg$e11);\n    if (peg$r1.test(input.charAt(peg$currPos))) {\n      s0 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsedigitSequence() {\n    var s0, s1;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    s0 = [];\n    s1 = peg$parsedigit();\n    if (s1 !== peg$FAILED) {\n      while (s1 !== peg$FAILED) {\n        s0.push(s1);\n        s1 = peg$parsedigit();\n      }\n    } else {\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsedigit() {\n    var s0;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    rule$expects(peg$e12);\n    if (peg$r2.test(input.charAt(peg$currPos))) {\n      s0 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsewsp() {\n    var s0;\n\n    var rule$expects = function (expected) {\n      if (peg$silentFails === 0) peg$expect(expected);\n    }\n\n    rule$expects(peg$e13);\n    if (peg$r3.test(input.charAt(peg$currPos))) {\n      s0 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  peg$begin();\n  peg$result = peg$startRuleFunction();\n\n  if (peg$result !== peg$FAILED && peg$currPos === input.length) {\n    return peg$result;\n  } else {\n    if (peg$result !== peg$FAILED && peg$currPos < input.length) {\n      peg$expect(peg$endExpectation());\n    }\n\n    throw peg$buildError();\n  }\n}\n\nexport {\n  peg$SyntaxError as SyntaxError,\n  peg$parse as parse\n};\n\nexport default {\n  SyntaxError: peg$SyntaxError,\n  parse: peg$parse\n};\n","import { Area } from './area.js';\nimport { Helper } from '../helpers/helper.js';\nimport { rotateDEG, translate, compose, applyToPoints } from 'transformation-matrix';\n\n/**\n * The constructor for polygons. Used to draw, edit zones\n *  \n *        {x0, y0}  \n *           /\\\n *          /  \\\n *         /    \\   \n * {x1, y1} ----- {x2, y2}\n *\n * @constructor\n * @param coords {Object} - object with parameters of new area ('points' is list of points)\n * if 'points' is empty, it will set to [(0,0)]\n * @param coords.isOpened {boolean} - if polygon is opened (polyline instead polygon)\n * @param attributes {Object} [attributes=undefined] - attributes for area (e.g. href, title)\n */\n\nexport class Polygon extends Area{\n\n    constructor(app, coords, seats, attributes) {\n\n        super('polygon', app, coords, seats, attributes);\n\n        // Area.call(this, 'polygon', coords, seats, attributes);\n\n        this.app = app;\n        /**\n         * @namespace\n         * @property {Array} points - Array with coordinates of polygon points\n         */\n        this._coords = {\n            points : coords.points || [{x: 0, y: 0}],\n            isOpened : coords.isOpened || false\n        };\n\n        this._el = document.createElementNS(\n            Area.SVG_NS, \n            this._coords.isOpened ? 'polyline' : 'polygon'\n        );\n\n        if ( typeof(attributes) !== 'undefined' )\n            this._el.dataset.id = attributes.id;\n\n        if ( typeof(seats) === 'undefined' ){\n            seats = [];\n        }\n\n        this._groupEl.appendChild(this._el);\n\n        this._helpers = { \n            points : []\n        };\n\n        for (let i = 0, c = this._coords.points.length; i < c; i++) {\n            this._helpers.points.push(\n                (new Helper(\n                    this._groupEl, \n                    this._coords.points[i].x, \n                    this._coords.points[i].y, \n                    'movePoint')\n                ).setId(i)\n            );\n        }\n        \n        this._selectedPoint = -1;\n        \n        this.redraw();\n    };\n\n    close = () => {\n        let polyline = this._el;\n        this._el = document.createElementNS(Area.SVG_NS, 'polygon');\n        this._groupEl.replaceChild(this._el, polyline);\n\n        this._coords.isOpened = false;\n        this.redraw().deselect();\n    };\n\n    /**\n     * Set attributes for svg-elements of area by new parameters\n     * \n     * @param coords {Object} - Object with coords of this area, with field 'points'\n     * @returns {Polygon} - this area\n     */\n    setSVGCoords = (coords) => {\n        let polygonPointsAttrValue = coords.points.reduce(function (previousValue, currentItem) {\n            return previousValue + currentItem.x + ' ' + currentItem.y + ' ';\n        }, '');\n\n        this._el.setAttribute('points', polygonPointsAttrValue);\n        this.foreach(this._helpers.points, function (helper, i) {\n            helper.setCoords(coords.points[i].x, coords.points[i].y);\n        });\n\n        return this;\n    };\n\n    foreach = (arr, cb) => {\n        for (let i = 0, count = arr.length; i < count; i++) {\n            cb(arr[i], i);\n        }\n    };\n\n    /**\n     * Returns correct coordinates (incl. offsets)\n     *\n     * @param x {number} - x-coordinate\n     * @param y {number} - y-coordinate\n     * @returns {Object} - object with recalculated coordinates, e.g. {x: 100, y: 200}\n     */\n    getRightCoords = (app, x, y) => {\n        return {\n            x: x - app.getOffset('x'),\n            y: y - app.getOffset('y')\n        };\n    };\n\n    /**\n     * Set coords for this area\n     * \n     * @param coords {coords}\n     * @returns {Polygon} - this area\n     */\n    setCoords = (coords) => {\n        \n        this._coords.points = coords.points;\n\n        return this;\n    };\n\n    /**\n     * Adds new point to polygon (and new helper too)\n     * \n     * @param x {number} - x-coordinate of new point\n     * @param y {number} - y-coordinate of new point\n     * @returns {Polygon} - this area\n     */\n    addPoint = (x, y) => {\n        if (!this._coords.isOpened) {\n            throw new Error('This polygon is closed!');\n        }\n\n        let helper = new Helper(this._groupEl, x, y, 'movePoint');\n        helper.setId(this._helpers.points.length);\n\n        this._helpers.points.push(helper);\n        this._coords.points.push({\n            x: x,\n            y: y\n        });\n        this.redraw();\n\n        return this;\n    };\n\n    /**\n     * Calculates new coordinates in process of drawing\n     * \n     * @param x {number}\n     * @param y {number}\n     * @param isRightAngle {boolean}\n     * @returns {Object} - calculated coordinates\n     */\n    dynamicDraw = (app, x, y, isRightAngle) => {\n        let temp_coords = {\n            points: [].concat(this._coords.points)\n        };\n\n        if (isRightAngle) {\n            let rightPointCoords = Polygon.getRightAngleLineLastPointCoords(\n                this._coords, { x: x, y: y }\n            );\n            x = rightPointCoords.x;\n            y = rightPointCoords.y;\n        }\n\n        temp_coords.points.push({ x: x, y: y });\n\n        this.redraw(temp_coords);\n\n        return temp_coords;\n    };\n\n    /**\n     * Handler for drawing process (by mousemove)\n     * It includes only redrawing area by new coords \n     * (this coordinates doesn't save as own area coords)\n     * \n     * @params e {MouseEvent} - mousemove event\n     */\n    onProcessDrawing = (e) => {\n\n        let coords = this.getRightCoords(this.app, e.pageX, e.pageY);\n        this.dynamicDraw(this.app, coords.x, coords.y, e.shiftKey);\n    };\n\n    /**\n     * Handler for polygon pointer adding (by click on drawing canvas)\n     * It includes redrawing area with this new point \n     * and saving this point to list of polygon points\n     * \n     * @params e {MouseEvent} - click event\n     */\n    onAddPointDrawing = (e) => {\n\n        let newPointCoords = this.getRightCoords(this.app, e.pageX, e.pageY);\n\n        if (e.shiftKey) {\n            newPointCoords = Polygon.getRightAngleLineLastPointCoords(this._coords, newPointCoords);\n        }\n\n        this.addPoint(newPointCoords.x, newPointCoords.y);\n    };\n\n    /**\n     * Handler for drawing stoping (by click on first helper or press ENTER key)\n     * It includes redrawing area by new coords, closing this polygon \n     * and saving this coords as own area coords\n     * \n     * @params e {KeyboardEvent|MouseEvent} - click or keydown event\n     */\n    onStopDrawing = (e) => {\n\n        let app = this.app;\n        // if (typeof(app) === 'undefined'){ app = this.app; }\n\n        if (e.type == 'click' || (e.type == 'keydown' && e.keyCode == 13)) {\n            if (this.testCoords(this._coords)) {\n                this.close();\n\n                app.removeAllEvents()\n                    .setIsDraw(false)\n                    .resetNewArea();\n            }\n        }\n        e.stopPropagation();\n    };\n\n    /**\n     * Changes area parameters by editing type and offsets\n     * \n     * @param {string} editingType - A type of editing\n     * @returns {Object} - Object with changed parameters of area \n     */\n    edit = (editingType, dx, dy) => {\n        let tempParams = Object.create(this._coords);\n\n        switch (editingType) {\n            case 'move':\n                for (let i = 0, c = tempParams.points.length; i < c; i++) {\n                    tempParams.points[i].x += dx;\n                    tempParams.points[i].y += dy;\n                }\n                break;\n\n            case 'movePoint':\n                tempParams.points[this.selected_point].x += dx;\n                tempParams.points[this.selected_point].y += dy;\n                break;\n        }\n\n        return tempParams;\n    };\n\n    /**\n     * Handler for editing process (by mousemove)\n     * It includes only redrawing area by new coords\n     * (this coords doesn't save as area coords)\n     * \n     * @params e {MouseEvent} - mousemove event\n     */\n    onProcessEditing = (e) => {\n        let editType = this.app.getEditType();\n\n        this.redraw(\n            this.edit(\n                editType,\n                e.pageX - this.editingStartPoint.x,\n                e.pageY - this.editingStartPoint.y\n            )\n        );\n\n        this.editingStartPoint.x = e.pageX;\n        this.editingStartPoint.y = e.pageY;\n    };\n\n    /**\n     * Handler for editing stoping (by mouseup on drawing canvas)\n     * It includes redrawing area by new coords and saving this new coords\n     * as own area coords\n     * \n     * @params e {MouseEvent} - click or keydown event\n     */\n    onStopEditing = (e) => {\n        let editType = this.app.getEditType();\n\n        this.setCoords(\n            this.edit(\n                editType,\n                e.pageX - this.editingStartPoint.x,\n                e.pageY - this.editingStartPoint.y\n            )\n        ).redraw();\n\n        this.app.removeAllEvents();\n    };\n\n    /**\n     * Returns string-representation of polygon\n     * \n     * @returns {string}\n     */\n    toString = () => {\n        return 'Polygon {points: [' +\n            this._coords.points.map(function (item) {\n                return '[' + item.x + ', ' + item.y + ']'\n            }).join(', ') + ']}';\n    }\n\n    /**\n     * Returns html-string of area html element with params of this polygon\n     * \n     * @returns {string}\n     */\n    toHTMLMapElementString = () => {\n        let str = this._coords.points.map(function (item) {\n            return item.x + ', ' + item.y;\n        }).join(', ');\n\n        return '<area shape=\"poly\" coords=\"'\n            + str\n            + '\"'\n            + (this._attributes.id ? ' href=\"' + this._attributes.id + '\"' : '')\n            + (this._attributes.href ? ' href=\"' + this._attributes.href + '\"' : '')\n            + (this._attributes.alt ? ' alt=\"' + this._attributes.alt + '\"' : '')\n            + (this._attributes.title ? ' title=\"' + this._attributes.title + '\"' : '')\n            + ' />';\n    };\n\n    /**\n     * Returns coords for area attributes form\n     * \n     * @returns {Object} - coordinates of point\n     */\n    getCoordsForDisplayingInfo = () => {\n        return {\n            x: this._coords.points[0].x,\n            y: this._coords.points[0].y\n        };\n    };\n\n    /**\n     * Returns true if coords is valid for polygons and false otherwise\n     *\n     * @static\n     * @param coords {Object} - object with coords for new polygon\n     * @returns {boolean}\n     */\n    testCoords = (coords) => {\n        return coords.points.length >= 3;\n    };\n\n    /**\n     * Returns true if html coords array is valid for polygons and false otherwise\n     *\n     * @static\n     * @param coords {Array} - coords for new polygon as array [x1, y1, x2, y2, x3, y3, ...]\n     * @returns {boolean}\n     */\n    testHTMLCoords = (coords) => {\n        return coords.length >= 6 && coords.length % 2 === 0;\n    };\n\n    /**\n     * Returns polygon coords object from html array\n     * \n     * @param htmlCoordsArray {Array}\n     * @returns {Object} - object with calculated points\n     */\n    getCoordsFromHTMLArray = (htmlCoordsArray) => {\n        if (!testHTMLCoords(htmlCoordsArray)) {\n            throw new Error('This html-coordinates is not valid for polygon');\n        }\n\n        let points = [];\n        for (let i = 0, c = htmlCoordsArray.length / 2; i < c; i++) {\n            points.push({\n                x: htmlCoordsArray[2 * i],\n                y: htmlCoordsArray[2 * i + 1]\n            });\n        }\n\n        return {\n            points: points\n        };\n    };\n\n    /**\n     * Returns coords of new point with right angle (or 45 deg) for last line\n     * This method recalculates coordinates of new point for \n     * last line with (0 | 45 | 90 | 135 | 180 | 225 | 270 | 315) deg\n     * For example,\n     * for (0 < deg < 23) -> 0 deg\n     * for (23 < deg < 67) -> 45 deg\n     * for (67 < deg < 90) -> 90 deg etc.\n     * \n     *         0\n     *    315\\ | /45\n     *        \\|/\n     * 270 --------- 90\n     *        /|\\\n     *    225/ | \\135\n     *        180\n     * \n     * @static\n     * @param originalCoords {Object} - Coordinates of this area (without new point)\n     * @param newPointCoords {Object} - Coordinates of new point\n     * @returns {Object} - Right coordinates for last point\n     */\n    getRightAngleLineLastPointCoords = (originalCoords, newPointCoords) => {\n        let TANGENS = {\n            DEG_22: 0.414,\n            DEG_67: 2.414\n        },\n            lastPointIndex = originalCoords.points.length - 1,\n            lastPoint = originalCoords.points[lastPointIndex],\n            dx = newPointCoords.x - lastPoint.x,\n            dy = -(newPointCoords.y - lastPoint.y),\n            tan = dy / dx,\n            x = newPointCoords.x,\n            y = newPointCoords.y;\n\n        if (dx > 0 && dy > 0) {\n            if (tan > TANGENS.DEG_67) {\n                x = lastPoint.x;\n            } else if (tan < TANGENS.DEG_22) {\n                y = lastPoint.y;\n            } else {\n                Math.abs(dx) > Math.abs(dy) ?\n                    (x = lastPoint.x + dy) : (y = lastPoint.y - dx);\n            }\n        } else if (dx < 0 && dy > 0) {\n            if (tan < -TANGENS.DEG_67) {\n                x = lastPoint.x;\n            } else if (tan > -TANGENS.DEG_22) {\n                y = lastPoint.y;\n            } else {\n                Math.abs(dx) > Math.abs(dy) ?\n                    (x = lastPoint.x - dy) : (y = lastPoint.y + dx);\n            }\n        } else if (dx < 0 && dy < 0) {\n            if (tan > TANGENS.DEG_67) {\n                x = lastPoint.x;\n            } else if (tan < TANGENS.DEG_22) {\n                y = lastPoint.y;\n            } else {\n                Math.abs(dx) > Math.abs(dy) ?\n                    (x = lastPoint.x + dy) : (y = lastPoint.y - dx);\n            }\n        } else if (dx > 0 && dy < 0) {\n            if (tan < -TANGENS.DEG_67) {\n                x = lastPoint.x;\n            } else if (tan > -TANGENS.DEG_22) {\n                y = lastPoint.y;\n            } else {\n                Math.abs(dx) > Math.abs(dy) ?\n                    (x = lastPoint.x - dy) : (y = lastPoint.y + dx);\n            }\n        }\n\n        return {\n            x: x,\n            y: y\n        };\n    };\n   \n    /**\n     * Returns copy of original polygon, selected and moved by (10,10) from it\n     * \n     * @param originalArea {Area}\n     * @returns {Area} - a copy of original area\n     */\n    copy = (areasIO, originalArea) => {\n\n        let app = this.app;\n        let res = JSON.parse(areasIO.toJSON());\n        app.foreach(res.areas, function(areaParams) { \n            if(areaParams.attributes.id==originalArea._attributes.id){\n\n                let coords = areaParams.coords;\n                app.foreach(areaParams.coords.points, function(point, i) {      \n                    coords.points[i].x+=10; // slightly offset new zone instance to prevent overlap\n                    coords.points[i].y+=10;\n                });\n\n                areaParams.coords = coords;\n                areaParams.attributes.id = Area.genID(6);\n\n                return Area.fromJSON(app, areaParams);\n            }\n        }); \n    };\n\n    /**\n     * Get central point of the Polygon\n     * \n     * @param points {Array} - array of objects with all Polygon points\n     * @return coord {Object} - center X Y points\n     */\n    getCenterPoint = (points) => {\n\n        let xMin, xMax, yMin, yMax;\n        let yM, xM;\n        points.map((p) => {\n\n            if(xMin === undefined) xMin = p.x;\n            if(xMax === undefined) xMax = p.x;\n            if(yMin === undefined) yMin = p.y;\n            if(yMax === undefined) yMax = p.y;\n\n            if(p.x > xMax) xMax = p.x;\n            if(p.x < xMin) xMin = p.x;\n            if(p.y > yMax) yMax = p.y;\n            if(p.y < yMin) yMin = p.y;\n        });\n\n        xM = (xMax + xMin) / 2; \n        yM = (yMax + yMin) / 2; \n\n        return {x: xM, y: yM};\n    }\n\n    /**\n     * Rotates zone according to provided angle.\n     * More about methods https://www.npmjs.com/package/transformation-matrix#rotate\n     * \n     * @param area {Object} - zone object instance\n     * @param angle {number} - angle degree for rotation\n     * @return area {Object} - rotated area containing new coordinates\n     */\n    rotate = (area, angle) => {\n\n        // find center point before rotation\n        let cp = this.getCenterPoint(area._coords.points);\n\n        // do polygon rotation config\n        let matrixAngle = compose(rotateDEG(angle)); // translate(-cp.x,-cp.y),\n\n        // do transformation \n        let rotatedZonePoints = applyToPoints(matrixAngle, area._coords.points);\n\n        // find center point after rotation\n        let cpa = this.getCenterPoint(rotatedZonePoints);\n\n        // polygon is transformed around X 0, Y 0 point, fix rotation offset that results from default rotation\n        let matrixMove = compose(translate(cp.x-cpa.x, cp.y-cpa.y));\n        rotatedZonePoints = applyToPoints(matrixMove, rotatedZonePoints);\n\n        // rotate seats to match polygon rotation\n        console.log(area._seats.points);\n        if ( typeof(area._seats) !== 'undefined' && typeof(area._seats.points) !== 'undefined' ){\n\n            try{\n\n                let rotatedSeatPoints = applyToPoints(matrixAngle, area._seats.points);\n                area._seats.points = rotatedSeatPoints;\n\n                area._coords.points = rotatedZonePoints;\n                this.redraw();\n                \n            }catch(e){\n\n                let toast = new bootstrap.Toast(document.querySelector('.toast'));\n                document.querySelector('.toast .toast-body').innerHTML = 'Please allocate all seats inside this zone to make rotation.';  \n                toast.show();\n            }\n        }else{\n\n            area._coords.points = rotatedZonePoints;\n            this.redraw();\n        }\n        \n        return area;\n    }\n\n    /**\n     * Creates new polygon and add drawing handlers for DOM-elements\n     *\n     * @static\n     * @param firstPointCoords {Object} - coords for first point of polyline\n     * @returns {Polygon} - created polygon\n     */\n    static createAndStartDrawing = (app, firstPointCoords) => {\n\n        let params = {\n            title: '',\n            points: [firstPointCoords],\n            isOpened: true\n        }\n\n        let polygon = new Polygon(app, params); \n\n        app.addEvent(app.domElements.container, 'mousemove', polygon.onProcessDrawing.bind(polygon))\n            .addEvent(app.domElements.container, 'click', polygon.onAddPointDrawing.bind(polygon))\n            .addEvent(document, 'keydown', polygon.onStopDrawing.bind(polygon))\n            .addEvent(polygon._helpers.points[0]._el, 'click', polygon.onStopDrawing.bind(polygon));\n\n        return polygon;\n    };\n}","import { Area } from './area.js';\nimport { Helper } from '../helpers/helper.js';\n\n/**\n * The constructor for circles\n *\n *     ------\n *  /         \\\n * |  (x, y)<->| radius\n *  \\         /\n *    ------\n *\n * @constructor\n * @param coords {Object} - object with parameters of new area (cx, cy, radius) if some parameter is undefined, it will set 0\n * @param attributes {Object} [attributes=undefined] - attributes for area (e.g. href, title) \n */\nexport class Circle extends Area{\n\n    constructor(app, coords, seats, attributes) {\n\n        super('circle', app, coords, seats, attributes);\n\n        this.app = app;\n\n        /**\n         * @namespace\n         * @property {number} cx - Distance from the left edge of the image to the center of the circle\n         * @property {number} cy - Distance from the top edge of the image to the center of the circle\n         * @property {number} radius - Radius of the circle\n         */\n        this._coords = {\n            cx: coords.cx || 0,\n            cy: coords.cy || 0,\n            radius: coords.radius || 0\n        };\n\n        if (typeof (seats) === 'undefined') {\n            seats = [];\n        }\n\n        this._el = document.createElementNS(Area.SVG_NS, 'circle');\n        this._groupEl.appendChild(this._el);\n\n        this.helpers = {\n            center: new Helper(this._groupEl, coords.cx, coords.cy, 'move'),\n            top: new Helper(this._groupEl, coords.cx, coords.cy, 'editTop'),\n            bottom: new Helper(this._groupEl, coords.cx, coords.cy, 'editBottom'),\n            left: new Helper(this._groupEl, coords.cx, coords.cy, 'editLeft'),\n            right: new Helper(this._groupEl, coords.cx, coords.cy, 'editRight')\n        };\n\n        this.redraw();\n    }\n\n    // utils.inherits(Circle, Area);\n\n    /**\n     * Set attributes for svg-elements of area by new parameters\n     * \n     * @param coords {Object} - Object with coords of this area (cx, cy, radius)\n     * @returns {Circle} - this area\n     */\n    setSVGCoords = function (coords) {\n        this._el.setAttribute('cx', coords.cx);\n        this._el.setAttribute('cy', coords.cy);\n        this._el.setAttribute('r', coords.radius);\n        this._el.setAttribute('p', '');\n\n        this.helpers.center.setCoords(coords.cx, coords.cy);\n        this.helpers.top.setCoords(coords.cx, coords.cy - coords.radius);\n        this.helpers.right.setCoords(coords.cx + coords.radius, coords.cy);\n        this.helpers.bottom.setCoords(coords.cx, coords.cy + coords.radius);\n        this.helpers.left.setCoords(coords.cx - coords.radius, coords.cy);\n\n        return this;\n    };\n\n    /**\n     * Set coords for this area\n     * \n     * @param coords {Object} - coordinates for thia area\n     * @returns {Circle} - this area\n     */\n    setCoords = function (coords) {\n        this._coords.cx = coords.cx;\n        this._coords.cy = coords.cy;\n        this._coords.radius = coords.radius;\n\n        return this;\n    };\n\n    /**\n     * Calculates new coordinates in process of drawing\n     * (for circle normalizeCoords() don't needed because \n     * radius are always positive)\n     * \n     * @param x {number} - x-coordinate\n     * @param y {number} - y-coordinate\n     * @returns {Object} - calculated coordinates\n     */\n    dynamicDraw = function (x, y) {\n        let radius = Math.round(\n            Math.sqrt(\n                Math.pow(this._coords.cx - x, 2) +\n                Math.pow(this._coords.cy - y, 2)\n            )\n        ),\n            newCoords = {\n                cx: this._coords.cx,\n                cy: this._coords.cy,\n                radius: radius\n            };\n\n        this.redraw(newCoords);\n\n        return newCoords;\n    };      \n\n    /**\n     * Handler for drawing process (by mousemove)\n     * It includes only redrawing area by new coords \n     * (this coords doesn't save as own area coords)\n     * \n     * @params e {MouseEvent} - mousemove event\n     */\n    onProcessDrawing = function (e) {\n        let coords = utils.getRightCoords(e.pageX, e.pageY);\n\n        this.dynamicDraw(coords.x, coords.y);\n    };\n\n    /**\n     * Handler for drawing stoping (by second click)\n     * It includes redrawing area by new coords \n     * and saving this coords as own area coords\n     * \n     * @params e {MouseEvent} - click event\n     */\n    onStopDrawing = function (e) {\n        let coords = utils.getRightCoords(e.pageX, e.pageY);\n\n        this.setCoords(this.dynamicDraw(coords.x, coords.y)).deselect();\n\n        app.removeAllEvents()\n            .setIsDraw(false)\n            .resetNewArea();\n    };\n\n    /**\n     * Changes area parameters by editing type and offsets\n     * \n     * @param {string} editingType - A type of editing\n     * @returns {Object} - Object with changed parameters of area \n     */\n    edit = function (editingType, dx, dy) {\n        let tempParams = Object.create(this._coords);\n\n        switch (editingType) {\n            case 'move':\n                tempParams.cx += dx;\n                tempParams.cy += dy;\n                break;\n\n            case 'editTop':\n                tempParams.radius -= dy;\n                break;\n\n            case 'editBottom':\n                tempParams.radius += dy;\n                break;\n\n            case 'editLeft':\n                tempParams.radius -= dx;\n                break;\n\n            case 'editRight':\n                tempParams.radius += dx;\n                break;\n        }\n\n        return tempParams;\n    };\n\n    /**\n     * Calculates new coordinates in process of editing\n     * \n     * @param tempCoords {Object} - area coords \n     * @returns {Object} - calculated coordinates\n     */\n    dynamicEdit = function (tempCoords) {\n        if (tempCoords.radius < 0) {\n            tempCoords.radius = Math.abs(tempCoords.radius);\n        }\n\n        this.setSVGCoords(tempCoords);\n\n        return tempCoords;\n    };\n\n    /**\n     * Handler for editing process (by mousemove)\n     * It includes only redrawing area by new coords \n     * (this coords doesn't save as own area coords)\n     * \n     * @params e {MouseEvent} - mousemove event\n     */\n    onProcessEditing = function (e) {\n        let editType = app.getEditType();\n\n        return this.dynamicEdit(\n            this.edit(editType, e.pageX - this.editingStartPoint.x, e.pageY - this.editingStartPoint.y)\n        );\n    };\n\n    /**\n     * Handler for editing stoping (by mouseup)\n     * It includes redrawing area by new coords \n     * and saving this coords as own area coords\n     * \n     * @params e {MouseEvent} - mouseup event\n     */\n    onStopEditing = function (e) {\n        let editType = app.getEditType();\n\n        this.setCoords(this.onProcessEditing(e));\n\n        app.removeAllEvents();\n    };\n\n    /**\n     * Returns string-representation of circle\n     * \n     * @returns {string}\n     */\n    toString = function () {\n        return 'Circle {cx: ' + this._coords.cx +\n            ', cy: ' + this._coords.cy +\n            ', radius: ' + this._coords.radius + '}';\n    }\n\n    /**\n     * Returns html-string of area html element with params of this circle\n     * \n     * @returns {string}\n     */\n    toHTMLMapElementString = function () {\n        return '<area shape=\"circle\" coords=\"'\n            + this._coords.cx + ', '\n            + this._coords.cy + ', '\n            + this._coords.radius\n            + '\"'\n            + (this._attributes.id ? ' href=\"' + this._attributes.id + '\"' : '')\n            + (this._attributes.href ? ' href=\"' + this._attributes.href + '\"' : '')\n            + (this._attributes.alt ? ' alt=\"' + this._attributes.alt + '\"' : '')\n            + (this._attributes.title ? ' title=\"' + this._attributes.title + '\"' : '')\n            + ' />';\n    };\n\n    /**\n     * Returns coords for area attributes form\n     * \n     * @returns {Object} - coordinates of point\n     */\n    getCoordsForDisplayingInfo = function () {\n        return {\n            x: this._coords.cx,\n            y: this._coords.cy\n        };\n    };\n\n    /**\n     * Returns true if coords is valid for circles and false otherwise\n     *\n     * @static\n     * @param coords {Object} - object width coords for new circle\n     * @return {boolean}\n     */\n    testCoords = function (coords) {\n        return coords.cx && coords.cy && coords.radius;\n    };\n\n    /**\n     * Returns true if html coords array is valid for circles and false otherwise\n     *\n     * @static\n     * @param coords {Array} - coords for new circle as array\n     * @return {boolean}\n     */\n    testHTMLCoords = function (coords) {\n        return coords.length === 3;\n    };\n\n    /**\n     * Returns circle coords object from html array\n     * \n     * @param htmlCoordsArray {Array}\n     * @returns {Object}\n     */\n    getCoordsFromHTMLArray = function (htmlCoordsArray) {\n        if (!this.testHTMLCoords(htmlCoordsArray)) {\n            throw new Error('This html-coordinates is not valid for circle');\n        }\n\n        return {\n            cx: htmlCoordsArray[0],\n            cy: htmlCoordsArray[1],\n            radius: htmlCoordsArray[2]\n        };\n    };\n\n    /**\n     * Creates new circle and adds drawing handlers for DOM-elements\n     *\n     * @static\n     * @param firstPointCoords {Object} \n     * @returns {Circle}\n     */\n    createAndStartDrawing = function (firstPointCoords) {\n        let newArea = new Circle({\n            cx: firstPointCoords.x,\n            cy: firstPointCoords.y,\n            radius: 0\n        });\n\n        app.addEvent(app.domElements.container, 'mousemove', newArea.onProcessDrawing.bind(newArea))\n            .addEvent(app.domElements.container, 'click', newArea.onStopDrawing.bind(newArea));\n\n        return newArea;\n    };\n}","/**\n * Set of public helper methods used by mapping.js or geometry classes\n */\n\nexport class Stats{\n\n    constructor(el, areas, cfs) {\n\n        this._el = el;\n        this._areas = areas;\n        this._cfs = cfs;\n\n        // console.log(cfs);\n    }\n\n    /**\n     * Preview general statistics about the layout including number of assigned seats per each zone\n     *\n     * @param node {Object} - html element\n     * @returns {Object} - object with offsets, e.g. {x: 100, y: 200}\n     */\n    drawStats = function() {\n\n        let areas = this._areas;\n        let html = `<table class=\"table\" style=\"width:100%;min-width:700px;\">`;\n            html += `<tr><th></th><th>Zone</th>`;\n                        \n            // custom field headers\n            this._cfs.map((cf) => { html += `<th>${cf.label}</th>`; });\n\n            html += `<th>Seat Count</th></tr>`;\n\n        let count = { seatsPerZone: 0, totalZones: 0, totalSeats: 0, totalTws: 0, i: 1 };\n        let colspan = 3 + this._cfs.length;\n        for( let a in areas ){\n\n            count.seatsPerZone = 0;\n            if ( typeof( areas[a]._seats ) !== 'undefined' ){\n                for ( let p in areas[a]._seats.points ){\n\n                    if( areas[a]._seats.points[p] != null )\n                        if( areas[a]._seats.points[p].i == true ){\n                            count.seatsPerZone += 1;\n                        }\n                }\n                let tws = areas[a]._seats.tws ? parseInt(areas[a]._seats.tws) : 0;\n                let title = areas[a]._seats.title ? areas[a]._seats.title : '';\n                count.totalZones += 1;\n                count.totalSeats += count.seatsPerZone;\n                count.totalTws += tws;\n                html += '<tr><td>'+count.i+'</td><td>'+title+'</td>';\n                this._cfs.map((cf) => { html += `<td>${ areas[a]._seats[cf.id] ? areas[a]._seats[cf.id]:''  }</td>`; });\n                html += '<td>'+count.seatsPerZone+'/'+tws+'</td></tr>';\n\n            }else{\n\n                html += '<tr><td colspan=\"'+colspan+'\">'+count.i+'</td></tr>';\n            }\n            count.i++;\n        }\n\n        html += '<tr><td colspan=\"'+colspan+'\">Total zones: '+count.totalZones+'</td></tr>';\n        html += '<tr><td colspan=\"'+colspan+'\">Total seats in all zones: '+count.totalTws+'</td></tr>';\n        html += '<tr><td colspan=\"'+colspan+'\">Total seats available for booking: '+count.totalSeats+'</td></tr>';\n\n        html += '</table>'; \n        this._el.setAttribute('style', 'overflow-x: scroll;');\n        this._el.innerHTML = html;\n    };\n\n    /**\n     * Structure final row of the layout\n     *\n     * @param node {Object} - data\n     * @returns {Object} - object with offsets, e.g. {x: 100, y: 200}\n     */\n    structRow = function(data) {\n\n\n    };\n};","import { showLoader, hideLoader } from \"./_ui.js\"\nimport { Rectangle } from './geometry/rectangle.js';\nimport { Polygon } from './geometry/polygon.js';\nimport { Circle } from './geometry/circle.js';\nimport { Stats } from './helpers/stats.js';\n\n// import './nouislider.js';\n\nexport const initMapping = () => {\n    'use strict';\n\n    /* Utilities */\n    let utils = {\n        \n        SVG_NS: 'http://www.w3.org/2000/svg',\n        CLASS_NAMES: {\n            SELECTED : 'selected',\n            WITH_HREF : 'with_href'\n        },\n        /**\n         * Returns offset from html page top-left corner for some element\n         *\n         * @param node {HTMLElement} - html element\n         * @returns {Object} - object with offsets, e.g. {x: 100, y: 200}\n         */\n        getOffset: function (node) {\n            let boxCoords = node.getBoundingClientRect();\n\n            return {\n                x: Math.round(boxCoords.left + window.pageXOffset),\n                y: Math.round(boxCoords.top + window.pageYOffset)\n            };\n        },\n\n        /**\n         * Returns correct coordinates (incl. offsets)\n         *\n         * @param x {number} - x-coordinate\n         * @param y {number} - y-coordinate\n         * @returns {Object} - object with recalculated coordinates, e.g. {x: 100, y: 200}\n         */\n        getRightCoords: function (x, y) {\n            return {\n                x: x - app.getOffset('x'),\n                y: y - app.getOffset('y')\n            };\n        },\n\n        /**\n         * TODO: will use same method of app.js\n         * @deprecated\n         */\n        id: function (str) {\n            return document.getElementById(str);\n        },\n\n        /**\n         * TODO: will use same method of app.js\n         * @deprecated\n         */\n        hide: function (node) {\n            node.style.display = 'none';\n\n            return this;\n        },\n\n        /**\n         * TODO: will use same method of app.js\n         * @deprecated\n         */\n        show: function (node) {\n            node.style.display = 'block';\n\n            return this;\n        },\n\n        /**\n         * Escape < and > (for code output)\n         *\n         * @param str {string} - a string with < and >\n         * @returns {string} - a string with escaped < and >\n         */\n        encode: function (str) {\n            return str.replace(/</g, '&lt;').replace(/>/g, '&gt;');\n        },\n\n        /**\n         * TODO: will use same method of app.js\n         * @deprecated\n         */\n        foreach: function (arr, func) {\n            for (let i = 0, count = arr.length; i < count; i++) {\n                func(arr[i], i);\n            }\n        },\n\n        /**\n         * TODO: will use same method of app.js\n         * @deprecated\n         */\n        foreachReverse: function (arr, func) {\n            for (let i = arr.length - 1; i >= 0; i--) {\n                func(arr[i], i);\n            }\n        },\n\n        /**\n         * Display debug info to some block\n         */\n        debug: (function () {\n            let output = document.getElementById('debug');\n\n            return function () {\n                output.innerHTML = [].join.call(arguments, ' ');\n            };\n        })(),\n\n        /**\n         * TODO: will use same method of app.js\n         * @deprecated\n         */\n        stopEvent: function (e) {\n            e.stopPropagation();\n            e.preventDefault();\n\n            return this;\n        },\n\n        /**\n        * Get url params\n        */\n        getUrlParameter: function (sParam) {\n            let sPageURL = window.location.search.substring(1),\n                sURLVariables = sPageURL.split('&'),\n                sParameterName,\n                i;\n\n            for (i = 0; i < sURLVariables.length; i++) {\n                sParameterName = sURLVariables[i].split('=');\n\n                if (sParameterName[0] === sParam) {\n                    return sParameterName[1] === undefined ? true : decodeURIComponent(sParameterName[1]);\n                }\n            }\n        },\n\n        /**\n         * Get cookie from current domain or subdomain by its name\n         * @param {String} cname - cookie name\n         */\n        getCookie: function (cname) {\n            let name = cname + \"=\";\n            let decodedCookie = decodeURIComponent(document.cookie);\n            let ca = decodedCookie.split(';');\n            for (let i = 0; i < ca.length; i++) {\n                let c = ca[i];\n                while (c.charAt(0) == ' ') {\n                    c = c.substring(1);\n                }\n                if (c.indexOf(name) == 0) {\n                    return unescape(c.substring(name.length, c.length));\n                }\n            }\n            return \"\";\n        },\n\n        /**\n         * TODO: will use same method of app.js\n         * @deprecated\n         */\n        extend: function (obj, options) {\n\n            let target = {};\n            for (let name in obj) {\n                if (obj.hasOwnProperty(name)) {\n                    target[name] = options[name] ? options[name] : obj[name];\n                }\n            }\n\n            return target;\n        },\n\n        genID: function (len) {\n\n            let text = \"\";\n            let possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n\n            for (let i = 0; i < len; i++)\n                text += possible.charAt(Math.floor(Math.random() * possible.length));\n\n            return text;\n        },\n\n        inherits: (function () {\n            let F = function () { };\n\n            return function (Child, Parent) {\n                F.prototype = Parent.prototype;\n                Child.prototype = new F();\n                Child.prototype.constructor = Child;\n            };\n        })()\n    };\n\n    /* Main module - will be main module in app.js-based application */\n    let app = (function () {\n        let domElements = {\n            wrapper: utils.id('wrapper'),\n            svg: utils.id('svg'),\n            img: utils.id('img'),\n            container: utils.id('image'),\n            seat_mapping: utils.id('svg_mapping_cont'),\n            map: null\n        },\n        state = {\n            CONSTRUCTORS: {\n                rectangle: Rectangle,\n                circle: Circle,\n                polygon: Polygon\n            },\n            // CLASS_NAMES: {\n            //     SELECTED : 'selected',\n            //     WITH_HREF : 'with_href'\n            // },\n            offset: {\n                x: 0,\n                y: 0\n            },\n            cp: {\n                x: 0,\n                y: 0\n            },\n            clickTime: new Date().getTime(),\n            svg_width: 0,\n            svg_height: 0,\n            max_times: 1,\n            appMode: null, // drawing || editing || preview\n            currentType: null,\n            editType: null,\n            newArea: null,\n            selectedArea: null,\n            mappingArea: null,\n            cfs: [],\n            pcfs: [],\n            cfs_listener: null,\n            areas: [],\n            events: [],\n            isDraw: false,\n            silent: false,\n            image: {\n                src: null,\n                filename: null,\n                width: 0,\n                height: 0\n            },\n            last_scroll: 0,\n            to: '',\n            moved: false,\n            mapping: false,\n            autoAssign: false,\n            autoAssignRT: [],\n            autoAlign: false,\n            autoAlignXY: [],\n            autoDraw: {\n                points: [],\n                count: \"\",\n                active: false\n            },\n            updateObjectSeatPointsHistory: [],\n            timer1: null,\n            timer2: null\n        },\n        KEYS = {\n            F1: 112,\n            ESC: 27,\n            TOP: 38,\n            BOTTOM: 40,\n            LEFT: 37,\n            RIGHT: 39,\n            DELETE: 46,\n            DEL_MAC: 8,\n            Q: 81,\n            A: 65,\n            D: 68,\n            H: 72,\n            I: 73,\n            S: 83,\n            C: 67,\n            O: 79,\n            P: 80,\n            J: 74,\n            U: 85,\n            Z: 90\n        };\n\n        function recalcOffsetValues() {\n            if (state.to) window.clearTimeout(state.to);\n            state.to = window.setTimeout(function () {\n                state.offset = utils.getOffset(domElements.container);\n                // console.log(\"recalcOffsetValues\");\n            }, 100);\n        }\n\n        /* Get offset value */\n        window.addEventListener('resize', recalcOffsetValues, false);\n        window.addEventListener('scroll', recalcOffsetValues, false);\n\n        /* Disable selection */\n        domElements.container.addEventListener('mousedown', function (e) { e.preventDefault(); }, false);\n        domElements.seat_mapping.addEventListener('mousedown', function (e) { e.preventDefault(); state.clickTime = new Date().getTime(); }, false);\n\n        /* Disable image dragging */\n        domElements.img.addEventListener('dragstart', function (e) {\n            e.preventDefault();\n        }, false);\n\n        /* Display cursor coordinates info */\n        let cursor_position_info = (function () {\n            let coords_info = utils.id('coords');\n\n            return {\n                set: function (coords) {\n                    coords_info.innerHTML = 'x: ' + coords.x + ', ' + 'y: ' + coords.y;\n                },\n                empty: function () {\n                    coords_info.innerHTML = '';\n                }\n            };\n        })();\n\n        domElements.container.addEventListener('mousemove', function (e) { cursor_position_info.set(utils.getRightCoords(e.pageX, e.pageY)); }, false);\n        domElements.seat_mapping.addEventListener('mousemove', function (e) {\n\n            let offset = $(\"#svg_mapping\").offset();\n\n            // start mouse move only after 1s\n            if (new Date().getTime() - state.clickTime < 400) { return; }\n\n            // let offset_seat = $(this).offset();\n            if (state.mapping) {\n\n                state.moved = true;\n                $(\"#cr\" + state.mappingArea).attr(\"cx\", e.pageX - offset.left);\n                $(\"#cr\" + state.mappingArea).attr(\"cy\", e.pageY - offset.top);\n                $(\"#tx\" + state.mappingArea).attr(\"x\", e.pageX - offset.left);\n                $(\"#tx\" + state.mappingArea).attr(\"y\", e.pageY - offset.top);\n            }\n        }, false);\n\n        domElements.seat_mapping.addEventListener('mouseup', function (e) {\n\n            if (e.target.tagName === 'circle' || e.target.tagName === 'text') {\n\n                $(\"#seat_notice\").fadeOut(0);\n                $(\"#seat_row,#seat_text,#seat_price\").fadeIn(100);\n\n                let currentZone = app.getSelectedArea();\n                let i = e.target.parentNode.dataset.index;\n\n                // console.log(\"mouseup: \" + i);\n\n                let offset = $(\"#svg_mapping\").offset(); // - offset.left  // - offset.top\n                let mousePos = app.getObjectSeatPoints(currentZone, i);\n                if (!mousePos)\n                    mousePos = { 'x': 0, 'y': 0, 'r': \"\", 't': \"\", 'p': \"\", i: false }\n\n                // dismis click events without move\n                if (state.moved) {\n\n                    mousePos.x = ((e.pageX - offset.left) - state.svg_width) / state.max_times;\n                    mousePos.y = ((e.pageY - offset.top) - state.svg_height) / state.max_times;\n\n                    $(\"#cr\" + state.mappingArea).attr(\"cx\", e.pageX - offset.left);\n                    $(\"#cr\" + state.mappingArea).attr(\"cy\", e.pageY - offset.top);\n                    $(\"#tx\" + state.mappingArea).attr(\"x\", e.pageX - offset.left);\n                    $(\"#tx\" + state.mappingArea).attr(\"y\", e.pageY - offset.top);\n\n                    app.updateObjectSeatPoints(currentZone, i, mousePos);\n\n                    // console.log(\"do saving\");\n                } else {\n                    // console.log(\"skip saving\");\n                }\n\n                $(\"#seat_text_in\").val($(\"#tx\" + i).html()).data(\"index\", i);\n                if (mousePos.p) {\n                    $(\"#seat_price_in\").val(mousePos.p);\n                } else {\n                    $(\"#seat_price_in\").val(app.getObjectSeats(app.getSelectedArea(), \"price\"));\n                }\n\n                if (mousePos.r) {\n                    $(\"#seat_row_in\").val(mousePos.r);\n                } else {\n                    $(\"#seat_row_in\").val(app.getObjectSeats(app.getSelectedArea(), \"title\"));\n                }\n\n                // state.mappingArea = null;      \n                state.moved = false;\n                state.mapping = false;\n            }\n\n            // empty space click\n            if (e.target.tagName !== 'circle' && e.target.tagName !== 'text' && e.target.tagName !== 'g') {\n\n                // drawing mode\n                if (state.autoDraw.active) {\n\n                    let offset = $(\"#svg_mapping\").offset();\n                    let mousePos = {};\n                    // mousePos.x = ((e.pageX - offset.left) - state.svg_width) / state.max_times;\n                    // mousePos.y = ((e.pageY - offset.top) - state.svg_height) / state.max_times;\n\n                    state.autoDraw.points.push({ x: e.pageX - offset.left, y: e.pageY - offset.top });\n                    if (state.autoDraw.points.length == 2) {\n\n                        // alert(\"drawing\" + state.autoDraw.count);\n                        // console.log(state.autoDraw.points);\n                        let x = state.autoDraw.points[1].x - state.autoDraw.points[0].x;\n                        let y = (state.autoDraw.points[1].y > state.autoDraw.points[0].y) ? (state.autoDraw.points[1].y - state.autoDraw.points[0].y) : (state.autoDraw.points[0].y - state.autoDraw.points[1].y);\n                        let c = Math.sqrt(x * x + y * y);\n                        let alpha = Math.atan(y / x);\n                        console.log(\" x = \" + x + \" y = \" + y + \" c = \" + c);\n\n                        let interval = c / (parseInt(state.autoDraw.count) - 1);\n                        let ci = interval;\n                        let i = 0, index;\n                        let newX = state.autoDraw.points[0].x, newY = state.autoDraw.points[0].y;\n                        while (i < parseInt(state.autoDraw.count)) {\n\n                            console.log(\"new while\");\n\n                            // get first free points that are located outside zone poligon in the top left corner\n                            for(let el of document.querySelectorAll(\".cr\")){\n\n                                let dataInside = el.getAttribute(\"data-inside\") === undefined ? \"true\" : el.getAttribute(\"data-inside\");\n                                let inside = JSON.parse(dataInside);\n                                // let cx = parseInt(el.getAttribute(\"cx\"));\n                                // let cy = parseInt(el.getAttribute(\"cy\"));\n                                index = parseInt(el.getAttribute(\"data-index\"));\n                                \n                                if (!inside) {\n\n                                    document.querySelector(\"#cr\" + index).setAttribute(\"cx\", newX);\n                                    document.querySelector(\"#cr\" + index).setAttribute(\"cy\", newY);\n                                    document.querySelector(\"#tx\" + index).setAttribute(\"x\", newX);\n                                    document.querySelector(\"#tx\" + index).setAttribute(\"y\", newY);\n\n                                    document.querySelector(\"#cr\" + index).setAttribute(\"data-inside\", inside);\n                                    document.querySelector(\"#tx\" + index).setAttribute(\"data-inside\", inside);\n                                    // el.dataset.inside = true;\n\n                                    console.log(index + \" \" + inside + \" newX: \" + newX + \" newY: \" + newY);\n                                    break;\n                                }\n                            };\n\n                            if (index === undefined) return;\n\n                            // save changes\n                            state.mappingArea = index;\n                            // let cr = $(\"#cr\"+state.mappingArea); cr.addClass(\"align\");\n                            let currentZone = app.getSelectedArea();\n                            let mousePos = app.getObjectSeatPoints(currentZone, state.mappingArea);\n                            if (!mousePos) mousePos = { 'x': 0, 'y': 0, 'r': \"\", 't': \"\", 'p': \"\", 'i': false };\n                            mousePos.x = (newX - state.svg_width) / state.max_times;\n                            mousePos.y = (newY - state.svg_height) / state.max_times;\n                            app.updateObjectSeatPoints(currentZone, state.mappingArea, mousePos); \n\n                            // find next point\n                            let xTemp = ci * Math.cos(alpha);\n                            let yTemp = Math.sqrt(ci * ci - xTemp * xTemp);\n                            newX = state.autoDraw.points[0].x + xTemp;\n                            if (state.autoDraw.points[1].y > state.autoDraw.points[0].y) { newY = state.autoDraw.points[0].y + yTemp; } else { newY = state.autoDraw.points[0].y - yTemp; }\n\n                            // iterate\n                            i++;\n                            ci += interval;\n                        }\n\n                        // stop drawing mode\n                        state.mapping = false;\n                        state.autoDraw.active = false;\n                        state.autoDraw.count = \"\";\n                        state.autoDraw.points = [];\n                    }\n                }\n            }\n\n        }, false);\n\n        domElements.container.addEventListener('mouseleave', function () { cursor_position_info.empty(); }, false);\n        domElements.seat_mapping.addEventListener('mouseleave', function () { cursor_position_info.empty(); }, false);\n\n        /* Add mouseover hover event */\n        function onSvgMouseover(e) {\n\n            if (e.target.parentNode.tagName === 'g' && state.autoAssign) {\n\n                state.mappingArea = e.target.dataset.index;\n                if (state.mappingArea === undefined) return;\n                if (state.mappingAreaPrev == state.mappingArea) return;\n                if (state.mappingAreaPrev === undefined) state.mappingAreaPrev = state.mappingArea;\n\n                let cr = $(\"#cr\" + state.mappingArea);\n                let tr = $(\"#tx\" + state.mappingAreaPrev);\n                cr.addClass(\"assign\");\n\n                let currentZone = app.getSelectedArea();\n                let mousePos = app.getObjectSeatPoints(currentZone, state.mappingArea);\n                if (!mousePos) mousePos = { 'x': 0, 'y': 0, 'r': '', 't': '', 'p': '', i: false }\n                if (state.autoAssignRT.length > 0) {\n                    mousePos.r = state.autoAssignRT[0].r;\n                    mousePos.t = state.autoAssignRT[0].t;\n                    mousePos.p = state.autoAssignRT[0].p;\n                }\n\n                // console.log(tr.html());\n                if (mousePos.t == null) mousePos.t = tr.html();\n                let seatNumber = parseInt(mousePos.t) + 1;\n                $(\"#tx\" + state.mappingArea).html(parseInt(mousePos.t));\n\n                state.autoAssignRT = []; \n                state.autoAssignRT.push({ r: mousePos.r, t: seatNumber , p: mousePos.p });\n                \n                app.updateObjectSeatPoints(currentZone, state.mappingArea, mousePos);\n\n                state.mappingAreaPrev = state.mappingArea;\n\n                if (state.timer1) clearTimeout(state.timer1);\n                state.timer1 = setTimeout(function () { $(\".cr\").removeClass(\"assign\"); state.autoAssign = false; state.autoAssignRT = []; }, 2000);\n            }\n        }\n\n        /* Add mousedown event for svg */\n        function onSvgMousedown(e) {\n\n            if (state.appMode === 'editing') {\n                if (e.target.parentNode.tagName === 'g') {\n\n                    info.unload();\n                    state.selectedArea = e.target.parentNode.obj;\n                    app.deselectAll();\n                    state.selectedArea.select();\n\n                    state.selectedArea.editingStartPoint = {\n                        x: e.pageX,\n                        y: e.pageY\n                    };\n\n                    if (e.target.classList.contains('helper')) {\n                        let helper = e.target;\n                        state.editType = helper.action;\n\n                        if (helper.n >= 0) { // if typeof selected_area == polygon\n                            state.selectedArea.selected_point = helper.n;\n                        }\n\n                        app.addEvent(app.domElements.container, 'mousemove', state.selectedArea.onProcessEditing.bind(state.selectedArea))\n                            .addEvent(app.domElements.container, 'mouseup', state.selectedArea.onStopEditing.bind(state.selectedArea));\n                    } else if (e.target.tagName === 'rect' || e.target.tagName === 'circle' || e.target.tagName === 'polygon') {\n                        state.editType = 'move';\n                        app.addEvent(app.domElements.container, 'mousemove', state.selectedArea.onProcessEditing.bind(state.selectedArea))\n                            .addEvent(app.domElements.container, 'mouseup', state.selectedArea.onStopEditing.bind(state.selectedArea));\n                    }\n                } else {\n                    app.deselectAll();\n                    info.unload();\n                }\n            } else if (state.appMode === 'seating') {\n\n                if (e.target.parentNode.tagName === 'g') {\n\n                    info.unload();\n                    state.selectedArea = e.target.parentNode.obj;\n\n                    app.deselectAll();\n                    state.selectedArea.select();\n                    state.selectedArea.editingStartPoint = {\n                        x: e.pageX,\n                        y: e.pageY\n                    };\n\n                    // kenzap_seat_map popup bind values \n                    let pid = e.target.parentNode.dataset.id;\n                    $(\"#kenzap_seat_map\").attr('data-id', pid);\n                    $(\"#zone_title\").val(app.getObjectSeats(app.getSelectedArea(), \"title\"));\n                    $(\"#zone_tws\").val(app.getObjectSeats(app.getSelectedArea(), \"tws\"));\n                    $(\"#zone_tns\").val(app.getObjectSeats(app.getSelectedArea(), \"tns\"));\n                    $(\"#zone_price\").val(app.getObjectSeats(app.getSelectedArea(), \"price\"));\n\n                    // background image\n                    $(\"#zone_bgi\").val(\"\");\n                    $(\"#zone_bg\").attr(\"src\", \"https://cdn.kenzap.com/loading.png\");\n                    $(\".remove\").css(\"display\", \"none\");\n                    let bg = app.getObjectSeats(app.getSelectedArea(), \"bg\");\n                    if (bg === undefined) bg = \"\";\n                    if (bg.length > 12) {\n                        $(\"#zone_bgi\").val(bg);\n                        $(\"#zone_bg\").attr(\"src\", bg);\n                        $(\".remove\").css(\"display\", \"inline-block\");\n                        $(\".remove\").off();\n                        $(\".remove\").on('click', function () {\n\n                            let c = confirm(\"Remove background image?\");\n                            if (!c) return;\n\n                            $(\"#loader\").fadeIn(\"fast\");\n                            let fd = new FormData();\n                            let id = utils.getUrlParameter('id') + \"-\" + pid;\n                            fd.append('id', id);\n                            fd.append('cmd', 'remove_image');\n                            fd.append('type', 'myticket');\n                            fd.append('token', utils.getCookie('kenzap_token'));\n                            $.ajax({\n                                url: 'https://fileapi.kenzap.com/v1/', // backend.php\n                                cmd: 'remove_image',\n                                type: 'post',\n                                data: fd,\n                                contentType: false,\n                                processData: false,\n                                success: function (response) {\n\n                                    // let data = response;\n                                    let js = response;\n                                    if (js.success) {\n\n                                        $(\"#zone_bgi\").val(\"\");\n                                        $(\"#zone_bg\").attr(\"src\", \"https://cdn.kenzap.com/loading.png\");\n                                        $(\"#loader\").fadeOut(\"fast\");\n                                    } else {\n                                        alert(\"Unable to save: \" + js.reason);\n                                    }\n                                },\n                            });\n                        });\n                    }\n\n                    // background image upload listener\n                    $('#zone_bg').off();\n                    $('.bg-file').off();\n                    $(\".bg-file\").val(null);\n                    $('#zone_bg').on('click', function () {\n\n                        $(\".bg-file\").trigger(\"click\");\n                    });\n\n                    $('.bg-file').on('change', function (e) {\n\n                        let input = this;\n                        if (input.files && input.files[0]) {\n\n                            let file = input.files[0];\n                            let fd = new FormData();\n                            let id = utils.getUrlParameter('id') + \"-\" + pid;\n                            fd.append('file', file);\n                            fd.append('id', id);\n                            fd.append('cmd', 'store_image');\n                            fd.append('type', 'myticket');\n                            fd.append('token', utils.getCookie('kenzap_token'));\n\n                            // console.log(\"id image bg\"+id);\n\n                            // upload to backend\n                            $(\"#loader\").fadeIn(\"fast\");\n                            $.ajax({\n                                url: 'https://fileapi.kenzap.com/v1/', // backend.php\n                                cmd: 'store_image',\n                                type: 'post',\n                                // id: utils.getUrlParameter('id'),\n                                data: fd,\n                                contentType: false,\n                                processData: false,\n                                success: function (response) {\n\n                                    let js = response;\n                                    // let js = JSON.parse(response);\n                                    if (js.success) {\n\n                                        setTimeout(function () {\n\n                                            let dt = new Date();\n                                            let filename = 'https://cdn.kenzap.com/myticket/' + id + '.jpeg?' + dt.getTime();\n                                            $(\"#zone_bgi\").val(filename);\n                                            $(\"#zone_bg\").attr(\"src\", filename);\n                                            app.updateObjectSeats(app.getSelectedArea(), \"bg\", filename);\n\n                                            $(\"#loader\").fadeOut(\"fast\");\n\n                                        }, 5000);\n\n                                    } else {\n                                        alert(\"Unable to save: \" + js.reason);\n                                    }\n                                },\n                            });\n                        }\n                    });\n\n                    document.querySelector('.form-group-custom').innerHTML = '';\n                    document.querySelector('.form-price-custom').innerHTML = '';\n \n                    if(typeof(state.cfs) === 'undefined') state.cfs = [];\n                    if(typeof(state.pcfs) === 'undefined') state.pcfs = [];\n\n                    // render custom fields\n                    state.cfs.map(obj => {\n\n                        let cf_html = app.structCustomField(obj);\n                        document.querySelector('.form-group-custom').appendChild(cf_html);\n                        $(\"#\"+obj.id).val(app.getObjectSeats(app.getSelectedArea(), obj.id));\n                    });\n\n                    // render price variation fields\n                    $(\"#zone_price\").fadeIn(0);\n                    state.pcfs.map(obj => {\n\n                        let cf_html = app.structPriceField(obj);\n                        document.querySelector('.form-price-custom').appendChild(cf_html);\n                        $(\"#\"+obj.id).val(app.getObjectSeats(app.getSelectedArea(), obj.id));\n                        $(\"#zone_price\").fadeOut(0);\n                    });\n\n                    // custom field add listener\n                    if ( !state.cfs_listener ) document.querySelector('#zone_add_field').addEventListener('click', function (e) {\n       \n                        // find biggest ID by iterating all custom fields. This prevents remove/add ID conflicts\n                        let index = 0;\n                        for(let cf of document.querySelectorAll('.form-group-custom .custom-field')){\n\n                            if( parseInt(cf.dataset.index) > index ) index = parseInt(cf.dataset.index);\n                        }\n                        index += 1;\n\n                        let obj = {id: 'cf' + index, index: index, label: 'Custom field', value: ''};\n                        let cf_html = app.structCustomField(obj);\n                        document.querySelector('.form-group-custom').appendChild(cf_html);\n\n                        state.cfs.push(obj);\n\n                        e.preventDefault();\n\n                    }, false);\n\n                    // custom price variation listener\n                    if ( !state.cfs_listener ) document.querySelector('#zone_add_price').addEventListener('click', function (e) {\n\n                        // find biggest ID by iterating all custom fields. This prevents remove/add ID conflicts\n                        let index = 0;\n                        for(let cf of document.querySelectorAll('.form-price-custom .custom-price-field')){\n\n                            if( parseInt(cf.dataset.index) > index ) index = parseInt(cf.dataset.index);\n                        }\n                        index += 1;\n\n                        let obj = { id: 'pcf' + index, index: index, label: 'Price variation', value: '' };\n                        let cf_html = app.structPriceField(obj);\n                        document.querySelector('.form-price-custom').appendChild(cf_html);\n                        $(\"#zone_price\").fadeOut(0);\n\n                        state.pcfs.push(obj);\n\n                        e.preventDefault();\n\n                    }, false);\n                    \n                    // mark as attached\n                    state.cfs_listener = 'attached'; \n                    \n                    // show zones modal\n                    let modal = document.querySelector(\"#kenzap_seat_map\");\n                    let modalCont = new bootstrap.Modal(modal);\n                    modalCont.show();\n\n                    // $(\"#kenzap_seat_map\").modal('show');\n                    // $(\"#kenzap_seat_map\").modal('show');\n                    // alert($(\"#kenzap_seat_map\").length);\n\n                }\n            } else if (state.appMode === 'mapping') {\n\n                if (e.target.parentNode.tagName === 'g') {\n                    info.unload();\n\n                    state.mappingArea = e.target.dataset.index;\n                    state.moved = false;\n                    state.mapping = true;\n\n                    let cr = $(\"#cr\" + state.mappingArea);\n                    let offset_seat = cr.offset();\n\n                    // mousePos.x = ((e.pageX - offset.left) - state.svg_width) / state.max_times;\n                    // mousePos.y = ((e.pageY - offset.top) - state.svg_height) / state.max_times;\n                    // console.log(\"mapping X \"+e.pageX+' Y '+e.pageY);\n                    // console.log(offset_seat);\n\n                    $(\".cr\").removeClass(\"selected\");\n                    cr.addClass(\"selected\").removeClass(\"align\");\n\n                    // auto align active\n                    if (state.autoAlign) { cr.addClass(\"align\"); if (!state.autoAlignXY) state.autoAlignXY = []; state.autoAlignXY.push({ x: parseInt(cr.attr(\"cx\")), y: parseInt(cr.attr(\"cy\")) }); autoAlignRow(); }\n\n                    state.autoAlign = false;\n                    app.deselectAll();\n\n                } else {\n\n                    app.deselectAll();\n                    info.unload();\n                }\n            }\n        }\n\n        domElements.container.addEventListener('mousedown', onSvgMousedown, false);\n        domElements.seat_mapping.addEventListener('mousedown', onSvgMousedown, false);\n        domElements.seat_mapping.addEventListener('mouseover', onSvgMouseover, false);\n\n        /* Add click event for svg */\n        function onSvgClick(e) {\n            if (state.appMode === 'drawing' && !state.isDraw && state.currentType) {\n                code.hide();\n                app.setIsDraw(true);\n\n                state.newArea = Polygon.createAndStartDrawing(\n                    app, \n                    utils.getRightCoords(e.pageX, e.pageY)\n                );\n            }\n        }\n\n        domElements.container.addEventListener('click', onSvgClick, false);\n\n        /* Add dblclick event for svg */\n        function onAreaDblClick(e) {\n            if (state.appMode === 'editing') {\n                if (e.target.tagName === 'rect' || e.target.tagName === 'circle' || e.target.tagName === 'polygon') {\n                    state.selectedArea = e.target.parentNode.obj;\n                    info.load(state.selectedArea, e.pageX, e.pageY);\n                }\n            }\n        }\n\n        // auto align seat rows between two selected points\n        let autoAlignRow = function () {\n\n            // console.log(Object.keys(state.autoAlignPoints));\n            if (state.autoAlignXY.length > 1) {\n\n                let a, b, alpha, i = 0;\n                /* finding alpha angle arctan(b/a)\n                               . \n                         .     .\n                    .          . b\n                .  .  .  .  .  . \n                        a\n                */\n\n                // swap point if needed\n                if (state.autoAlignXY[0].x > state.autoAlignXY[1].x) {\n                    let tmp = state.autoAlignXY;\n                    state.autoAlignXY[0] = tmp[1];\n                    state.autoAlignXY[1] = tmp[0];\n                }\n\n                a = state.autoAlignXY[1].x - state.autoAlignXY[0].x;\n                b = Math.abs(state.autoAlignXY[1].y - state.autoAlignXY[0].y);\n                alpha = Math.atan(b / a);\n\n                let toAlign = [];\n                $(\".cr\").each(function (index) {\n\n                    let cx = parseInt($(this).attr(\"cx\"));\n                    let cy = parseInt($(this).attr(\"cy\"));\n                    if (cx - state.autoAlignXY[0].x > 0 && state.autoAlignXY[1].x - cx > 0 && ((cy >= state.autoAlignXY[1].y && cy <= state.autoAlignXY[0].y) || (cy <= state.autoAlignXY[1].y && cy >= state.autoAlignXY[0].y) || (cy == state.autoAlignXY[1].y) || (cy == state.autoAlignXY[1].y + 1) || (cy == state.autoAlignXY[1].y - 1) || (cy == state.autoAlignXY[1].y + 2) || (cy == state.autoAlignXY[1].y - 2) || (cy == state.autoAlignXY[1].y + 3) || (cy == state.autoAlignXY[1].y - 3))) {\n\n                        let a2 = cx - state.autoAlignXY[0].x;\n                        let b2 = a2 * Math.tan(alpha);\n                        // console.log(\"within X Y range \" + cx);\n                        console.log(\"a2 = \" + a2 + \" b2 = \" + b2);\n                        console.log(\"cy = \" + cy + \" y0 = \" + (state.autoAlignXY[0].y + \" y1 = \" + state.autoAlignXY[1].y + \" \" + b2));\n\n                        // find if current point belongs to area that can be aligned \n                        let y = (state.autoAlignXY[1].y < state.autoAlignXY[0].y) ? state.autoAlignXY[0].y - b2 : b2 + state.autoAlignXY[0].y;\n                        if (Math.abs(cy - y) <= 10) {\n\n                            toAlign.push($(this).attr('data-index'));\n                            $(this).addClass(\"align\");\n                        }\n                    }\n                });\n\n                toAlign.reverse();\n                let Xintervals = a / (toAlign.length + 1);\n                let xi = state.autoAlignXY[0].x;\n                while (i < toAlign.length) {\n\n                    xi += Xintervals;\n\n                    let newX = xi, newY;\n                    if ((state.autoAlignXY[1].y < state.autoAlignXY[0].y)) {\n                        // every next point is higher\n                        newY = ((state.autoAlignXY[0].x - xi) * Math.tan(alpha)) + state.autoAlignXY[0].y;\n                    } else {\n                        // every next point is lower\n                        newY = -1 * ((state.autoAlignXY[0].x - xi) * Math.tan(alpha)) + state.autoAlignXY[0].y;\n                    }\n\n                    // get seat array index\n                    let index = $(\"#cr\" + toAlign[i]).attr('data-index');\n\n                    console.log(\"show seats \" + \" #cr\" + toAlign[i]);\n\n                    // align horizontally\n                    $(\"#cr\" + toAlign[i]).attr(\"cx\", newX);\n                    $(\"#tx\" + toAlign[i]).attr(\"x\", newX);\n\n                    // align vertically\n                    $(\"#cr\" + toAlign[i]).attr(\"cy\", newY);\n                    $(\"#tx\" + toAlign[i]).attr(\"y\", newY);\n\n                    let mousePos = app.getObjectSeatPoints(app.getSelectedArea(), index);\n                    if (!mousePos) mousePos = { 'x': 0, 'y': 0, 'r': \"\", 't': \"\", 'p': \"\", i: false }\n\n                    mousePos.x = (newX - state.svg_width) / state.max_times;\n                    mousePos.y = (newY - state.svg_height) / state.max_times;\n\n                    app.updateObjectSeatPoints(app.getSelectedArea(), index, mousePos);\n\n                    // console.log(\"align \" + toAlign[i]);\n                    i++;\n                }\n\n                console.log(\"align start\");\n                state.autoAlignXY = [];\n                state.autoAlign = false;\n                if (state.timer1) clearTimeout(state.timer1);\n                state.timer1 = setTimeout(function () { $(\".cr\").removeClass(\"align\"); state.autoAlign = false; }, 1000);\n            }\n            if (state.timer2) clearTimeout(state.timer2);\n            state.timer2 = setTimeout(function () { $(\".cr\").removeClass(\"align\"); state.autoAlign = false; state.autoAlignXY = []; console.log(\"align stoped\"); }, 2000);\n        }\n\n        // move seat from keyboard arrows \n        let move1PX = function (to, area) {\n\n            let x = parseInt($(\"#cr\" + state.mappingArea).attr(\"cx\"));\n            let y = parseInt($(\"#cr\" + state.mappingArea).attr(\"cy\"));\n            let i = $(\"#cr\" + state.mappingArea).attr(\"data-index\");\n            switch (to) {\n                case KEYS.TOP:\n                    y -= 1;\n                    break;\n                case KEYS.BOTTOM:\n                    y += 1;\n                    break;\n                case KEYS.LEFT:\n                    x -= 1;\n                    break;\n                case KEYS.RIGHT:\n                    x += 1;\n                    break;\n            }\n            $(\"#cr\" + state.mappingArea).attr(\"cx\", x);\n            $(\"#cr\" + state.mappingArea).attr(\"cy\", y);\n            $(\"#tx\" + state.mappingArea).attr(\"x\", x);\n            $(\"#tx\" + state.mappingArea).attr(\"y\", y);\n\n            let currentZone = app.getSelectedArea();\n  \n            // let offset = $(\"#svg_mapping\").offset(); // - offset.left  // - offset.top\n            let mousePos = app.getObjectSeatPoints(currentZone, i);\n            if (!mousePos) mousePos = { 'x': 0, 'y': 0, 'r': \"\", 't': \"\", 'p': \"\", i: false }\n            mousePos.x = (x - state.svg_width) / state.max_times;\n            mousePos.y = (y - state.svg_height) / state.max_times;\n\n            app.updateObjectSeatPoints(app.getSelectedArea(), i, mousePos);\n        }\n\n        /* Add keydown event for document */\n        function onDocumentKeyDown(e) {\n            let ctrlDown = e.ctrlKey || e.metaKey; // PC || Mac\n\n            // save digit number \n            if (e.keyCode > 47 && e.keyCode < 58 && state.autoDraw.active) {\n                state.autoDraw.count += (e.keyCode - 48) + \"\";\n            }\n\n            // console.log(\"A key\"+e.keyCode);\n            switch (e.keyCode) {\n                case KEYS.H:\n                case KEYS.F1:\n                    // help.show();\n                    // e.preventDefault();\n\n                    break;\n\n                // seats row auto align mode\n                case KEYS.A:\n\n                    if (state.appMode === 'mapping' && state.selectedArea) {\n                        console.log('KEY A');\n                        state.autoAlign = true;\n                        if (state.timer1) clearTimeout(state.timer1);\n                        state.timer1 = setTimeout(function () { state.autoAlign = false; }, 1000);\n                    }\n                    break;\n\n                // seats auto draw mode\n                case KEYS.D:\n\n                    if (state.appMode === 'mapping' && state.selectedArea) {\n                        console.log(\"draw mode\");\n                        state.autoDraw.count = \"\";\n                        state.autoDraw.active = true;\n                        state.autoDraw.points = [];\n                        if (state.timer1) clearTimeout(state.timer1);\n                        state.timer1 = setTimeout(function () { state.autoDraw.count = \"\"; state.autoDraw.active = false; }, 10000);\n                    }\n                    break;\n\n                // seats auto assign rows and numbers\n                case KEYS.Q:\n\n                    if (state.appMode === 'mapping' && state.selectedArea) {\n                        state.autoAssign = state.autoAssign ? false : true;\n                        console.log(\"assign \" + state.autoAssign);\n                    }\n\n                    break;\n\n                case KEYS.ESC:\n                    if (state.isDraw) {\n                        state.isDraw = false;\n                        state.newArea.remove();\n                        state.areas.pop();\n                        app.removeAllEvents();\n                    } else if (state.appMode === 'editing') {\n                        state.selectedArea.redraw();\n                        app.removeAllEvents();\n                    }\n\n                    break;\n\n                case KEYS.TOP:\n                    if (state.appMode === 'mapping') { move1PX(KEYS.TOP, state.mappingArea); }\n                    if (state.appMode === 'editing' && state.selectedArea) {\n                        state.selectedArea.move(0, -1);\n                        e.preventDefault();\n                    }\n\n                    break;\n\n                case KEYS.BOTTOM:\n                    if (state.appMode === 'mapping') { move1PX(KEYS.BOTTOM, state.mappingArea); }\n                    if (state.appMode === 'editing' && state.selectedArea) {\n                        state.selectedArea.move(0, 1);\n                        e.preventDefault();\n                    }\n                    break;\n\n                case KEYS.LEFT:\n                    if (state.appMode === 'mapping') { move1PX(KEYS.LEFT, state.mappingArea); }\n                    if (state.appMode === 'editing' && state.selectedArea) {\n                        state.selectedArea.move(-1, 0);\n                        e.preventDefault();\n                    }\n\n                    break;\n\n                case KEYS.RIGHT:\n                    if (state.appMode === 'mapping') { move1PX(KEYS.RIGHT, state.mappingArea); }\n                    if (state.appMode === 'editing' && state.selectedArea) {\n                        state.selectedArea.move(1, 0);\n                        e.preventDefault();\n                    }\n\n                    break;\n\n                case KEYS.DELETE:\n                    if (state.appMode === 'editing' && state.selectedArea) {\n                        app.removeObject(state.selectedArea);\n                        state.selectedArea = null;\n                        info.unload();\n                    }\n\n                    break;\n\n                case KEYS.DEL_MAC:\n                    if (state.appMode === 'editing' && state.selectedArea) {\n                        app.removeObject(state.selectedArea);\n                        state.selectedArea = null;\n                        info.unload();\n                    }\n\n                    break;\n\n                // case KEYS.I:\n                //     if (state.appMode === 'editing' && state.selectedArea) {\n                //         let coordsForAttributesForm = state.selectedArea.getCoordsForDisplayingInfo();\n\n                //         info.load(\n                //             state.selectedArea,\n                //             coordsForAttributesForm.x + app.getOffset('x'),\n                //             coordsForAttributesForm.y + app.getOffset('y')\n                //         );\n                //     }\n\n                //     break;\n\n                case KEYS.S:\n                    if (ctrlDown) {\n                        app.saveInLocalStorage();\n                    }\n\n                    break;\n                // create new zone instance\n                case KEYS.C:\n                    if (state.appMode === 'editing' && state.selectedArea && ctrlDown) {\n\n                        e.preventDefault();\n                        console.log('KEYS.C');\n                        state.selectedArea = state.selectedArea.copy(areasIO, state.selectedArea);\n\n                        // console.log(\"copy zone\");\n                        // state.selectedArea = Polygon.copy(app, areasIO, state.selectedArea);\n                    }\n                    break;\n                // rotate clockwise\n                case KEYS.U:\n                    console.log('KEY U');\n                    if (state.appMode === 'editing' && state.selectedArea && ctrlDown) {\n\n                        e.preventDefault();\n                        state.selectedArea = state.selectedArea.rotate(state.selectedArea, 1);\n                    }\n                    break;\n                // rotate c-clockwise\n                case KEYS.J:\n                    console.log('KEY J');\n                    if (state.appMode === 'editing' && state.selectedArea && ctrlDown) {\n\n                        e.preventDefault(); \n                        state.selectedArea = state.selectedArea.rotate(state.selectedArea, -1);\n                    }\n                    break;\n                // revert last change\n                // {x: -9.856382978723405, y: -1.1595744680851063, r: '', t: '90', p: ''}\n                // {x: -9.856382978723405, y: -1.1595744680851063, r: '', t: '90', p: ''}\n                case KEYS.Z:\n                    console.log('KEY Z');\n                    if (state.appMode === 'mapping' && ctrlDown) {\n\n                        let prevArea = state.updateObjectSeatPointsHistory.pop();\n                        if ( prevArea === undefined ) return;\n\n                        state.selectedArea._seats = prevArea.seats;\n\n                        app.createMappingPolygon();\n                        e.preventDefault();\n                    }\n                    break;\n            }\n        }\n\n        document.addEventListener('keydown', onDocumentKeyDown, false);\n\n        // Will moved from the main module\n        let areasIO = {\n            toJSON: function () {\n                let obj = {\n                    areas: [],                      // zones\n                    img: state.image.src,           // link to CDN stored layout image\n                    img_width: $(\"#svg\").width(),   // mapping area image width\n                    cfs: [],                        // custom zone fields\n                    pcfs: [],                       // price variation fields\n                };\n\n                // iterate zones\n                // utils.foreach(state.areas, function (x) {\n\n                //     obj.areas.push(x.toJSON());\n                // });\n                state.areas.map(x => { obj.areas.push(x.toJSON()); });\n\n                // iterate custom fields\n                if(state.cfs === undefined) state.cfs = [];\n                obj.cfs = JSON.parse(JSON.stringify(state.cfs));\n\n                // custom price variations\n                if(state.pcfs === undefined) state.pcfs = [];\n                obj.pcfs = JSON.parse(JSON.stringify(state.pcfs));\n\n                return JSON.stringify(obj);\n            },\n            fromJSON: function (str) {\n\n                let obj = JSON.parse(str);\n                app.loadImage(obj.img);\n                obj.areas.map(areaParams => { app.fromJSONArea(areaParams); });\n\n                // utils.foreach(obj.areas, function (areaParams) {\n                //     app.fromJSONArea(areaParams);\n                // });\n            }\n        };\n\n        // Will moved from the main module\n        let localStorageWrapper = (function () {\n            let KEY_NAME = 'seatMapCreator';\n\n            return {\n                save: function () {\n                    let result = areasIO.toJSON();\n\n                    // save locally\n                    window.localStorage.setItem(KEY_NAME, result);\n                    $(\"#loader\").fadeIn(\"fast\");\n\n                    // save with backend\n                    let fd = new FormData();\n                    fd.append('id', utils.getUrlParameter('id'));\n                    fd.append('cmd', 'save_layout');\n                    fd.append('extra', result);\n\n                    $.ajax({\n                        url: 'https://api.kenzap.com/myticket/',\n                        headers: { 'Kenzap-Token': utils.getCookie('kenzap_token') },\n                        type: 'post',\n                        data: fd,\n                        contentType: false,\n                        processData: false,\n                        success: function (response) {\n\n                            // let js = JSON.parse(response);\n                            let js = response;\n                            if (js.success) {\n\n                                if (!state.silent) {\n\n                                    $(\"#loader\").fadeOut(\"fast\");\n \n                                    let toast = new bootstrap.Toast(document.querySelector('.toast'));\n                                    document.querySelector('.toast .toast-body').innerHTML = 'Changes saved to database';  \n                                    toast.show();\n            \n                                    // swal({\n                                    //     title: 'Changes Applied',\n                                    //     text: 'Recent changes stored to database.',\n                                    //     icon: 'success',\n                                    //     timer: 1800,\n                                    //     button: false\n                                    // }).then(\n                                    //     function () { },\n                                    //     // handling the promise rejection\n                                    //     function (dismiss) {\n                                    //         if (dismiss === 'timer') {\n                                    //             console.log('I was closed by the timer')\n                                    //         }\n                                    //     }\n                                    // )\n                                }\n                                state.silent = false;\n                                // console.log(\"SAVED\");\n                                $(\"#loader\").fadeOut(\"fast\");\n                            } else {\n                                alert(js.reason);\n                            }\n                        },\n                    });\n                    // console.info('Editor ' + result + ' saved');\n                },\n                restore: function () {\n\n                    console.log(\"restoring\");\n\n                    areasIO.fromJSON(window.localStorage.getItem(KEY_NAME));\n                }\n            };\n        })();\n\n        return {\n            domElements: domElements,\n            saveInLocalStorage: localStorageWrapper.save,\n            loadFromLocalStorage: localStorageWrapper.restore,\n            hide: function () {\n                utils.hide(domElements.container);\n                return this;\n            },\n            show: function () {\n                utils.show(domElements.container);\n                return this;\n            },\n            recalcOffsetValues: function () {\n                recalcOffsetValues();\n                return this;\n            },\n            setDimensions: function (width, height) {\n                domElements.svg.setAttribute('width', width);\n                domElements.svg.setAttribute('height', height);\n                domElements.container.style.width = width + 'px';\n                domElements.container.style.height = height + 'px';\n                return this;\n            },\n            structCustomField: function (obj){\n\n                   // struct field\n                   let cf_html = document.createElement('div');\n                   cf_html.className = 'custom-field form-group mb-3';\n                   cf_html.dataset.index = obj.index;\n\n                   let label = document.createElement('label');\n                   label.setAttribute('for', 'cf'+obj.index);\n\n                   let input = document.createElement('input');\n                   input.value = obj.label;\n                   input.className = 'cfl';\n                   input.setAttribute(\"autocomplete\", 'off');\n\n                   let icon = document.createElement('span');\n                   icon.className = 'mdi mdi-trash-can-outline text-danger delete-cfl';\n                   icon.innerHTML = '\\\n                   <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-trash\" viewBox=\"0 0 16 16\">\\\n                       <path d=\"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z\"/>\\\n                       <path fill-rule=\"evenodd\" d=\"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z\"/>\\\n                   </svg>';\n                   icon.dataset.type='remove';\n                   icon.dataset.index=obj.index;\n\n                   let input2 = document.createElement('input');\n                   input2.id = 'cf'+obj.index;\n                   input2.className = 'cf form-control';\n                   input2.setAttribute(\"autocomplete\", \"off\");\n\n                   // remove listener\n                   icon.addEventListener('click', (e) => {\n\n                       switch(e.currentTarget.dataset.type){\n                           case 'remove': \n                               let c = confirm('Remove this field and its values for all zones?');\n                               if(c){\n                               \n                                   // remove globally\n                                   state.cfs = state.cfs.filter((obj) => { return obj.index != e.target.dataset.index; });\n                                   \n                                   console.log(state.cfs);\n                                   e.target.parentNode.parentNode.parentNode.remove();\n                               }\n                               break;\n                       }\n\n                       e.preventDefault();\n                   });\n\n                   // label change listener\n                   input.addEventListener('input', (e) => {\n\n                       state.cfs = state.cfs.map((obj) => { console.log(obj.index + ' ' + e.target.parentNode.parentNode.dataset.index); if(obj.index == parseInt(e.target.parentNode.parentNode.dataset.index)){ obj.label = e.target.value; } console.log(obj); return obj; });\n                       e.preventDefault();\n                   });\n\n                   // input change listener \n                   input2.addEventListener('input', (e) => {\n\n                       e.preventDefault();\n                   });\n\n                   label.appendChild(input);\n                   label.appendChild(icon);\n                   cf_html.appendChild(label);\n                   cf_html.appendChild(input2);\n\n                   return cf_html;\n            },\n            structPriceField: function (obj){\n\n                   // struct field\n                   let cf_html = document.createElement('div');\n                   cf_html.className = 'custom-price-field form-group mb-3';\n                   cf_html.dataset.index = obj.index;\n\n                   let label = document.createElement('label');\n                   label.setAttribute('for', 'pcf'+obj.index);\n\n                   let input = document.createElement('input');\n                   input.value = obj.label;\n                   input.className = 'pcfl';\n                   input.setAttribute(\"autocomplete\", 'off');\n\n                   let icon = document.createElement('span');\n                   icon.className = 'mdi mdi-trash-can-outline text-danger delete-pcfl';\n                   icon.innerHTML = '\\\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-trash\" viewBox=\"0 0 16 16\">\\\n                        <path d=\"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z\"/>\\\n                        <path fill-rule=\"evenodd\" d=\"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z\"/>\\\n                    </svg>';\n\n                   icon.dataset.type='remove';\n                   icon.dataset.index=obj.index;\n\n                   let input2 = document.createElement('input');\n                   input2.id = 'pcf'+obj.index;\n                   input2.className = 'pcf form-control';\n                   input2.setAttribute(\"autocomplete\", \"off\");\n                   input2.setAttribute(\"type\", \"number\");\n\n                   // remove listener\n                   icon.addEventListener('click', (e) => {\n\n                       switch(e.target.dataset.type){\n                           case 'remove': \n                               let c = confirm('Remove this variation and its values for all zones?');\n                               if(c){\n                               \n                                   // remove globally\n                                   state.pcfs = state.pcfs.filter((obj) => { return obj.index != e.target.dataset.index; });\n                                   \n                                   console.log(state.pcfs);\n                                   e.target.parentNode.parentNode.parentNode.remove();\n\n                                   // revert back to default price input field \n                                   if(state.pcfs == 0){ $(\"#zone_price\").fadeIn(0); }\n                               }\n                               break;\n                       }\n\n                       e.preventDefault();\n                   });\n\n                   // label change listener\n                   input.addEventListener('input', (e) => {\n\n                       state.pcfs = state.pcfs.map((obj) => { console.log(obj.index + ' ' + e.target.parentNode.parentNode.dataset.index); if(obj.index == parseInt(e.target.parentNode.parentNode.dataset.index)){ obj.label = e.target.value; } console.log(obj); return obj; });\n                       e.preventDefault();\n                   });\n\n                   // input change listener \n                   input2.addEventListener('input', (e) => {\n\n                       e.preventDefault();\n                   });\n\n                   label.appendChild(input);\n                   label.appendChild(icon);\n                   cf_html.appendChild(label);\n                   cf_html.appendChild(input2);\n\n                   return cf_html;\n            },\n            loadImage: function (url) {\n                get_image.showLoadIndicator();\n                domElements.img.src = url;\n                state.image.src = url;\n                domElements.img.onload = function () {\n                    get_image.hideLoadIndicator().hide();\n                    app.show()\n                        .setDimensions(domElements.img.width, domElements.img.height)\n                        .recalcOffsetValues();\n\n                    $(\"#polygon\").trigger(\"click\");\n                };\n                return this;\n            },\n            preview: (function () {\n                domElements.img.setAttribute('usemap', '#map');\n                domElements.map = document.createElement('map');\n                domElements.map.setAttribute('name', 'map');\n                domElements.container.appendChild(domElements.map);\n\n                return function () {\n                    info.unload();\n                    app.setShape(null);\n                    utils.hide(domElements.svg);\n                    domElements.map.innerHTML = app.getHTMLCode();\n                    code.print();\n                    return this;\n                };\n            })(),\n            hidePreview: function () {\n                utils.show(domElements.svg);\n                domElements.map.innerHTML = '';\n                return this;\n            },\n            addNodeToSvg: function (node) {\n                domElements.svg.appendChild(node);\n                return this;\n            },\n            removeNodeFromSvg: function (node) {\n                domElements.svg.removeChild(node);\n                return this;\n            },\n            getOffset: function (arg) {\n                switch (arg) {\n                    case 'x':\n                    case 'y':\n                        return state.offset[arg];\n                }\n            },\n            clear: function () {\n                //remove all areas\n                state.areas.length = 0;\n                while (domElements.svg.childNodes[0]) {\n                    domElements.svg.removeChild(domElements.svg.childNodes[0]);\n                }\n                code.hide();\n                info.unload();\n                return this;\n            },\n            removeObject: function (obj) {\n                // utils.foreach(state.areas, function (x, i) {\n                state.areas.map((x, i) => {\n                    if (x === obj) {\n                        state.areas.splice(i, 1);\n                    }\n                });\n                obj.remove();\n                return this;\n            },\n            // updateObjectCF: function (obj, key, value) {\n\n            //     // state.areas.map = (x, y) => {\n            //     //     if (x === obj) {\n            //     //         state.areas[i]._seats[key] = value;\n            //     //         console.log(state.areas[i]);\n            //     //     }\n            //     // }\n            //     utils.foreach(state.areas, function (x, i) {\n            //         if (x === obj) {\n            //             state.areas[i]._seats[key] = value;\n            //             console.log(state.areas[i]);\n            //         }\n            //     });\n            //     return this;\n            // },\n            updateObjectSeats: function (obj, key, value) {\n                // utils.foreach(state.areas, function (x, i) {\n                state.areas.map((x, i) => {\n                    if (x === obj) {\n                        state.areas[i]._seats[key] = value;\n                        // console.log(state.areas[i]);\n                    }\n                });\n                return this;\n            },\n            getObjectSeats: function (obj, key) {\n                let temp = '';\n                // utils.foreach(state.areas, function (x, i) {\n                state.areas.map((x, i) => {\n                    if (x === obj) {\n                        if (typeof (state.areas[i]._seats) === \"undefined\")\n                            state.areas[i]._seats = {};\n\n                        temp = state.areas[i]._seats[key];\n                    }\n                });\n                return temp;\n            },\n            updateObjectSeatPoints: function (obj, key, value) {\n\n                // utils.foreach(state.areas, function (x, i) {\n                state.areas.map((x, i) => {\n                    if (x === obj) {\n\n                        // track changes to revert\n                        // console.log('updateObjectSeatPoints');\n                        \n                        state.updateObjectSeatPointsHistory.push(JSON.parse(JSON.stringify(state.areas[i])));\n                        if ( state.updateObjectSeatPointsHistory.legth > 25 ) state.updateObjectSeatPointsHistory.shift();\n \n                        // get rid of unnecessary X Y precision\n                        if(typeof(value.x) !== 'undefined') value.x = parseInt(value.x * 1000) / 1000;\n                        if(typeof(value.y) !== 'undefined') value.y = parseInt(value.y * 1000) / 1000;\n\n                        // make sure these fields are saved in string format\n                        if(typeof(value.t) === 'undefined'){ value.t = parseInt(key)+1; } // always make sure the seat has an index assigned \n                        if(value.t == null){ value.t = parseInt(key)+1; }\n                        if(value.t == ''){ value.t = parseInt(key)+1; }\n                        value.t = value.t + \"\";\n                        if(typeof(value.p) !== 'undefined') value.p = value.p + '';\n                        if(typeof(value.r) !== 'undefined') value.r = value.r + '';\n\n                        // mark point if inside polygon\n                        let polygonPoints = document.querySelector('#svg_mapping_cont polygon').getAttribute('points').split(\" \");\n                        let polygonPointsArr = [];\n                        for(let x = 0; x < polygonPoints.length; x+=2){ polygonPointsArr.push({x: parseFloat(polygonPoints[x]), y: parseFloat(polygonPoints[x+1])}); }\n\n                        let seatPointX = parseInt(document.querySelector('#cr'+key).getAttribute('cx'));\n                        let seatPointY = parseInt(document.querySelector('#cr'+key).getAttribute('cy'));\n                        value.i = this.isPointInsidePolygon([seatPointX, seatPointY], polygonPointsArr);\n\n                        // update isPointInsidePolygon state on frontend\n                        document.querySelector('#cr'+key).setAttribute('data-inside', value.i);\n                        document.querySelector('#tx'+key).setAttribute('data-inside', value.i);\n\n                        console.log(value);\n                        state.areas[i]._seats.points[key] = value;\n                    }\n                });\n                return this;\n            },\n            getObjectSeatPoints: function (obj, key) {\n                let temp = '';\n                // utils.foreach(state.areas, function (x, i) {\n                state.areas.map((x, i) => {\n                    if (x === obj) {\n                        temp = state.areas[i]._seats.points[key];\n                    }\n                });\n                return temp;\n            },\n            isPointInsidePolygon: function (point, vs){\n                // ray-casting algorithm based on\n                // https://wrf.ecse.rpi.edu/Research/Short_Notes/pnpoly.html/pnpoly.html\n                \n                let x = point[0], y = point[1];\n                let inside = false;\n                for (let i = 0, j = vs.length - 1; i < vs.length; j = i++) {\n\n                    let xi = vs[i].x, yi = vs[i].y;\n                    let xj = vs[j].x, yj = vs[j].y;\n                    \n                    let intersect = ((yi > y) != (yj > y))\n                        && (x < (xj - xi) * (y - yi) / (yj - yi) + xi);\n                    if (intersect) inside = !inside;\n                }\n                \n                return inside;\n            },\n            setSilent: function (tr) {\n                state.silent = tr;\n            },\n            resetAreaSeats: function () {\n\n                state.updateObjectSeatPointsHistory.push(JSON.parse(JSON.stringify(state.selectedArea)));\n                state.selectedArea._seats.points = [];\n                app.createMappingPolygon();\n            }, \n            updateSeatNumber: function () {\n\n                if (app.getSelectedArea()) {\n\n                    let points = app.getObjectSeatPoints(app.getSelectedArea(), $(\"#seat_text_in\").data(\"index\"));\n                    points.t = $(\"#seat_text_in\").val();\n                    $(\"#tx\" + $(\"#seat_text_in\").data(\"index\")).html($(\"#seat_text_in\").val());\n                    app.updateObjectSeatPoints(app.getSelectedArea(), $(\"#seat_text_in\").data(\"index\"), points);\n                }\n            },\n            updateSeatRow: function () {\n\n                if (app.getSelectedArea()) {\n\n                    let points = app.getObjectSeatPoints(app.getSelectedArea(), $(\"#seat_text_in\").data(\"index\"));\n                    points.r = $(\"#seat_row_in\").val();\n                    app.updateObjectSeatPoints(app.getSelectedArea(), $(\"#seat_row_in\").data(\"index\"), points);\n                }\n            },\n            updateSeatPrice: function () {\n\n                if (app.getSelectedArea()) {\n\n                    let points = app.getObjectSeatPoints(app.getSelectedArea(), $(\"#seat_text_in\").data(\"index\"));\n                    points.p = $(\"#seat_price_in\").val();\n                    app.updateObjectSeatPoints(app.getSelectedArea(), $(\"#seat_price_in\").data(\"index\"), points);\n                }\n            },\n            getLayout: function (){\n\n                return state.areas;\n                // return areasIO;\n            },\n            exportSeats: function () {\n\n                let result = areasIO.toJSON();\n                // $(\"#exportTextArea\").html(result);\n                // $(\"#kenzap_export\").modal(\"show\");\n\n                document.querySelector(\"#exportTextArea\").innerHTML = result;\n                let modal = document.querySelector(\"#kenzap_export\");\n                let modalCont = new bootstrap.Modal(modal);\n                modalCont.show();\n            },\n            importSeats: function () {\n\n                try{\n\n                    let html = $(\"#importTextArea\").val();\n                    console.log(html);\n                    html = html.trim();\n                    let json = JSON.parse(html);\n                    app.loadLayout('-', json);\n                    $(\"#kenzap_export\").modal(\"hide\");\n                }catch(e){\n\n                    console.log(e);\n                    alert(\"Error parsing JSON structure\");\n                }\n            },\n            deselectAll: function () {\n                // utils.foreach(state.areas, function (x) {\n                state.areas.map( x => {\n                    x.deselect();\n                });\n                return this;\n            },\n            getIsDraw: function () {\n                return state.isDraw;\n            },\n            setIsDraw: function (arg) {\n                state.isDraw = arg;\n                return this;\n            },\n            setMode: function (arg) {\n                state.appMode = arg;\n                return this;\n            },\n            getMode: function () {\n                return state.appMode;\n            },\n            setShape: function (arg) {\n                state.currentType = arg;\n                return this;\n            },\n            getShape: function () {\n                return state.currentType;\n            },\n            addObject: function (object) {\n                state.areas.push(object);\n                return this;\n            },\n            getNewArea: function () {\n                return state.newArea;\n            },\n            resetNewArea: function () {\n                state.newArea = null;\n                return this;\n            },\n            getSelectedArea: function () {\n                return state.selectedArea;\n            },\n            setSelectedArea: function (obj) {\n                state.selectedArea = obj;\n                return this;\n            },\n            getEditType: function () {\n                return state.editType;\n            },\n            setFilename: function (str) {\n                state.image.filename = str;\n                return this;\n            },\n            getFilename: function () {\n                return state.image.filename;\n            },\n            setEditClass: function () {\n                domElements.container.classList.remove('draw');\n                domElements.container.classList.add('edit');\n\n                return this;\n            },\n            setDrawClass: function () {\n                domElements.container.classList.remove('edit');\n                domElements.container.classList.add('draw');\n\n                return this;\n            },\n            setDefaultClass: function () {\n                domElements.container.classList.remove('edit');\n                domElements.container.classList.remove('draw');\n\n                return this;\n            },\n            addEvent: function (target, eventType, func) {\n                state.events.push(new AppEvent(target, eventType, func));\n                return this;\n            },\n            removeAllEvents: function () {\n                // utils.foreach(state.events, function (x) {\n                state.events.map( x => {\n                    x.remove();\n                });\n                state.events.length = 0;\n                return this;\n            },\n            getHTMLCode: function (arg) {\n                let html_code = '';\n                if (arg) {\n                    if (!state.areas.length) {\n                        return '0 objects';\n                    }\n                    html_code += utils.encode('<img src=\"' + state.image.filename + '\" alt=\"\" usemap=\"#map\" />') +\n                        '<br />' + utils.encode('<map name=\"map\">') + '<br />';\n                    utils.foreachReverse(state.areas, function (x) {\n                        html_code += '&nbsp;&nbsp;&nbsp;&nbsp;' + utils.encode(x.toHTMLMapElementString()) + '<br />';\n                    });\n                    html_code += utils.encode('</map>');\n                } else {\n                    utils.foreachReverse(state.areas, function (x) {\n                        html_code += x.toHTMLMapElementString();\n                    });\n                }\n                return html_code;\n            },\n            fromJSONArea: function(params){\n\n                // console.log(params.type);\n                // let AreaConstructor = Area.CONSTRUCTORS[params.type];\n    \n                let area;\n                switch(params.type){\n                    case 'polygon': \n                        area = new Polygon(app, params.coords, params.seats, params.attributes); \n                        break;\n                    case 'circle': \n                        area = new Circle(app, params.coords, params.seats, params.attributes); \n                        break;\n                    case 'rectangle': \n                        area = new Rectangle(app, params.coords, params.seats, params.attributes); \n                        break;\n                }\n    \n                if (!area) {\n                    throw new Error('This area type is not valid');\n                }\n    \n                app.setIsDraw(true);\n    \n                app.setIsDraw(false)\n                    .resetNewArea();\n    \n                return area; \n            },\n            getJSONCF: function(){\n\n                return state.cfs;\n            },\n            fromJSONCF: function(cfs){\n\n                state.cfs = cfs;\n            },\n            getJSONPCF: function(){\n\n                return state.pcfs;\n            },\n            fromJSONPCF: function(pcfs){\n\n                state.pcfs = pcfs;\n            },\n            foreach: function (arr, cb) {\n                for (let i = 0, count = arr.length; i < count; i++) {\n                    cb(arr[i], i);\n                }\n            },\n            loadLayout: function (legacy_img, layout){\n\n                let img = new Image();\n                img.src = (legacy_img == '-') ? layout.img : 'https://cdn.kenzap.com/myticket/' + legacy_img;\n                img.onload = function () {\n\n                    // hide UI loader\n                    hideLoader();\n                    \n                    app.loadImage(img.src).setFilename(img.src);\n                \n                    app.fromJSONCF(layout.cfs);\n\n                    app.fromJSONPCF(layout.pcfs);\n\n                    layout.areas.map(areaParams => {\n                        app.fromJSONArea(areaParams);\n                    });\n\n                    $(\"#polygon\").trigger(\"click\");\n                }\n            },\n            // draw bigger polygon suitable for seat mapping\n            createMappingPolygon: function () {\n\n                let svg_mapping = $(\"#svg_mapping\");\n                let img_section = $(\"#img_section\");\n                let svg_width = $(window).width() - 100;\n                let svg_height = $(window).height() - 100;\n                let currentZone = app.getSelectedArea();\n                $(\"#seat_mapping, #top_toolbar, #seat_notice\").fadeIn();\n                $(\"#seat_row,#seat_text,#seat_price\").fadeOut(0);\n                $(\"#seat_text_vis_cb\").off(\"click\");\n                $(\"#seat_text_vis_cb\").click(function(e){ \n                \n                  if($(this).is(':checked')){ $(\"body\").addClass(\"stv\"); }else{ $(\"body\").removeClass(\"stv\"); }\n                });\n\n                svg_mapping.html(\"\");\n\n                let height_slider;\n                if ($(\"#ul-slider-5\").length) {\n\n                    height_slider = currentZone._seats.height;\n                    if (!height_slider) { height_slider = 100; }\n\n                    let startSlider = document.getElementById('ul-slider-5');\n                    if (startSlider.noUiSlider)\n                        startSlider.noUiSlider.destroy();\n\n                    noUiSlider.create(startSlider, {\n                        start: [height_slider],\n                        connect: [true, false],\n                        range: {\n                            'min': [25],\n                            'max': [125]\n                        }\n                    }, true);\n\n                    // resize mapping seats \n                    startSlider.noUiSlider.on('slide', function (values, handle, unencoded, tap, positions) {\n\n                        console.log(parseInt(values[0]));\n                        app.updateObjectSeats(app.getSelectedArea(), \"height\", parseInt(values[0]));\n\n                        $(\".cr\").each(function (index) {\n                            $(this).attr(\"r\", svg_mapping.attr(\"data-height\") * (parseInt(values[0]) / 100));\n                        });\n\n                    });\n                }\n\n                // get central point \n                let x = 0, y = 0, xc = 0, yc = 0, i = 0;\n                let cp = currentZone._coords.points.map(function (item) {\n\n                    i++; x += item.x; y += item.y;\n                    return item;\n                });\n\n                // calc all x and y coords separately. Divide by the total amount of coords to find central point\n                xc = x / i;\n                yc = y / i;\n\n                // get relative distance from coords to center point\n                let il = 0, yl = 0, xl = 0, ym = 999999999, xm = 999999999, max_times = 1;\n                currentZone._coords.points_rel = [];\n                cp = currentZone._coords.points.map(function (item) {\n\n                    let temp = Math.abs(xc - item.x);\n\n                    // find longest & shortest coordinates\n                    temp = Math.abs(xc - item.x);\n                    xl = temp > xl ? temp : xl;\n                    xm = temp < xm ? temp : xm;\n                    temp = Math.abs(yc - item.y);\n                    yl = temp > yl ? temp : yl;\n                    ym = temp < ym ? temp : ym;\n\n                    // store central points\n                    currentZone._coords.points_rel.push({ x: item.x - xc, y: item.y - yc });\n                });\n\n                // detect how many times original poligon can be enlarged\n                svg_mapping.css(\"width\", svg_width);\n                svg_mapping.css(\"height\", svg_height);\n\n                // get max scalability index\n                let max_x = (svg_width / 2) / xl;\n                let max_y = (svg_height / 2) / yl;\n                max_times = max_x < max_y ? max_x : max_y;\n\n                // generate scaled polygon points\n                max_x = 0; max_y = 0;\n                let max_x_prev = 0, max_y_prev = 0, max_first = true, max_px = 0, min_px = 999999999;\n                let polygonPointsAttrValue = currentZone._coords.points_rel.map(function (point) {\n\n                    let px = point.x * max_times + (svg_width / 2);\n                    let py = point.y * max_times + (svg_height / 2);\n\n                    if (!max_first) {\n                        max_x += max_x_prev * point.y * max_times;\n                        max_y += max_y_prev * point.x * max_times;\n                    }\n\n                    max_x_prev = point.x * max_times;\n                    max_y_prev = point.y * max_times;\n\n                    max_first = false;\n\n                    // used by svg_mapping custom background calculations\n                    if (px > max_px) max_px = px;\n                    if (px < min_px) min_px = px;\n\n                    // currentZone._coords.points_fin.push({x : px, y : py});\n                    return px + \" \" + py;\n                }).join(' ');\n\n                // generate DOM elements\n                let g = document.createElementNS(utils.SVG_NS, 'g');\n                let polygon = document.createElementNS(utils.SVG_NS, 'polygon');\n                polygon.setAttribute('points', polygonPointsAttrValue);\n                g.appendChild(polygon);\n                // svg_mapping.append('<img src=\"' + app.getFilename() + '\" alt=\"section chunk\" usemap=\"#map\" />');\n                svg_mapping.append(g);\n\n                // adjust section image\n                let top = 9999999;\n                let polygonPointsAttrValueOriginal = currentZone._coords.points.map(function (item) { if ((item.y * max_times) < top) { top = (item.y * max_times); } return item.x * max_times + \" \" + item.y * max_times; }).join(' ');\n                let bg = currentZone._seats.bg;\n                if (bg.length > 0) {\n                    svg_mapping.css('background-image', 'url(' + bg + ')');\n                    svg_mapping.css('background-position', 'center');\n                    svg_mapping.css('background-size', (max_px - min_px) + 'px auto');\n                    svg_mapping.css('background-repeat', 'no-repeat');\n                    img_section.attr('src', bg);\n                } else {\n                    svg_mapping.css('background-image', 'none');\n                }\n                img_section.attr('src', app.getFilename());\n                img_section.css('width', parseInt($(\"#svg\").width()) * max_times);\n                img_section.css('left', (((svg_width / 2) - (xc * max_times)) + 80));  // 80 is css offset\n                img_section.css('top', (((svg_height / 2) - (yc * max_times)) + 80)); // 80 is css offset\n                // console.log(\"A \"+svg_width);\n                // console.log(\"B \"+(xc*max_times));\n\n                // calculate polygon square footage https://www.wikihow.com/Calculate-the-Area-of-a-Polygon\n                let sf = Math.round(Math.abs(max_y - max_x)) / 2;\n\n                // generate draggable seats with accordance to square footage size\n                let tws = currentZone._seats.tws;\n                let price = currentZone._seats.price;\n                let height = Math.sqrt(sf / tws);\n                svg_mapping.attr('data-height', height / 2);\n                height *= (parseInt(height_slider) / 100);\n\n                let li = \"\";\n                i = 0;\n                while (i < tws) {\n\n                    let g = document.createElementNS(utils.SVG_NS, 'g');\n                    g.setAttribute('id', \"dc\" + i);\n                    g.setAttribute('data-index', i);\n                    let circle = document.createElementNS(utils.SVG_NS, 'circle');\n                    circle.setAttribute('id', \"cr\" + i);\n                    circle.setAttribute('cx', height / 2);\n                    circle.setAttribute('cy', height / 2);\n                    circle.setAttribute('r', height / 2);\n                    circle.setAttribute('class', \"cr\");\n                    circle.setAttribute('data-index', i);\n                    circle.setAttribute('data-inside', false);\n\n                    let text = document.createElementNS(utils.SVG_NS, 'text');\n                    text.setAttribute('id', \"tx\" + i);\n                    text.setAttribute('x', height / 2);\n                    text.setAttribute('y', height / 2);\n                    text.setAttribute('dy', \".3em\");\n                    text.setAttribute('stroke-width', \"1px\");\n                    text.setAttribute('text-anchor', \"middle\");\n                    text.setAttribute('stroke', \"#51c5cf\");\n                    text.setAttribute('data-index', i);\n                    text.setAttribute('data-inside', false);\n                    text.setAttribute('data-toggle', \"popover\");\n                    text.setAttribute('title', \"Seat Settings\");\n                    text.setAttribute('data-content', \"test\");\n                    text.setAttribute('data-price', price);\n\n                    text.innerHTML = i + 1;\n\n                    // get saved seat records and align them accordingly\n                    if (currentZone._seats.points == null) {\n                        currentZone._seats.points = [];\n                    }\n\n                    if (currentZone._seats.points[i]) {\n\n                        let x = (currentZone._seats.points[i].x) * max_times + (svg_width / 2);\n                        let y = (currentZone._seats.points[i].y) * max_times + (svg_height / 2);\n                        let inside = currentZone._seats.points[i].i;\n                        circle.setAttribute('cx', x);\n                        circle.setAttribute('cy', y);\n                        circle.setAttribute('data-inside', inside);\n\n                        text.setAttribute('x', x);\n                        text.setAttribute('y', y);\n                        text.setAttribute('data-inside', inside);\n\n                        if (currentZone._seats.points[i].t)\n                            text.innerHTML = currentZone._seats.points[i].t;\n\n                        // if(currentZone._seats.points[i].p)\n                        //     text.innerHTML = currentZone._seats.points[i].p;\n                    }\n                    \n                    g.appendChild(circle);\n                    g.appendChild(text);\n                    g.obj = this;\n                    svg_mapping.append(g);\n \n                    // console.log(currentZone._seats.points);\n                    // TODO remove in future\n                    // if( currentZone._seats.points[i] ) app.updateObjectSeatPoints(app.getSelectedArea(), i, currentZone._seats.points[i]);\n\n                    i++;\n                }\n\n                i = 0;\n\n                app.setMode('mapping');\n\n                // for DEBUG\n                // console.log(\"points original: \" + polygonPointsAttrValueOriginal);\n                // console.log(\"points relative: \" + polygonPointsAttrValue);\n                // console.log(\"square footage: \" + sf);\n                // console.log(\"max times: \" + max_times);\n                // console.log(\"longest point: \" + xl + \" \" + yl + \" \");\n                // console.log(\"shortest point: \" + xm + \" \" + ym + \" \");\n                // console.log(\"center point: \" + (xc * max_times) + \" \" + (yc * max_times) + \" \");\n                // console.log(currentZone);\n\n                state.max_times = max_times;\n                state.cp.x = xc;\n                state.cp.y = yc;\n                state.svg_width = (svg_width / 2);\n                state.svg_height = (svg_height / 2);\n\n                let offset = $(\"#svg_mapping\").offset();\n            }\n        };\n    })();\n\n    /**\n     * The constructor for dom events (for simple deleting of event)\n     * \n     * @constructor\n     * @param {DOMElement} target - DOM-element\n     * @param {String} eventType - e.g. 'click' or 'mousemove'\n     * @param {Function} func - handler for this event\n     */\n    function AppEvent(target, eventType, func) {\n        this.target = target;\n        this.eventType = eventType;\n        this.func = func;\n\n        target.addEventListener(eventType, func, false);\n    }\n\n    /**\n     * Remove this event listener from target\n     */\n    AppEvent.prototype.remove = function () {\n        this.target.removeEventListener(this.eventType, this.func, false);\n    };\n\n    /**\n     * The constructor of helpers points\n     * Helper is small svg-rectangle with some actions\n     * \n     * @constructor\n     * @param node {DOMElement} - a node for inserting helper\n     * @param x {number} - x-coordinate of helper\n     * @param y {number} - y-coordinate of helper\n     * @param action {string} - an action by click of this helper (e.g. 'move')\n     */\n    function Helper(node, x, y, action) {\n        this._el = document.createElementNS(utils.SVG_NS, 'rect');\n\n        this._el.classList.add(Helper.CLASS_NAME);\n        this._el.setAttribute('height', Helper.SIZE);\n        this._el.setAttribute('width', Helper.SIZE);\n        this._el.setAttribute('x', x + Helper.OFFSET);\n        this._el.setAttribute('y', y + Helper.OFFSET);\n\n        node.appendChild(this._el);\n\n        this._el.action = action; // TODO: move 'action' from dom el to data-attr\n        this._el.classList.add(Helper.ACTIONS_TO_CURSORS[action]);\n    }\n\n    Helper.SIZE = 6;\n    Helper.OFFSET = -Math.ceil(Helper.SIZE / 2);\n    Helper.CLASS_NAME = 'helper';\n    Helper.ACTIONS_TO_CURSORS = {\n        'move': 'move',\n        'editLeft': 'e-resize',\n        'editRight': 'w-resize',\n        'editTop': 'n-resize',\n        'editBottom': 's-resize',\n        'editTopLeft': 'nw-resize',\n        'editTopRight': 'ne-resize',\n        'editBottomLeft': 'sw-resize',\n        'editBottomRight': 'se-resize',\n        'movePoint': 'pointer'\n    };\n\n    /**\n     * Set coordinates for this helper\n     * \n     * @param x {number} - x-coordinate\n     * @param y {number} - y-coordinate\n     * @returns {Helper}\n     */\n    Helper.prototype.setCoords = function (x, y) {\n        this._el.setAttribute('x', x + Helper.OFFSET);\n        this._el.setAttribute('y', y + Helper.OFFSET);\n\n        return this;\n    };\n\n    /**\n     * Set id of this helper in list of parent's helpers\n     * \n     * @param id {number} \n     * @returns {Helper}\n     */\n    Helper.prototype.setId = function (id) {\n        // TODO: move n-field from DOM-element to data-attribute\n        this._el.n = id;\n\n        return this;\n    };\n\n    /* For html code of created map */\n    let code = (function () {\n        let block = utils.id('code'),\n            content = utils.id('code_content'),\n            close_button = block.querySelector('.close_button');\n\n        close_button.addEventListener('click', function (e) {\n            utils.hide(block);\n            e.preventDefault();\n        }, false);\n\n        return {\n            print: function () {\n                content.innerHTML = app.getHTMLCode(true);\n                utils.show(block);\n            },\n            hide: function () {\n                utils.hide(block);\n            }\n        };\n    })();\n\n\n    /* Edit selected area info */\n    let info = (function () {\n        let form = utils.id('edit_details'),\n            header = form.querySelector('h5'),\n            href_attr = utils.id('href_attr'),\n            alt_attr = utils.id('alt_attr'),\n            title_attr = utils.id('title_attr'),\n            save_button = utils.id('save_details'),\n            close_button = form.querySelector('.close_button'),\n            sections = form.querySelectorAll('p'),\n            obj,\n            x,\n            y,\n            temp_x,\n            temp_y;\n\n        function changedReset() {\n            form.classList.remove('changed');\n            utils.foreach(sections, function (x) {\n            // sections.map( x => {\n                x.classList.remove('changed');\n            });\n        }\n\n        function save(e) {\n            obj.setInfoAttributes({\n                id: id_attr.value,\n                href: href_attr.value,\n                alt: alt_attr.value,\n                title: title_attr.value,\n            });\n\n            obj[obj.href ? 'setStyleOfElementWithHref' : 'unsetStyleOfElementWithHref']();\n\n            changedReset();\n            unload();\n\n            e.preventDefault();\n        }\n\n        function unload() {\n            obj = null;\n            changedReset();\n            utils.hide(form);\n        }\n\n        function setCoords(x, y) {\n            form.style.left = (x + 5) + 'px';\n            form.style.top = (y + 5) + 'px';\n        }\n\n        function moveEditBlock(e) {\n            setCoords(x + e.pageX - temp_x, y + e.pageY - temp_y);\n        }\n\n        function stopMoveEditBlock(e) {\n            x = x + e.pageX - temp_x;\n            y = y + e.pageY - temp_y;\n            setCoords(x, y);\n\n            app.removeAllEvents();\n        }\n\n        function change() {\n            form.classList.add('changed');\n            this.parentNode.classList.add('changed');\n        }\n\n        save_button.addEventListener('click', save, false);\n\n        href_attr.addEventListener('keydown', function (e) { e.stopPropagation(); }, false);\n        alt_attr.addEventListener('keydown', function (e) { e.stopPropagation(); }, false);\n        title_attr.addEventListener('keydown', function (e) { e.stopPropagation(); }, false);\n\n        href_attr.addEventListener('change', change, false);\n        alt_attr.addEventListener('change', change, false);\n        title_attr.addEventListener('change', change, false);\n\n        close_button.addEventListener('click', unload, false);\n\n        header.addEventListener('mousedown', function (e) {\n\n            temp_x = e.pageX, temp_y = e.pageY;\n            app.addEvent(document, 'mousemove', moveEditBlock);\n            app.addEvent(header, 'mouseup', stopMoveEditBlock);\n\n            e.preventDefault();\n        }, false);\n\n        return {\n            load: function (object, new_x, new_y) {\n                obj = object;\n                href_attr.id = object.id ? object.id : '';\n                href_attr.value = object.href ? object.href : '';\n                alt_attr.value = object.alt ? object.alt : '';\n                title_attr.value = object.title ? object.title : '';\n                utils.show(form);\n                if (new_x && new_y) {\n                    x = new_x;\n                    y = new_y;\n                    setCoords(x, y);\n                }\n            },\n            unload: unload\n        };\n    })();\n\n\n    /* Load areas from html code */\n    let from_html_form = (function () {\n        let form = utils.id('from_html_wrapper'),\n            code_input = utils.id('code_input'),\n            load_button = utils.id('load_code_button'),\n            close_button = form.querySelector('.close_button');\n\n        function load(e) {\n            if (Area.createAreasFromHTMLOfMap(code_input.value)) {\n                hide();\n            }\n            e.preventDefault();\n        }\n\n        function hide() {\n            utils.hide(form);\n        }\n\n        load_button.addEventListener('click', load, false);\n\n        close_button.addEventListener('click', hide, false);\n\n        return {\n            show: function () {\n                code_input.value = '';\n                utils.show(form);\n            },\n            hide: hide\n        };\n    })();\n\n\n    /* Get image form */\n    let get_image = (function () {\n        let block = utils.id('get_image_wrapper'),\n            close_button = block.querySelector('.close_button'),\n            loading_indicator = utils.id('loading'),\n            button = utils.id('button'),\n            filename = null,\n            last_changed = null;\n\n        // Drag'n'drop - the first way to loading an image\n        let drag_n_drop = (function () {\n            let dropzone = utils.id('dropzone'),\n                dropzone_clear_button = dropzone.querySelector('.clear_button'),\n                sm_img = utils.id('sm_img');\n\n            function testFile(type) {\n                switch (type) {\n                    case 'image/jpeg':\n                    case 'image/gif':\n                    case 'image/png':\n                        return true;\n                }\n                return false;\n            }\n\n            dropzone.addEventListener('dragover', function (e) {\n                utils.stopEvent(e);\n            }, false);\n\n            dropzone.addEventListener('dragleave', function (e) {\n                utils.stopEvent(e);\n            }, false);\n\n            dropzone.addEventListener('drop', function (e) {\n                utils.stopEvent(e);\n\n                let reader = new FileReader(),\n                    file = e.dataTransfer.files[0];\n\n                if (testFile(file.type)) {\n                    dropzone.classList.remove('error');\n\n                    reader.readAsDataURL(file);\n\n                    reader.onload = function (e) {\n                        sm_img.src = e.target.result;\n                        sm_img.style.display = 'inline-block';\n                        filename = file.name;\n                        utils.show(dropzone_clear_button);\n                        last_changed = drag_n_drop;\n\n                        let fd = new FormData();\n                        let id = utils.getUrlParameter('id');\n                        fd.append('file', file);\n                        fd.append('id', id);\n                        fd.append('cmd', 'store_image');\n                        fd.append('type', 'myticket');\n                        fd.append('token', utils.getCookie('kenzap_token'));\n\n                        // console.log(\"id2\"+id);\n\n                        // upload to backend\n                        $(\"#loader\").fadeIn(\"fast\");\n                        $.ajax({\n                            url: 'https://fileapi.kenzap.com/v1/', // backend.php\n                            cmd: 'store_image',\n                            type: 'post',\n                            // id: utils.getUrlParameter('id'),\n                            data: fd,\n                            contentType: false,\n                            processData: false,\n                            success: function (response) {\n\n                                let js = JSON.parse(response);\n                                // let js = response;\n                                if (js.success) {\n\n                                    // console.log('https://kenzap.cloud/myticket/uploads/'+js.path);\n                                    // $(\"#img\").attr(\"src\",'https://kenzap.cloud/myticket/uploads/'+js.path+ \"?\" + dt.getTime()); \n                                    // setTimeout(function(){ $(\"#img\").attr(\"src\",filename); },1200);\n                                    setTimeout(function () {\n\n                                        let dt = new Date();\n                                        let filename = 'https://cdn.kenzap.com/myticket/' + id + '.jpeg?' + dt.getTime();\n\n                                        $(\"#img\").attr(\"src\", filename);\n                                        app.loadImage(filename).setFilename(filename);\n                                        $(\"#loader\").fadeOut(\"fast\");\n\n                                    }, 12000);\n\n                                } else {\n                                    alert(\"Unable to save: \" + js.reason);\n                                }\n                            },\n                        });\n                    };\n                } else {\n                    clearDropzone();\n                    dropzone.classList.add('error');\n                }\n\n            }, false);\n\n            function clearDropzone() {\n                sm_img.src = '';\n\n                utils.hide(sm_img)\n                    .hide(dropzone_clear_button);\n\n                dropzone.classList.remove('error');\n\n                last_changed = url_input;\n            }\n\n            dropzone_clear_button.addEventListener('click', clearDropzone, false);\n\n            return {\n                clear: clearDropzone,\n                init: function () {\n                    dropzone.draggable = true;\n                    this.clear();\n                    utils.hide(sm_img)\n                        .hide(dropzone_clear_button);\n                },\n                test: function () {\n                    return Boolean(sm_img.src);\n                },\n                getImage: function () {\n                    return sm_img.src;\n                }\n            };\n        })();\n\n        /* Set a url - the second way to loading an image */\n        let url_input = (function () {\n            let url = utils.id('url'),\n                url_clear_button = url.parentNode.querySelector('.clear_button');\n\n            function testUrl(str) {\n                let url_str = str.trim(),\n                    temp_array = url_str.split('.'),\n                    ext;\n\n                if (temp_array.length > 1) {\n                    ext = temp_array[temp_array.length - 1].toLowerCase();\n                    switch (ext) {\n                        case 'jpg':\n                        case 'jpeg':\n                        case 'gif':\n                        case 'png':\n                            return true;\n                    }\n                }\n\n                return false;\n            }\n\n            function onUrlChange() {\n                setTimeout(function () {\n                    if (url.value.length) {\n                        utils.show(url_clear_button);\n                        last_changed = url_input;\n                    } else {\n                        utils.hide(url_clear_button);\n                        last_changed = drag_n_drop;\n                    }\n                }, 0);\n            }\n\n            url.addEventListener('keypress', onUrlChange, false);\n            url.addEventListener('change', onUrlChange, false);\n            url.addEventListener('paste', onUrlChange, false);\n\n            function clearUrl() {\n                url.value = '';\n                utils.hide(url_clear_button);\n                url.classList.remove('error');\n                last_changed = url_input;\n            }\n\n            url_clear_button.addEventListener('click', clearUrl, false);\n\n            return {\n                clear: clearUrl,\n                init: function () {\n                    this.clear();\n                    utils.hide(url_clear_button);\n                },\n                test: function () {\n                    if (testUrl(url.value)) {\n                        url.classList.remove('error');\n                        return true;\n                    } else {\n                        url.classList.add('error');\n                    }\n                    return false;\n                },\n                getImage: function () {\n                    let tmp_arr = url.value.split('/');\n                    filename = tmp_arr[tmp_arr.length - 1];\n\n                    return url.value.trim();\n                }\n            };\n        })();\n\n\n        /* Block init */\n        function init() {\n\n            // console.log('init');\n\n            utils.hide(loading_indicator);\n            drag_n_drop.init();\n            url_input.init();\n            loadLayout();\n            // console.log('window.onload 1');\n            // window.onload = function (e) {\n\n            //     console.log('window.onload 2');\n                \n            // }\n        }\n        init();\n\n        /* Block clear */\n        function clear() {\n            drag_n_drop.clear();\n            url_input.clear();\n            last_changed = null;\n        }\n\n        /* Selected image loading */\n        function onButtonClick(e) {\n            if (last_changed === url_input && url_input.test()) {\n                app.loadImage(url_input.getImage()).setFilename(filename);\n            } else if (last_changed === drag_n_drop && drag_n_drop.test()) {\n                app.loadImage(drag_n_drop.getImage()).setFilename(filename);\n            }\n\n            e.preventDefault();\n        }\n\n        button.addEventListener('click', onButtonClick, false);\n\n        close_button.addEventListener('click', hide, false);\n\n        function loadLayout() {\n            \n            let fd = new FormData();\n            fd.append('id', utils.getUrlParameter('id'));\n            fd.append('cmd', 'get_layout');\n\n            $.ajax({\n                url: 'https://api.kenzap.com/myticket/',\n                type: 'post',\n                headers: { 'Kenzap-Token': utils.getCookie('kenzap_token') },\n                data: fd,\n                contentType: false,\n                processData: false,\n                success: function (response) {\n\n                    // console.log(response);\n                    // let data = JSON.parse(response);\n                    let data = response;\n                    if (data.success) {\n\n                        let legacy_img = data.img;\n                        if (!legacy_img) legacy_img = '-';\n                        if (legacy_img != \"-\" || data.layout.extra.img){\n\n                            app.loadLayout(legacy_img, data.layout.extra);\n                        }else{\n\n                            // hide UI loader\n                            hideLoader();\n                        }\n\n                    } else {\n\n                        // hide UI loader\n                        hideLoader();\n                        \n                        switch (data.code) {\n                            // user not signed in\n                            case 10:\n                                window.location.replace(\"https://auth.kenzap.com/?app=65432108792785&redirect=https://myticket.kenzap.cloud/\");\n                                block = true;\n                                clearInterval(myTimer);\n                                break;\n                            // provisioning project not specified\n                            case 11:\n                                alert('Ooops. Something went wrong. Please close this window and try again!');\n                                block = true;\n                                clearInterval(myTimer);\n\n                                break;\n                        }\n                        console.log(\"Oops! \" + data.reason);\n                    }\n                },\n            });\n        }\n\n        function show() {\n            clear();\n            utils.show(block);\n        }\n\n        function hide() {\n            utils.hide(block);\n        }\n\n        /* Returned object */\n        return {\n            show: function () {\n                app.hide();\n                show();\n\n                return this;\n            },\n            hide: function () {\n                app.show();\n                hide();\n\n                return this;\n            },\n            showLoadIndicator: function () {\n                utils.show(loading_indicator);\n\n                return this;\n            },\n            hideLoadIndicator: function () {\n                utils.hide(loading_indicator);\n\n                return this;\n            }\n        };\n    })();\n    get_image.show();\n\n\n    /* Buttons and actions */\n    let buttons = (function () {\n        let all = utils.id('nav').getElementsByTagName('li'),\n            save = utils.id('save'),\n            load = utils.id('load'),\n            rectangle = utils.id('rectangle'),\n            circle = utils.id('circle'),\n            polygon = utils.id('polygon'),\n            edit = utils.id('edit'),\n            clear = utils.id('clear'),\n            from_html = utils.id('from_html'),\n            to_html = utils.id('to_html'),\n            preview = utils.id('preview'),\n            new_image = utils.id('new_image'),\n            show_help = utils.id('show_help'),\n            seats = utils.id('seats'),\n            saveSeatMap = utils.id('saveSeatMap'),\n            seat_row = utils.id('seat_row_in'),\n            seat_text = utils.id('seat_text_in'),\n            seat_price = utils.id('seat_price_in'),\n            seat_mapping_close = utils.id('seat_mapping_close'),\n            reset_zone = utils.id('reset_zone_btn'),\n            export_btn = utils.id('export'),\n            import_btn = utils.id('import'),\n            stats_btn = utils.id('stats_btn');\n            \n        function deselectAll() {\n            utils.foreach(all, function (x) {\n            // all.map( x => {\n                x.classList.remove(utils.CLASS_NAMES.SELECTED);\n            });\n        }\n\n        function selectOne(button) {\n            deselectAll();\n            button.classList.add(utils.CLASS_NAMES.SELECTED);\n        }\n\n        function onSaveButtonClick(e) {\n            // Save in localStorage\n            app.saveInLocalStorage();\n\n            e.preventDefault();\n        }\n\n        function onLoadButtonClick(e) {\n            // Load from localStorage\n            app.clear()\n                .loadFromLocalStorage();\n\n            e.preventDefault();\n        }\n\n        function onShapeButtonClick(e) {\n\n            $(\".btna\").removeClass(\"btn-primary\").addClass(\"btn-outline-primary\");;\n            $(\"#\" + this.id).addClass(\"btn-primary\").removeClass(\"btn-outline-primary\");\n\n            // shape = rect || circle || polygon\n            app.setMode('drawing')\n                .setDrawClass()\n                .setShape(this.id)\n                .deselectAll()\n                .hidePreview();\n            info.unload();\n            selectOne(this);\n\n            e.preventDefault();\n        }\n\n        function onClearButtonClick(e) {\n            // Clear all\n            if (confirm('Clear all?')) {\n                app.setMode(null)\n                    .setDefaultClass()\n                    .setShape(null)\n                    .clear()\n                    .hidePreview();\n                deselectAll();\n            }\n\n            e.preventDefault();\n        }\n\n        function onFromHtmlButtonClick(e) {\n            // Load areas from html\n            from_html_form.show();\n\n            e.preventDefault();\n        }\n\n        function onToHtmlButtonClick(e) {\n            // Generate html code only\n            info.unload();\n            code.print();\n\n            e.preventDefault();\n        }\n\n        function onPreviewButtonClick(e) {\n            if (app.getMode() === 'preview') {\n                app.setMode(null)\n                    .hidePreview();\n                deselectAll();\n            } else {\n                app.deselectAll()\n                    .setMode('preview')\n                    .setDefaultClass()\n                    .preview();\n                selectOne(this);\n            }\n\n            e.preventDefault();\n        }\n\n        function onEditButtonClick(e) {\n\n            $(\".btna\").removeClass(\"btn-primary\").addClass(\"btn-outline-primary\");;\n            $(\"#\" + this.id).addClass(\"btn-primary\").removeClass(\"btn-outline-primary\");\n\n            if (app.getMode() === 'editing') {\n                app.setMode(null)\n                    .setDefaultClass()\n                    .deselectAll();\n                deselectAll();\n                utils.show(domElements.svg);\n            } else {\n                app.setShape(null)\n                    .setMode('editing')\n                    .setEditClass();\n                selectOne(this);\n            }\n            app.hidePreview();\n            e.preventDefault();\n        }\n\n        function onSeatsButtonClick(e) {\n\n            $(\".btna\").removeClass(\"btn-primary\").addClass(\"btn-outline-primary\");;\n            $(\"#\" + this.id).addClass(\"btn-primary\").removeClass(\"btn-outline-primary\");\n\n            if (app.getMode() === 'seating') {\n                app.setMode(null)\n                    .setDefaultClass()\n                    .deselectAll();\n                deselectAll();\n            } else {\n                app.setShape(null)\n                    .setMode('seating')\n                    .setEditClass();\n                selectOne(this);\n            }\n            app.hidePreview();\n            e.preventDefault();\n        }\n\n        function onSaveSeatsButtonClick(e) {\n\n            let id = $(\"#kenzap_seat_map\").attr('data-id');\n            app.updateObjectSeats(app.getSelectedArea(), \"title\", $(\"#zone_title\").val());\n            app.updateObjectSeats(app.getSelectedArea(), \"tws\", $(\"#zone_tws\").val());\n            app.updateObjectSeats(app.getSelectedArea(), \"tns\", $(\"#zone_tns\").val());\n            app.updateObjectSeats(app.getSelectedArea(), \"price\", $(\"#zone_price\").val());\n            app.updateObjectSeats(app.getSelectedArea(), \"bg\", $(\"#zone_bgi\").val());\n            app.getJSONCF().map(obj => { app.updateObjectSeats(app.getSelectedArea(), obj.id, $(\"#\"+obj.id).val()); });\n            app.getJSONPCF().map(obj => { app.updateObjectSeats(app.getSelectedArea(), obj.id, $(\"#\"+obj.id).val()); });\n            app.createMappingPolygon();\n        }\n\n        // New image - clear all and back to loading image screen\n        function onNewImageButtonClick(e) {\n\n            // swal({\n            //     title: 'New Layout Image',\n            //     text: \"Warning! After this operation zones may not match with image. Make sure to backup original layout image!\",\n            //     icon: 'warning',\n            //     showCancelButton: true,\n            //     confirmButtonColor: '#3f51b5',\n            //     cancelButtonColor: '#ff4081',\n            //     confirmButtonText: 'Great ',\n            //     buttons: {\n            //         cancel: {\n            //             text: \"Cancel\",\n            //             value: null,\n            //             visible: true,\n            //             className: \"btn btn-danger\",\n            //             closeModal: true,\n            //         },\n            //         confirm: {\n            //             text: \"Continue\",\n            //             value: true,\n            //             visible: true,\n            //             className: \"btn btn-primary btn-reset\",\n            //             closeModal: true\n            //         }\n            //     }\n            // });\n\n            // $(document).on('click', \".btn-reset\", function () {\n\n            if(confirm('This operation may break your current layout. Continue?')){\n                // app.setMode(null)\n                //    .setDefaultClass()\n                //    .setShape(null)\n                //    .setIsDraw(false)\n                //    .clear()\n                //    .hide()\n                //    .hidePreview();\n\n                app.setIsDraw(false)\n                    .hide()\n                    .hidePreview();\n\n                deselectAll();\n                get_image.show();\n            }\n            // });\n\n            e.preventDefault();\n        }\n\n        function onShowHelpButtonClick(e) {\n            help.show();\n\n            e.preventDefault();\n        }\n\n        function onMappingCloseClick(e) {\n\n            $(\"#top_toolbar\").fadeOut();\n            $(\"#seat_mapping\").fadeOut();\n\n            app.setSilent(true);\n            app.setMode('seating');\n            onSaveButtonClick(e);\n\n            e.preventDefault();\n        }\n\n        function onSeatRowChange(e) {\n\n            setTimeout(function () {\n                app.updateSeatRow();\n            }, 200);\n        }\n\n        function onSeatNumberChange(e) {\n\n            setTimeout(function () {\n                app.updateSeatNumber();\n            }, 200);\n        }\n\n        function onSeatPriceChange(e) {\n\n            setTimeout(function () {\n                app.updateSeatPrice();\n            }, 200);\n        }\n\n        function onResetAreaSeats(e) {\n\n            setTimeout(function () {\n                let c = confirm(\"Reset all allocated seats?\");\n                if(c) app.resetAreaSeats();\n            }, 200);\n        }\n\n        function onExportClick(e) {\n            app.exportSeats();\n        } \n\n        function onImportClick(e) {\n            app.clear();\n            app.importSeats();\n        }\n\n        function onStatsClick(e) {\n\n            // app.recalcSeats();\n            let stats = new Stats(document.getElementById(\"stats-body\"), app.getLayout(), app.getJSONCF());\n            stats.drawStats();\n        }\n\n        save.addEventListener('click', onSaveButtonClick, false);\n        polygon.addEventListener('click', onShapeButtonClick, false);\n        edit.addEventListener('click', onEditButtonClick, false);\n        new_image.addEventListener('click', onNewImageButtonClick, false);\n        seats.addEventListener('click', onSeatsButtonClick, false);\n        saveSeatMap.addEventListener('click', onSaveSeatsButtonClick, false);\n        seat_mapping_close.addEventListener('click', onMappingCloseClick, false);\n        seat_row.addEventListener('keyup', onSeatRowChange, false);\n        seat_text.addEventListener('keyup', onSeatNumberChange, false);\n        seat_price.addEventListener('keyup', onSeatPriceChange, false);\n        reset_zone.addEventListener('click', onResetAreaSeats, false);\n        export_btn.addEventListener('click', onExportClick, false);\n        import_btn.addEventListener('click', onImportClick, false);\n        stats_btn.addEventListener('click', onStatsClick, false);\n    })();\n\n};","/*\n * Copyright (C) KENZAP PTE LTD - All Rights Reserved\n * Unauthorized copying of this file, via any medium is strictly prohibited\n * Proprietary and confidential\n * Written by Pavels Lukasenko <pavel@kenzap.com>, March 2019\n *\n * Name: MyTicket Events Mapping Tool\n * Description: Seat, custom poligon image mapping software.\n * Author: Kenzap\n * Author URI: https://kenzap.com/\n * Version: 2.4\n * Credits:\n * \n * Summer html image map creator\n * http://github.com/summerstyle/summer\n *\n * Copyright 2016 Vera Lobacheva (http://iamvera.com)\n * Released under the MIT license\n * \n */\n\n// dependencies\nimport { showLoader, hideLoader, initHeader, loadScript, initFooter, initBreadcrumbs, parseApiError, getCookie, onClick, getSiteId, link } from '@kenzap/k-cloud';\nimport { HTMLContent } from \"../_/_cnt_layout_edit.js\"\n\n// layout editing dependencies\nimport { initMapping } from '../_/mapping.js';\n\n// where everything happens\nconst _this = {\n\n    state: {\n        firstLoad: true,\n        ajaxQueue: 0\n    },\n    init: () => {\n        \n        loadScript(\"https://account.kenzap.com/js/nouislider.js\", () => {});\n\n        _this.getData();\n    },\n    getData: () => {\n\n        // show loader during first load\n        if (_this.state.firstLoad) showLoader();\n\n        // do API query\n        fetch('https://api-v1.kenzap.cloud/', {\n            method: 'post',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'text/plain',\n                'Authorization': 'Bearer ' + getCookie('kenzap_api_key'),\n                'Kenzap-Header': localStorage.hasOwnProperty('header'),\n                'Kenzap-Token': getCookie('kenzap_token'),\n                'Kenzap-Sid': getSiteId(),\n            },\n            body: JSON.stringify({\n                query: {\n                    locale: {\n                        type:       'locale',\n                        id:         getCookie('lang')\n                    }\n                }\n            })\n        })\n        .then(response => response.json())\n        .then(response => {\n\n            if(response.success){\n\n                // init header\n                initHeader(response);\n\n                // init footer\n                initFooter(__('Copyright © '+new Date().getFullYear()+' <a class=\"text-muted\" href=\"https://kenzap.com/\" target=\"_blank\">Kenzap</a>. All rights reserved.'), __('MyTicket Mapping Software'));\n\n                // get core html content \n                _this.loadHomeStructure();  \n\n                // render\n                _this.renderPage();\n\n                // init mapping\n                initMapping();\n                // initDashboard();\n\n            }else{\n\n                parseApiError(response);\n            }\n        })\n        .catch(error => {\n            console.error('Error:', error);\n        });\n    },\n    renderPage: (data) => {\n\n        let d = document;\n\n        // initiate breadcrumbs\n        initBreadcrumbs(\n            [\n                { link: link('https://dashboard.kenzap.cloud?launcher=myticket'), text: __('Dashboard') },\n                { link: link('/'), text: __('MyTicket') },\n                { text: __('Edit Layout') },\n            ]\n        );\n    },\n    initListeners: () => {\n\n        console.log('initListeners ');\n\n        // rename layout\n        onClick('.rename-layout', _this.listeners.renameLayout);\n\n        // duplicate layout\n        onClick('.duplicate-layout', _this.listeners.duplicateLayout);\n\n        // rename layout\n        onClick('.remove-layout', _this.listeners.removeLayout);\n\n        // prevents listeners to be assigned twice\n        if(!_this.state.firstLoad) return;\n\n        // add layout listener\n        onClick('.btn-add', _this.listeners.addLayout);\n\n        // add product confirm\n        onClick('.btn-modal', _this.listeners.modalSuccessBtn);\n    },\n    listeners: {\n\n        addLayout: (e) => {\n\n            e.preventDefault();\n            \n            let modal = document.querySelector(\".modal\");\n            let modalCont = new bootstrap.Modal(modal);\n            \n            modal.querySelector(\".modal-title\").innerHTML = __('Add Layout');\n            modal.querySelector(\".btn-primary\").innerHTML = __('Add');\n            modal.querySelector(\".btn-secondary\").innerHTML = __('Cancel');\n            let id = e.currentTarget.dataset.id;\n            let title = \"\";\n            let modalHTml = `\n            <div class=\"form-cont\">\n                <div class=\"form-group mb-3\">\n                    <label for=\"p-title\" class=\"form-label\">${ __('Title') }</label>\n                    <input type=\"text\" class=\"form-control\" id=\"p-title\" autocomplete=\"off\" placeholder=\"${ __('Arena..') }\" value=\"${ title }\">\n                    <ol class=\"mt-3 form-text\">\n                        <li>Enter layout title</li>\n                        <li>Click add button</li>\n                        <li>Start creating layout</li>\n                    </ol>\n                </div>\\\n                <p class=\"mt-2 form-text fs-8\">Need help in designing your hall or stadium? <a target=\"_blank\" href=\"https://kenzap.com/seat-reservation-in-wordpress-setup-service-1014779/\">View examples</a>.</p>\n            </div>`;\n    \n            modal.querySelector(\".modal-body\").innerHTML = modalHTml;\n\n            _this.listeners.modalSuccessBtnFunc = (e) => {\n\n                e.preventDefault();\n    \n                let data = {};\n                data.title = modal.querySelector(\"#p-title\").value;\n\n                if(data.title.length<4){ alert(__('Please provide longer title')); return; }\n    \n                // send data\n                let params = new URLSearchParams();\n                params.append(\"cmd\", \"add_layout\");\n                params.append(\"title\", data.title);\n\n                // do API query\n                showLoader();\n\n                fetch('https://api.kenzap.com/myticket/', {\n                    method: 'post',\n                    headers: {\n                        'Accept': 'application/json',\n                        'Content-type': 'application/x-www-form-urlencoded',\n                        'Authorization': 'Bearer ' + getCookie('kenzap_api_key'),\n                        'Kenzap-Header': localStorage.hasOwnProperty('header'),\n                        'Kenzap-Token': getCookie('kenzap_token'),\n                        'Kenzap-Sid': getSiteId(),\n                    },\n                    body: params\n                })\n                .then(response => response.json())\n                .then(response => {\n    \n                    if (response.success){\n    \n                        modalCont.hide();\n                        \n                        _this.getData();\n\n                    }else{\n    \n                        parseApiError(response);\n                    }\n                })\n                .catch(error => {\n                    console.error('Error:', error);\n                });\n            }\n\n            modalCont.show();\n\n            setTimeout( () => modal.querySelector(\"#p-title\").focus(),100 );\n        },\n        duplicateLayout: (e) => {\n\n            e.preventDefault();\n\n            if(!confirm(__('Duplicate this layout?'))) return;\n\n            let id = e.currentTarget.dataset.id;\n\n            e.preventDefault();\n\n            // send data\n            let params = new URLSearchParams();\n            params.append(\"cmd\", \"duplicate_layout\");\n            params.append(\"id\", id);\n\n            // do API query\n            showLoader();\n\n            fetch('https://api.kenzap.com/myticket/', {\n                method: 'post',\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-type': 'application/x-www-form-urlencoded',\n                    'Authorization': 'Bearer ' + getCookie('kenzap_api_key'),\n                    'Kenzap-Header': localStorage.hasOwnProperty('header'),\n                    'Kenzap-Token': getCookie('kenzap_token'),\n                    'Kenzap-Sid': getSiteId(),\n                },\n                body: params\n            })\n            .then(response => response.json())\n            .then(response => {\n\n                if (response.success){\n    \n                    _this.getData();\n\n                }else{\n\n                    parseApiError(response);\n                }\n            })\n            .catch(error => {\n                console.error('Error:', error);\n            });\n        },\n        removeLayout: (e) => {\n\n            e.preventDefault();\n\n            if(!confirm(__('Permanently remove this layout?'))) return;\n\n            let id = e.currentTarget.dataset.id;\n\n            e.preventDefault();\n\n            // send data\n            let params = new URLSearchParams();\n            params.append(\"cmd\", \"remove_layout\");\n            params.append(\"id\", id);\n\n            // do API query\n            showLoader();\n\n            fetch('https://api.kenzap.com/myticket/', {\n                method: 'post',\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-type': 'application/x-www-form-urlencoded',\n                    'Authorization': 'Bearer ' + getCookie('kenzap_api_key'),\n                    'Kenzap-Header': localStorage.hasOwnProperty('header'),\n                    'Kenzap-Token': getCookie('kenzap_token'),\n                    'Kenzap-Sid': getSiteId(),\n                },\n                body: params\n            })\n            .then(response => response.json())\n            .then(response => {\n\n                if (response.success){\n    \n                    _this.getData();\n\n                }else{\n\n                    parseApiError(response);\n                }\n            })\n            .catch(error => {\n                console.error('Error:', error);\n            });\n        \n        },\n        renameLayout: (e) => {\n\n            e.preventDefault();\n            \n            let modal = document.querySelector(\".modal\");\n            let modalCont = new bootstrap.Modal(modal);\n            \n            modal.querySelector(\".modal-title\").innerHTML = __('Rename Layout');\n            modal.querySelector(\".btn-primary\").innerHTML = __('Rename');\n            modal.querySelector(\".btn-secondary\").innerHTML = __('Cancel');\n            let id = e.currentTarget.dataset.id;\n            let title = e.currentTarget.dataset.title;\n            let modalHTml = `\\\n\n            <div class=\"form-cont\">\\\n                <div class=\"form-group mb-3\">\\\n                    <label for=\"p-title\" class=\"form-label\">${ __('Title') }</label>\\\n                    <input type=\"text\" class=\"form-control\" id=\"p-title\" autocomplete=\"off\" placeholder=\"\" value=\"${ title }\">\\\n                </div>\\\n            </div>`;\n    \n            modal.querySelector(\".modal-body\").innerHTML = modalHTml;\n\n            _this.listeners.modalSuccessBtnFunc = (e) => {\n\n                e.preventDefault();\n    \n                let data = {};\n                data.title = modal.querySelector(\"#p-title\").value;\n\n                if(data.title.length<4){ alert(__('Please provide longer title')); return; }\n    \n                // send data\n                let params = new URLSearchParams();\n                params.append(\"cmd\", \"rename_layout\");\n                params.append(\"title\", data.title);\n                params.append(\"id\", id);\n\n                // do API query\n                showLoader();\n\n                fetch('https://api.kenzap.com/myticket/', {\n                    method: 'post',\n                    headers: {\n                        'Accept': 'application/json',\n                        'Content-type': 'application/x-www-form-urlencoded',\n                        'Authorization': 'Bearer ' + getCookie('kenzap_api_key'),\n                        'Kenzap-Header': localStorage.hasOwnProperty('header'),\n                        'Kenzap-Token': getCookie('kenzap_token'),\n                        'Kenzap-Sid': getSiteId(),\n                    },\n                    body: params\n                })\n                .then(response => response.json())\n                .then(response => {\n    \n                    if (response.success){\n    \n                        modalCont.hide();\n                        \n                        _this.getData();\n\n                    }else{\n    \n                        parseApiError(response);\n                    }\n                })\n                .catch(error => {\n                    console.error('Error:', error);\n                });\n            }\n\n            modalCont.show();\n\n            setTimeout( () => modal.querySelector(\"#p-title\").focus(),100 );\n        },\n        modalSuccessBtn: (e) => {\n            \n            _this.listeners.modalSuccessBtnFunc(e);\n        },\n\n        modalSuccessBtnFunc: null\n    },\n    loadHomeStructure: () => {\n\n        if(!_this.state.firstLoad) return;\n\n        // get core html content \n        document.querySelector('#contents').innerHTML = HTMLContent(__);\n    },\n}\n\n_this.init();"],"names":["HTMLContent","__","hideLoader","el","document","querySelector","style","display","Utils","app","SELECTED","WITH_HREF","node","boxCoords","getBoundingClientRect","x","Math","round","left","window","pageXOffset","y","top","pageYOffset","getOffset","arg","state","offset","str","getElementById","replace","arr","func","i","count","length","output","innerHTML","join","call","arguments","e","stopPropagation","preventDefault","sParam","sPageURL","location","search","substring","sURLVariables","split","sParameterName","undefined","decodeURIComponent","cname","name","decodedCookie","cookie","ca","c","charAt","indexOf","unescape","obj","options","target","hasOwnProperty","len","text","possible","floor","random","F","Child","Parent","prototype","constructor","_app","Area","type","coords","seats","attributes","Error","setSVGCoords","_coords","removeNodeFromSvg","_groupEl","dx","dy","setCoords","edit","redraw","_attributes","id","utils","genID","_el","classList","add","CLASS_NAMES","remove","href","alt","title","_type","_title","_seats","htmlStr","findedResult","REGEXP","AREA","exec","htmlAreaFinded","DELIMETER","ATTRIBUTES_NAMES","forEach","item","result","map","Number","HTML_NAMES_TO_AREA_NAMES","fromJSON","CONSTRUCTORS","getCoordsFromHTMLArray","Boolean","points","createElementNS","SVG_NS","setInfoAttributes","dataset","addNodeToSvg","_helpers","addObject","HREF","ALT","TITLE","rect","circle","poly","params","fromJSONArea","Helper","action","setAttribute","OFFSET","n","CLASS_NAME","SIZE","appendChild","ACTIONS_TO_CURSORS","ceil","Rectangle","width","height","center_y","bottom","center_x","right","center","topLeft","topRight","bottomLeft","bottomRight","isSquare","newCoords","getSquareCoords","getNormalizedCoords","getRightCoords","pageX","pageY","dynamicDraw","shiftKey","deselect","removeAllEvents","setIsDraw","resetNewArea","editingType","tempParams","Object","create","saveProportions","getSavedProportionsCoords","dynamicEdit","getEditType","editingStartPoint","onProcessEditing","x2","y2","htmlCoordsArray","testHTMLCoords","abs","originalCoords","originalProportions","currentProportions","firstPointCoords","newArea","addEvent","domElements","container","onProcessDrawing","bind","onStopDrawing","Polygon","polyline","replaceChild","isOpened","polygonPointsAttrValue","reduce","previousValue","currentItem","foreach","helper","cb","setId","push","isRightAngle","temp_coords","concat","rightPointCoords","getRightAngleLineLastPointCoords","newPointCoords","addPoint","keyCode","testCoords","close","selected_point","editType","TANGENS","DEG_22","DEG_67","lastPointIndex","lastPoint","tan","areasIO","originalArea","res","JSON","parse","toJSON","areas","areaParams","point","xMin","xMax","yMin","yMax","yM","xM","p","area","angle","cp","getCenterPoint","matrixAngle","compose","rotateDEG","rotatedZonePoints","applyToPoints","cpa","matrixMove","translate","console","log","rotatedSeatPoints","toast","bootstrap","Toast","show","_selectedPoint","polygon","onAddPointDrawing","Circle","cx","cy","radius","helpers","sqrt","pow","tempCoords","Stats","cfs","_areas","html","_cfs","cf","label","seatsPerZone","totalZones","totalSeats","totalTws","colspan","a","tws","parseInt","data","initMapping","hide","encode","foreachReverse","debug","stopEvent","getUrlParameter","getCookie","extend","inherits","wrapper","svg","img","seat_mapping","rectangle","clickTime","Date","getTime","svg_width","svg_height","max_times","appMode","currentType","selectedArea","mappingArea","pcfs","cfs_listener","events","isDraw","silent","image","src","filename","last_scroll","to","moved","mapping","autoAssign","autoAssignRT","autoAlign","autoAlignXY","autoDraw","active","updateObjectSeatPointsHistory","timer1","timer2","KEYS","F1","ESC","TOP","BOTTOM","LEFT","RIGHT","DELETE","DEL_MAC","Q","A","D","H","I","S","C","O","P","J","U","Z","recalcOffsetValues","clearTimeout","setTimeout","addEventListener","cursor_position_info","coords_info","set","empty","$","attr","tagName","fadeOut","fadeIn","currentZone","getSelectedArea","parentNode","index","mousePos","getObjectSeatPoints","updateObjectSeatPoints","val","getObjectSeats","r","alpha","atan","interval","ci","newX","newY","querySelectorAll","dataInside","getAttribute","inside","xTemp","cos","yTemp","onSvgMouseover","mappingAreaPrev","cr","tr","addClass","t","seatNumber","removeClass","onSvgMousedown","info","unload","deselectAll","select","contains","onStopEditing","pid","css","bg","off","on","confirm","fd","FormData","append","ajax","url","cmd","contentType","processData","success","response","js","alert","reason","trigger","input","files","file","dt","updateObjectSeats","cf_html","structCustomField","structPriceField","value","modal","modalCont","Modal","autoAlignRow","onSvgClick","code","createAndStartDrawing","b","tmp","toAlign","each","a2","b2","reverse","Xintervals","xi","move1PX","onDocumentKeyDown","ctrlDown","ctrlKey","metaKey","pop","move","removeObject","saveInLocalStorage","copy","rotate","prevArea","createMappingPolygon","img_width","stringify","loadImage","localStorageWrapper","KEY_NAME","save","localStorage","setItem","headers","restore","getItem","loadFromLocalStorage","setDimensions","createElement","className","icon","input2","currentTarget","filter","get_image","showLoadIndicator","onload","hideLoadIndicator","preview","setShape","getHTMLCode","print","hidePreview","removeChild","clear","childNodes","splice","key","temp","legth","shift","polygonPoints","polygonPointsArr","parseFloat","seatPointX","seatPointY","isPointInsidePolygon","vs","j","yi","xj","yj","intersect","setSilent","resetAreaSeats","updateSeatNumber","updateSeatRow","updateSeatPrice","getLayout","exportSeats","importSeats","trim","json","loadLayout","getIsDraw","setMode","getMode","getShape","object","getNewArea","setSelectedArea","setFilename","getFilename","setEditClass","setDrawClass","setDefaultClass","eventType","AppEvent","html_code","toHTMLMapElementString","getJSONCF","fromJSONCF","getJSONPCF","fromJSONPCF","legacy_img","layout","Image","svg_mapping","img_section","click","is","height_slider","startSlider","noUiSlider","destroy","start","connect","range","values","handle","unencoded","tap","positions","xc","yc","il","yl","xl","points_rel","max_x","max_y","max_x_prev","max_y_prev","max_first","max_px","min_px","px","py","g","sf","price","removeEventListener","block","content","close_button","form","header","href_attr","alt_attr","title_attr","save_button","sections","temp_x","temp_y","changedReset","id_attr","moveEditBlock","stopMoveEditBlock","change","load","new_x","new_y","code_input","load_button","createAreasFromHTMLOfMap","loading_indicator","button","last_changed","drag_n_drop","dropzone","dropzone_clear_button","sm_img","testFile","reader","FileReader","dataTransfer","readAsDataURL","clearDropzone","url_input","init","draggable","test","getImage","url_clear_button","testUrl","url_str","temp_array","ext","toLowerCase","onUrlChange","clearUrl","tmp_arr","onButtonClick","extra","clearInterval","myTimer","all","getElementsByTagName","new_image","saveSeatMap","seat_row","seat_text","seat_price","seat_mapping_close","reset_zone","export_btn","import_btn","stats_btn","selectOne","onSaveButtonClick","onShapeButtonClick","onEditButtonClick","onSeatsButtonClick","onSaveSeatsButtonClick","onNewImageButtonClick","onMappingCloseClick","onSeatRowChange","onSeatNumberChange","onSeatPriceChange","onResetAreaSeats","onExportClick","onImportClick","onStatsClick","stats","drawStats","_this","firstLoad","ajaxQueue","loadScript","getData","showLoader","fetch","method","getSiteId","body","query","locale","then","initHeader","initFooter","getFullYear","loadHomeStructure","renderPage","parseApiError","error","initBreadcrumbs","link","initListeners","onClick","listeners","renameLayout","duplicateLayout","removeLayout","addLayout","modalSuccessBtn","modalHTml","modalSuccessBtnFunc","URLSearchParams","focus"],"mappings":"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"}