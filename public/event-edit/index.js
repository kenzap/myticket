!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,s(a.key),a)}}function n(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=c(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,l=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw l}}}}function s(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}const r=(e,t,...n)=>{let a=(e,t)=>(t.forEach(((t,n)=>{e=e.replace("%"+(n+1)+"$",t)})),e);return void 0===window.i18n||void 0===window.i18n.state.locale.values[e]?a(e,n):a(t(window.i18n.state.locale.values[e]),n)},d=e=>0===(e=String(e)).length?"":e.replace(/[&<>'"]/g,(e=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&apos;",'"':"&quot;"}[e]))),u=(e,...t)=>{if(0===(e=String(e)).length)return"";return r(e,(e=>e.replace(/[<>'"]/g,(e=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&apos;",'"':"&quot;"}[e])))),...t)},m=(e,...t)=>{if(0===(e=String(e)).length)return"";return r(e,(e=>e.replace(/[&<>'"]/g,(e=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&apos;",'"':"&quot;"}[e])))),...t)},p=()=>{let e=document.querySelector(".loader");e&&(e.style.display="block")},v=()=>{let e=document.querySelector(".loader");e&&(e.style.display="none")},f=e=>{let t=new URLSearchParams(window.location.search),n=t.get("sid")?t.get("sid"):"",a=-1==e.indexOf("?")?"?sid="+n:"&sid="+n;return e+a},y=()=>{let e=new URLSearchParams(window.location.search);return e.get("sid")?e.get("sid"):""},h=e=>{let t=e+"=",n=decodeURIComponent(document.cookie).split(";");for(let e=0;e<n.length;e++){let a=n[e];for(;" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(t))return a.substring(t.length,a.length)}return""},b=()=>{let e=localStorage.hasOwnProperty("header")&&localStorage.hasOwnProperty("header-version")?localStorage.getItem("header-version"):0,t=window.location.hostname+"/"+y()+"/"+h("locale");return t!=h("check")&&(e=0,console.log("refresh")),((e,t,n)=>{let a="";if(n){let e=new Date;e.setTime(e.getTime()+24*n*60*60*1e3),a=";expires="+e.toUTCString()}document.cookie=e+"="+(escape(t)||"")+a+";path=/;domain=.kenzap.cloud"})("check",t,5),e},g=()=>({Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+h("kenzap_api_key"),"Kenzap-Locale":h("locale")?h("locale"):"en","Kenzap-Header":b(),"Kenzap-Token":h("kenzap_token"),"Kenzap-Sid":y()});h("kenzap_api_key"),h("locale")&&h("locale"),b(),h("kenzap_token"),y();const k=e=>{if(console.log(e),isNaN(e.code)){let t=e;try{t=JSON.stringify(t)}catch(e){}let n=new URLSearchParams;return n.append("cmd","report"),n.append("sid",y()),n.append("token",h("kenzap_token")),n.append("data",t),fetch("https://api-v1.kenzap.cloud/error/",{method:"post",headers:{Accept:"application/json","Content-type":"application/x-www-form-urlencoded"},body:n}),void alert("Can not connect to Kenzap Cloud")}if(401===e.code){if(-1!=window.location.href.indexOf("localhost"))return void alert(e.reason);location.href="https://auth.kenzap.com/?app=65432108792785&redirect="+window.location.href}else alert(e.reason)},w=(e,t)=>{if(document.querySelector(e))for(let n of document.querySelectorAll(e))n.removeEventListener("click",t,!0),n.addEventListener("click",t,!0)},x=(e,t)=>{if(document.querySelector(e))for(let n of document.querySelectorAll(e))n.removeEventListener("change",t,!0),n.addEventListener("change",t,!0)},S=e=>{let t=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});e.dispatchEvent(t)},q=e=>{if(!document.querySelector(".toast")){let e='\n        <div class="toast-cont position-fixed bottom-0 p-2 m-4 end-0 align-items-center" style="z-index:10000;">\n            <div class="toast hide align-items-center text-white bg-dark border-0" role="alert" aria-live="assertive" aria-atomic="true" data-bs-delay="3000">\n                <div class="d-flex">\n                    <div class="toast-body"></div>\n                    <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>\n                </div>\n            </div>\n        </div>';document.querySelector("body > div")&&document.querySelector("body > div").insertAdjacentHTML("afterend",e)}let t=new bootstrap.Toast(document.querySelector(".toast"));document.querySelector(".toast .toast-body").innerHTML=e,t.show()};var L=function(){var e=new URLSearchParams(window.location.search);return e.get("id")?e.get("id"):""},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6;return Math.random().toString(36).substring(2,e+2)},M=function(e){return e=e||0,e=parseFloat(e),e=Math.round(100*e)/100},_=function(e,t){document.querySelector(e)&&(t.push.apply(t,[9,37,38,39,40,98,100,102,104]),o(document.querySelectorAll(e)).forEach((function(e){e.addEventListener("keydown",(function(e){var n=e.key.toLowerCase();"control"!=n&&"meta"!=n||(window[n]=!0);var a=n>="0"&&n<="9";return(window.control||window.meta)&&[86,88,65,67,90].includes(e.which)?(console.log("pushing"),!0):a||t.includes(e.which)?void 0:(e.preventDefault(),!1)})),e.addEventListener("keyup",(function(e){var t=e.key.toLowerCase();"control"!=t&&"meta"!=t||(window[t]=!1)}))})))},z=function(e,t){t=M(t),t=(Math.round(100*parseFloat(t))/100).toFixed(2);var n={};switch((n=e.currency_symb_loc?e:e.state.settings).currency_symb_loc){case"left":t=n.currency_symb+" "+t;break;case"right":t+=n.currency_symb}return t},E=function(e,t){if(!document.getElementById(e)){switch(e.split(".").slice(-1)[0]){case"js":var n=document.createElement("script");n.setAttribute("src",e),n.id=e,n.onload=n.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||"function"==typeof t&&t.call()},document.body.appendChild(n);break;case"css":var a=document.getElementsByTagName("head")[0],o=document.createElement("link");o.id=e,o.rel="stylesheet",o.type="text/css",o.href=e,a.appendChild(o)}return!0}"function"==typeof t&&t.call()},A=n((function t(n){var o=this;e(this,t),a(this,"loadImages",(function(e){for(var t=o,n=document,a=L(),c=y(),l="",i=0;i<5;i++){var s=void 0!==e.img&&"true"==e.img[i]?"https://preview.kenzap.cloud/S"+y()+"/_site/images/"+o.state.slug+"-"+e.id+"-"+(i+1)+"-100x100.webp?"+e.updated:"https://account.kenzap.com/images/placeholder.jpg";l+='\n          <div class="p-img-cont float-start">\n            <p data-index="'.concat(d(i),'">\n              <img class="p-img images-').concat(d(i),' rounded-3 img-pick" data-index="').concat(d(i),'" width="120" height="120" src="').concat(d(s),'" />\n              <span class="remove img-rem hd" title="').concat(m("Remove"),'">×</span>\n            </p>\n            <input type="file" name="img[]" data-type="search" data-slug="').concat(d(t.state.slug+"-"+a+"-"+(i+1)),'" data-sizes="1000|500|250|100x100" data-index="').concat(d(i),'" class="file aif-').concat(d(i),' img-file d-none">\n          </div>')}n.querySelector(".ic").innerHTML=l;var r=void 0!==e.vendor.logo&&1==e.vendor.logo?"https://preview.kenzap.cloud/S"+y()+"/_site/images/"+d(o.state.slug+"-"+e.id)+"-vendor-logo-100x100.webp?"+d(e.updated):"https://account.kenzap.com/images/placeholder.jpg",u="vendor-logo";n.querySelector(".ic-vendor-logo").innerHTML='\n        <div class="p-img-cont float-start">\n          <p data-index="'.concat(d(u),'">\n            <img class="v-img images-').concat(d(u),' rounded-3 img-pick" data-index="').concat(d(u),'" width="120" height="120" src="').concat(d(r),'" />\n            <span class="remove img-rem hd" title="').concat(m("Remove"),'">×</span>\n          </p>\n          <input type="file" name="img[]" data-type="search" data-index="').concat(d(u),'" data-slug="').concat(d(t.state.slug+"-"+a+"-"+u),'" data-sizes="100x100" class="file aif-').concat(d(u),' img-file d-none">\n        </div>'),w(".img-pick",t.openImage),w(".img-rem",t.removeImage),x(".img-file",t.previewImage),[0,1,2,3,4,"vendor-logo"].map((function(t){var l=CDN+"/S"+c+"/"+o.state.slug+"-"+a+"-"+(isNaN(t)?t:parseInt(t)+1)+"-100x100.webp?"+e.updated;console.log(l),setTimeout((function(t,a,o){var c=!0;if(isNaN(o)||void 0!==e.img&&(e.img[o]||(c=!1)),c){var l=new Image;l.onload=function(){n.querySelector(a+o).setAttribute("src",t),n.querySelector(a+o).parentElement.querySelector(".remove").classList.remove("hd")},l.src=t}}),300,l,".images-",t)}))})),a(this,"openImage",(function(e){e.preventDefault(),S(document.querySelector(".aif-"+e.currentTarget.dataset.index))})),a(this,"previewImage",(function(e){console.log("preview"),e.preventDefault();var t=e.currentTarget;if(t.files&&t.files[0]){if("image/jpeg"!=t.files[0].type&&"image/jpg"!=t.files[0].type&&"image/png"!=t.files[0].type&&"image/webp"!=t.files[0].type)return void q(m("Please provide image in JPEG, PNG or WEBP format"));if(t.files[0].size>5e6)return void q(m("Please provide image less than 5 MB in size"));var n=t.dataset.index,a=new FileReader;a.onload=function(e){document.querySelector(".images-"+n).setAttribute("src",e.currentTarget.result)},a.readAsDataURL(t.files[0]),e.currentTarget.parentElement.querySelector(".remove").classList.remove("hd")}})),a(this,"removeImage",(function(e){var t=e.currentTarget.parentElement.dataset.index;document.querySelector(".aif-"+t).value="",document.querySelector(".images-"+t).setAttribute("src","https://account.kenzap.com/images/placeholder.jpg"),e.currentTarget.classList.add("hd")})),a(this,"uploadImages",(function(){document.querySelector(".imgupnote")&&document.querySelector(".imgupnote").remove();var e,t=i(document.querySelectorAll(".img-file"));try{for(t.s();!(e=t.n()).done;){var n=e.value;1;var a=L(),c=y(),l=n.files[0];if(void 0!==l){var s=new FormData;s.append("id",a),s.append("sid",c),s.append("pid",a),s.append("key","image"),s.append("sizes",n.dataset.sizes),s.append("file",l),s.append("slug",n.dataset.slug),s.append("token",h("kenzap_token")),l.value="",o.state.ajaxQueue+=1,fetch("https://api-v1.kenzap.cloud/upload/",{body:s,method:"post"}).then((function(e){return e.json()})).then((function(e){o.state.ajaxQueue-=1,e.success&&0==o.state.ajaxQueue&&(q(m("Event updated")),v())}))}}}catch(e){t.e(e)}finally{t.f()}0==o.state.ajaxQueue&&(q(m("Event updated")),v())})),this.state={slug:"event",data:n,ajaxQueue:0},this.loadImages(n)})),C=n((function t(n,o){var c=this;e(this,t),a(this,"init",(function(){for(var e in c.state.data.variations){var t=c.state.data.variations[e],n=[];n.title=t.title,n.id=t.id,n.price=t.price,n.type=t.type,n.stock=t.stock?t.stock:0,n.booked=t.booked?t.booked:0,n.features=t.features?t.features:"",n.layout=t.layout?t.layout:"",n.layoutid=t.layoutid?t.layoutid:"",n.index=e,document.querySelector(".variation-blocks").innerHTML+=c.structMixBlock(n)}})),a(this,"listeners",(function(){w(".add-mix-block",c.addMixBlock),w(".edit-block",c.editBlock),w(".remove-block",c.removeBlock)})),a(this,"editBlock",(function(e){e.preventDefault();var t=document.querySelector(".add-mix-block");t.dataset.action="edit",t.dataset.index=e.currentTarget.dataset.index,console.log("editBlock index"+e.currentTarget.dataset.index),setTimeout((function(){return S(t)}),10)})),a(this,"removeBlock",(function(e){e.preventDefault(),confirm(m("Remove package?"))&&e.currentTarget.parentNode.parentNode.remove()})),a(this,"addMixBlock",(function(e){var t=c;e.preventDefault();var n=e.currentTarget.dataset.action,a=e.currentTarget.dataset.index;e.currentTarget.dataset.action="add";var o=m("Add Package"),l={id:T(),title:"",price:0,stock:100,type:"visible",features:"",layout:!1,layoutid:""};"edit"==n&&(o=m("Edit Package"),l.id=document.querySelector(".var-block[data-index='"+a+"']").dataset.id,l.title=document.querySelector(".var-block[data-index='"+a+"']").dataset.title,l.price=document.querySelector(".var-block[data-index='"+a+"']").dataset.price,l.features=document.querySelector(".var-block[data-index='"+a+"']").dataset.features,l.layout=document.querySelector(".var-block[data-index='"+a+"']").dataset.layout,l.layoutid=document.querySelector(".var-block[data-index='"+a+"']").dataset.layoutid,l.stock=document.querySelector(".var-block[data-index='"+a+"']").dataset.stock,l.booked=document.querySelector(".var-block[data-index='"+a+"']").dataset.booked,l.type=document.querySelector(".var-block[data-index='"+a+"']").dataset.type,l.id&&"undefined"!=l.id||(l.id=T()),l.price||(l.price=0),l.stock||(l.stock=100),l.features||(l.features=""),"false"==l.layout&&(l.layout=!1));var i=document.querySelector(".p-modal"),s=new bootstrap.Modal(i);i.querySelector(".modal-title").innerHTML=o,i.querySelector(".modal-body").innerHTML='\n            <div class="form-cont">\n                <div class="form-group mb-3">\n                    <label for="packagetitle" class="form-label">'.concat(m("Title"),'</label>\n                    <input type="hidden" class="form-control" id="packageid" value="').concat(l.id,'">\n                    <input type="text" class="form-control" id="packagetitle" autocomplete="off" placeholder="').concat(u("Early Bird"),'" value="').concat(l.title,'">\n                    <p class="form-text">').concat(m("Unique package title."),'</p>\n                </div>\n                <div class="form-group mb-3">\n                    <label for="packageprice" class="form-label">').concat(m("Price"),'</label>\n                    <div class="input-group pe-3">\n                        <span id="p-price-symb" class="input-group-text">').concat(t.state.settings.currency_symb?t.state.settings.currency_symb:"$",'</span>\n                        <input type="text" class="form-control" id="packageprice" autocomplete="off" placeholder="12.00" value="').concat(l.price,'">\n                    </div>\n                    <p class="form-text mb-0">').concat(m("To change currency go to e-commerce > settings."),'</p>\n                </div>\n                <div class="form-group mb-3">\n                    <label for="packagestock" class="form-label">').concat(m("Availability"),'</label>\n                    <div class="input-group pe-3">\n                        <span id="booked" class="input-group-text">').concat(m("%1$ out of",l.booked?l.booked:"0"),' </span>\n                        <input type="hidden" class="form-control" id="packagebooked" value="').concat(l.booked?l.booked:"0",'">\n                        <input type="text" class="form-control" id="packagestock" autocomplete="off" placeholder="1000" value="').concat(l.stock,'">\n                    </div>\n                    <p class="form-text">').concat(m("Number of tickets booked and available for sale under this package."),'</p>\n                </div>\n                <div class="form-group mb-3">\n                    <label for="packagefeatures" class="form-label">').concat(m("Features"),'</label>\n                    <textarea class="form-control inp" id="packagefeatures" placeholder=" " maxlength="200" rows="5">').concat(l.features,'</textarea>\n                    <p class="form-text">').concat(m("Provide one feature per line."),'</p>\n                </div>\n                <div class="form-group mb-3">\n                    <label for="packagetype" class="form-label">').concat(m("Visibility"),'</label>\n                    <select id="packagetype" class="form-control " >\n                        <option ').concat("visible"==l.type?'selected="selected"':"",' value="visible">').concat(m("Visible"),"</option>\n                        <option ").concat("soldout"==l.type?'selected="selected"':"",' value="soldout">').concat(m("Sold out"),"</option>\n                        <option ").concat("hidden"==l.type?'selected="selected"':"",' value="hidden">').concat(m("Hidden"),'</option>\n                    </select>\n                    <p class="form-text">').concat(m("Define how this renders on frontend."),'</p>\n                </div>\n                <div class="form-group mb-3">\n                    <label for="packagelayout" class="form-label">').concat(m("Layout"),'</label>\n                    <div class="form-check">\n                        <input id="packagelayout" class="form-check-input" ').concat(l.layout?'checked="true"':"",' name="packagelayout" type="checkbox" value="0" data-type="checkbox">\n                        <label class="form-check-label" for="packagelayout">\n                            ').concat(m("Custom chart"),'\n                        </label>\n                    </div>\n                    <p class="form-text">').concat(m("Link seating or venue chart with this package."),'</p>\n                </div>\n                <div class="form-group mb-3 packagelayoutid-cont d-none">\n                    <label for="packagelayoutid" class="form-label">').concat(m("Chart name"),'</label>\n                    <select id="packagelayoutid" class="form-control" >\n\n                    </select>\n                    <p class="form-text">').concat(m("You can define new layout in MyTicket &gt; Layouts dashboard."),"</p>\n                </div>\n            </div>"),i.querySelector(".modal-footer").innerHTML='\n            <button type="button" class="btn btn-primary btn-add-package btn-modal" >'.concat(m("edit"==n?"Edit":"Add"),'</button>\n            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">').concat(m("Cancel"),"</button>\n        "),setTimeout((function(){return i.querySelector("#packagetitle").focus()}),100),_("#packageprice",[8,46,190]),_("#packagestock",[8,46]),w(".btn-add-package",(function(e){e.preventDefault();var o={};if(o.index=a,o.id=i.querySelector(".p-modal #packageid").value,o.title=i.querySelector(".p-modal #packagetitle").value,o.price=i.querySelector(".p-modal #packageprice").value,o.type=i.querySelector(".p-modal #packagetype").value,o.booked=i.querySelector(".p-modal #packagebooked").value,o.stock=i.querySelector(".p-modal #packagestock").value,o.features=i.querySelector(".p-modal #packagefeatures").value,o.layout=!!i.querySelector(".p-modal #packagelayout").checked,o.layoutid=i.querySelector(".p-modal #packagelayoutid").value,o.title.length<2)alert(m("Please provide longer title"));else{if("edit"==n){var l=document.createElement("div");l.innerHTML=c.structMixBlock(o),document.querySelector(".var-block[data-index='"+a+"']").dataset.id=o.id,document.querySelector(".var-block[data-index='"+a+"']").dataset.title=d(o.title),document.querySelector(".var-block[data-index='"+a+"']").dataset.price=o.price,document.querySelector(".var-block[data-index='"+a+"']").dataset.type=o.type,document.querySelector(".var-block[data-index='"+a+"']").dataset.booked=o.booked,document.querySelector(".var-block[data-index='"+a+"']").dataset.stock=o.stock,document.querySelector(".var-block[data-index='"+a+"']").dataset.features=d(o.features),document.querySelector(".var-block[data-index='"+a+"']").dataset.layout=o.layout,document.querySelector(".var-block[data-index='"+a+"']").dataset.layoutid=o.layoutid,document.querySelector(".var-block[data-index='"+a+"']").innerHTML=l.querySelector(".var-block").innerHTML,document.querySelector(".var-block[data-index='"+a+"'] .edit-block").dataset.index=o.index,document.querySelector(".var-block[data-index='"+a+"'] .remove-block").dataset.index=o.index}"add"==n&&(o.index=document.querySelectorAll(".var-block").length,null==document.querySelector(".variation-blocks .var-block")?document.querySelector(".variation-blocks").innerHTML=c.structMixBlock(o):document.querySelector(".variation-blocks .var-block:last-of-type").insertAdjacentHTML("afterend",c.structMixBlock(o))),s.hide(),setTimeout((function(){w(".edit-block",t.editBlock),w(".remove-block",t.removeBlock)}),50)}}));var r=function(){fetch("https://api-v1.kenzap.cloud/",{method:"post",headers:g(),body:JSON.stringify({query:{layouts:{type:"find",key:"myticket-layout",fields:["_id","title","updated"]}}})}).then((function(e){return e.json()})).then((function(e){v(),e.success?e.success&&(i.querySelector("#packagelayoutid").innerHTML=e.layouts.map((function(e,t){return"<option ".concat(l.layoutid==e._id?'selected="selected"':"",' value="').concat(e._id,'">').concat(e.title?e.title:e._id,"</option>")})).join("")):k(e)})).catch((function(e){k(e)}))};l.layout&&(i.querySelector(".packagelayoutid-cont").classList.remove("d-none"),r()),x("#packagelayout",(function(e){e.currentTarget.checked?(i.querySelector(".packagelayoutid-cont").classList.remove("d-none"),r()):i.querySelector(".packagelayoutid-cont").classList.add("d-none")})),s.show()})),a(this,"addMixOption",(function(e){var t=e.currentTarget;e.preventDefault();var n=document.querySelector(".p-modal"),a=new bootstrap.Modal(n);a.show(),n.querySelector(".modal-title").innerHTML=m("Add Variation"),n.querySelector(".btn-primary").innerHTML=m("Add"),n.querySelector(".btn-secondary").innerHTML=m("Cancel");var o='\n        <div class="form-cont">\n            <div class="form-group">\n                <label for="mtitle" class="form-label">'.concat(m("Title"),'</label>\n                <input type="text" class="form-control" id="mtitle" autocomplete="off" placeholder="').concat(m("Brown rice"),'">\n            </div>\n            <div class="form-group mt-3">\n                <label for="mprice" class="form-label">').concat(m("Price"),'</label>\n                <div class="input-group mb-3">\n                    <span class="input-group-text">$</span>\n                    <input id="mprice" type="text" class="form-control" placeholder="0.00" value="" >\n                    <p class="form-text">').concat(m("You can change default currency under Dashboard &gt; Settings."),"</p>\n                </div>\n            </div>\n        </div>");n.querySelector(".modal-body").innerHTML=o,setTimeout((function(){return n.querySelector("#mtitle").focus()}),100),c.listeners.modalSuccessBtnFunc=function(e){e.preventDefault();var o=n.querySelector(".p-modal #mtitle").value,l=n.querySelector(".p-modal #mprice").value;if(o.length<2)alert("Please provide longer title");else{var i=[];i.title=o,i.price=l,i.type=t.parentElement.parentElement.dataset.type;var s=".var-block[data-index='"+t.parentElement.parentElement.dataset.index+"']";null==document.querySelector(s+" .offer-pricef li")?document.querySelector(s+" .offer-pricef").innerHTML=c.structMixRow(i):document.querySelector(s+" .offer-pricef li:last-of-type").insertAdjacentHTML("afterend",c.structMixRow(i)),a.hide(),setTimeout((function(){return c.initListeners("partial")}),10)}}})),a(this,"removeOption",(function(e){e.preventDefault(),confirm("Remove option?")&&e.currentTarget.parentElement.remove()})),a(this,"structMixBlock",(function(e){return'\n            <div class="mb-4 var-block mw" data-id="'.concat(d(e.id),'" data-title="').concat(d(e.title),'" data-type="').concat(d(e.type),'" data-booked="').concat(d(e.booked),'" data-stock="').concat(d(e.stock),'" data-price="').concat(d(e.price),'" data-features="').concat(d(e.features),'" data-layout="').concat(d(e.layout),'" data-layoutid="').concat(d(e.layoutid),'" data-index="').concat(d(e.index),'" >\n                <label for="offer-pricef" class="form-label pb-2"><span class="title me-2">').concat(d(e.title),'</span> <span class="price">').concat(z(c,e.price),'</span>\n                    &nbsp;&nbsp;\n                    <svg class="bi bi-pencil-fill edit-block ms-3" title="edit block" data-index="').concat(d(e.index),'" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">\n                        <path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"/>\n                    </svg>\n                    <svg class="bi bi-trash remove-block ms-3" title="edit block" data-index="').concat(d(e.index),'"  xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#ff0079" viewBox="0 0 16 16">\n                        <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"></path>                        <path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"></path>\n                    </svg>\n                </label>\n                <div class="list-wrapper">\n                    <ul class="d-flex flex-column-reverse offer-pricef form-text" >\n                        ').concat(e.features.split("\n").map((function(e,t){return"<li>".concat(d(e),"</li>")})).join(""),"\n                    </ul>\n                </div>\n            </div>")})),a(this,"structMixRow",(function(e){return'\n            <li data-title="'.concat(d(e.title),'" data-price="').concat(d(e.price),'" data-cond="" class="pt-2 pb-2"><div class="form-check"><label class="form-check-label form-label"><input class="').concat(d(e.type),' form-check-input" type="').concat(d(e.type),'" checked="" data-ft="').concat(d(e.title),'">').concat(d(e.title)," &nbsp;&nbsp;&nbsp; ").concat(z(c,e.price),'</label></div>\n                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#ff0079" class="remove-option bi bi-x-circle" viewBox="0 0 16 16">                    <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>\n                    <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>\n                </svg>\n            </li>')})),this.state={slug:"event",data:o,settings:n,ajaxQueue:0},this.init(),this.listeners()})),H=function(e,t){if(!t)throw new Error("DOM Element is undifined! Please choose HTML target element.");var n,a,o,c,l,i,s=t;function r(){n.innerHTML="",c.forEach((function(e,t){if(e=e.trim()){var a=document.createElement("li");a.innerHTML="".concat(e," <a>&times;</a>"),a.querySelector("a").addEventListener("click",(function(){var e;e=t,c=c.filter((function(t,n){return n!==e&&t})),r()})),n.appendChild(a)}})),s.setAttribute("data-simple-tags",c.toString())}o=(o=s.getAttribute("data-simple-tags")).split(","),c=o.map((function(e){return e.trim()})),l=document.createElement("ul"),(i=document.createElement("input")).setAttribute("placeholder",e("new category")),s.appendChild(l),s.appendChild(i),n=s.firstElementChild,a=s.lastElementChild,r(),a.addEventListener("keyup",(function(e){var t=this.value.trim();(t.includes(",")||13===e.keyCode)&&(""!==t.replace(",","")&&c.push(t.replace(",","")),this.value=""),r()}))},V=function(e){window.initAutocomplete=function(){var t,n;console.log("initAutocomplete");var a=new google.maps.Map(document.getElementById("event_map"),{center:{lat:1.3522662,lng:103.8456135},zoom:11,mapTypeId:"roadmap",streetViewControl:!1,mapTypeControl:!1,fullscreenControl:!1});n=document.querySelector(".eventlocation"),t=new google.maps.places.SearchBox(n,{componentRestrictions:{country:["id"]},fields:["address_components","geometry","name"],types:["address"]}),a.addListener("bounds_changed",(function(){t.setBounds(a.getBounds())}));var o=[];t.addListener("places_changed",(function(){var n=t.getPlaces();if(0!=n.length){o.forEach((function(e){e.setMap(null)})),o=[];var c=new google.maps.LatLngBounds;n.forEach((function(t){if(t.geometry&&t.geometry.location){var n={url:t.icon,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(25,25)};o.push(new google.maps.Marker({map:a,icon:n,title:t.name,position:t.geometry.location})),t.geometry.viewport?c.union(t.geometry.viewport):c.extend(t.geometry.location),e.rating=t.rating,e.reviews=t.reviews,console.log(t),console.log(t.geometry.location)}else console.log("Returned place contains no geometry")})),a.fitBounds(c)}}))},function(e,t,n,a){if(document.getElementById(e))"function"==typeof a&&a.call();else switch(t){case"js":var o=document.createElement("script");o.setAttribute("src",e),o.id="addon"+n,o.onload=o.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||"function"==typeof a&&a.call()},document.body.appendChild(o);break;case"css":var c=document.getElementsByTagName("head")[0],l=document.createElement("link");l.id=e,l.rel="stylesheet",l.type="text/css",l.href=e,c.appendChild(l)}}("https://maps.googleapis.com/maps/api/js?key=AIzaSyDeFSWQfA18NwUammRut5D9LkAgjkNnshQ&callback=initAutocomplete&libraries=places&v=weekly","js","10"),window.googleMapsLoaded=!0},B=n((function t(){var n=this;e(this,t),a(this,"getData",(function(){p();var e=L();fetch("https://api-v1.kenzap.cloud/",{method:"post",headers:g(),body:JSON.stringify({query:{user:{type:"authenticate",fields:["avatar"],token:h("kenzap_token")},event:{type:"find",key:"myticket-event",id:e,fields:["_id","id","img","status","eventbegins","eventends","eventvenue","eventlocation","tagline","price","vendor","discounts","variations","title","sdesc","ldesc","stock","cats","updated"]},settings:{type:"get",key:"ecommerce-settings",fields:["currency","currency_symb","currency_symb_loc","tax_calc","tax_auto_rate","tax_rate","tax_display","scripts_event_edit","addons"]},locale:{type:"locale",source:["extension"],key:"myticket"}}})}).then((function(e){return e.json()})).then((function(e){var t;if(console.log(e),v(),e.success){if(e.success){if(n.state.response=e,n.state.settings=e.settings,(e=>{if(e.header&&localStorage.setItem("header",e.header),!document.querySelector("#k-script")){let e=document.createElement("div");e.innerHTML=localStorage.getItem("header"),e=e.firstChild,document.body.prepend(e),Function(document.querySelector("#k-script").innerHTML).call("test")}e.locale&&window.i18n.init(e.locale)})(e),document.querySelector("#contents").innerHTML='\n  <div class="container p-edit">\n    <div class="d-flex justify-content-between bd-highlight mb-3">\n        <nav class="bc" aria-label="breadcrumb"></nav>\n        \n    </div>\n    <div class="row">\n        <div class="col-lg-9 grid-margin grid-margin-lg-0 grid-margin-md-0 stretch-card">\n            <div class="sections" id="sections" role="tablist" style="width:100%;">\n\n                <div class="row">\n                    <div class="col-12 grid-margin stretch-card">\n                        <div class="card border-white shadow-sm p-sm-3">\n                            <div class="card-body">\n\n                                <div class="landing_status"></div>\n                                <input type="hidden" class="form-control" id="landing-slug" value="">\n\n                                <h4 id="elan" class="card-title mb-4">'.concat(m("Description"),'</h4>\n\n                                <div id="placeholders">\n\n                                    <div class="mb-4">\n                                        <label class="banner-title-l form-label" for="p-title">').concat(m("Title"),'</label>\n                                        <input type="text" class="form-control inp" id="p-title" placeholder="').concat(u("Sushi set.."),'">\n                                        <p class="form-text">').concat(m("Main title of the event."),'</p>\n                                    </div>\n\n                                    <div class="mb-4">\n                                        <label class="banner-descshort-l form-label" for="p-sdesc">').concat(m("Short Description"),'</label>\n                                        <textarea class="form-control inp" id="p-sdesc" placeholder=" " maxlength="200" rows="3"></textarea>\n                                        <p class="form-text">').concat(m("Short description of the event, mainly used by search engines or during checkout."),'</p>\n                                    </div>\n\n                                    <div class="mb-4">\n                                        <div id="status-cont" class="row">\n                                            <div class="col-sm-6">\n                                                <label class="banner-descshort-l form-label d-flex align-items-center" for="eventbegins">').concat(m("Event Starts"),'\n                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#6c757d" class="bi bi-calendar2-date ms-2 text-dark" viewBox="0 0 16 16">\n                                                    <path d="M6.445 12.688V7.354h-.633A12.6 12.6 0 0 0 4.5 8.16v.695c.375-.257.969-.62 1.258-.777h.012v4.61h.675zm1.188-1.305c.047.64.594 1.406 1.703 1.406 1.258 0 2-1.066 2-2.871 0-1.934-.781-2.668-1.953-2.668-.926 0-1.797.672-1.797 1.809 0 1.16.824 1.77 1.676 1.77.746 0 1.23-.376 1.383-.79h.027c-.004 1.316-.461 2.164-1.305 2.164-.664 0-1.008-.45-1.05-.82h-.684zm2.953-2.317c0 .696-.559 1.18-1.184 1.18-.601 0-1.144-.383-1.144-1.2 0-.823.582-1.21 1.168-1.21.633 0 1.16.398 1.16 1.23z"/>\n                                                    <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM2 2a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1H2z"/>\n                                                    <path d="M2.5 4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5H3a.5.5 0 0 1-.5-.5V4z"/>\n                                                </svg>\n                                                </label>\n                                                <div class="d-flex align-items-center eventBegins">\n                                                    <input id="eventbegins" type="text" class="form-control bg-transparent text-dark fs-6" style="max-width:220px;color:#6c757d;font-size: 12px;" value="" placeholder=" " value="" autocomplete="off" >\n                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#6c757d" class="bi bi-cloud-download po ms-2 d-none" viewBox="0 0 16 16">\n                                                        <path d="M4.406 1.342A5.53 5.53 0 0 1 8 0c2.69 0 4.923 2 5.166 4.579C14.758 4.804 16 6.137 16 7.773 16 9.569 14.502 11 12.687 11H10a.5.5 0 0 1 0-1h2.688C13.979 10 15 8.988 15 7.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 2.825 10.328 1 8 1a4.53 4.53 0 0 0-2.941 1.1c-.757.652-1.153 1.438-1.153 2.055v.448l-.445.049C2.064 4.805 1 5.952 1 7.318 1 8.785 2.23 10 3.781 10H6a.5.5 0 0 1 0 1H3.781C1.708 11 0 9.366 0 7.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383z"/>\n                                                        <path d="M7.646 15.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 14.293V5.5a.5.5 0 0 0-1 0v8.793l-2.146-2.147a.5.5 0 0 0-.708.708l3 3z"/>\n                                                    </svg>\n                                                </div>\n                                            </div>\n            \n                                            <div class="col-sm-6">\n                                                <label class="banner-descshort-l form-label d-flex align-items-center" for="eventends">').concat(m("Event Ends"),'\n                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#6c757d" class="bi bi-calendar2-date ms-2 text-dark" viewBox="0 0 16 16">\n                                                    <path d="M6.445 12.688V7.354h-.633A12.6 12.6 0 0 0 4.5 8.16v.695c.375-.257.969-.62 1.258-.777h.012v4.61h.675zm1.188-1.305c.047.64.594 1.406 1.703 1.406 1.258 0 2-1.066 2-2.871 0-1.934-.781-2.668-1.953-2.668-.926 0-1.797.672-1.797 1.809 0 1.16.824 1.77 1.676 1.77.746 0 1.23-.376 1.383-.79h.027c-.004 1.316-.461 2.164-1.305 2.164-.664 0-1.008-.45-1.05-.82h-.684zm2.953-2.317c0 .696-.559 1.18-1.184 1.18-.601 0-1.144-.383-1.144-1.2 0-.823.582-1.21 1.168-1.21.633 0 1.16.398 1.16 1.23z"/>\n                                                    <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM2 2a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1H2z"/>\n                                                    <path d="M2.5 4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5H3a.5.5 0 0 1-.5-.5V4z"/>\n                                                </svg>\n                                                </label>\n                                                <div class="d-flex align-items-center eventEnds">\n                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#6c757d" class="bi bi-calendar2-date me-1 d-none" viewBox="0 0 16 16">\n                                                        <path d="M6.445 12.688V7.354h-.633A12.6 12.6 0 0 0 4.5 8.16v.695c.375-.257.969-.62 1.258-.777h.012v4.61h.675zm1.188-1.305c.047.64.594 1.406 1.703 1.406 1.258 0 2-1.066 2-2.871 0-1.934-.781-2.668-1.953-2.668-.926 0-1.797.672-1.797 1.809 0 1.16.824 1.77 1.676 1.77.746 0 1.23-.376 1.383-.79h.027c-.004 1.316-.461 2.164-1.305 2.164-.664 0-1.008-.45-1.05-.82h-.684zm2.953-2.317c0 .696-.559 1.18-1.184 1.18-.601 0-1.144-.383-1.144-1.2 0-.823.582-1.21 1.168-1.21.633 0 1.16.398 1.16 1.23z"/>\n                                                        <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM2 2a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1H2z"/>\n                                                        <path d="M2.5 4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5H3a.5.5 0 0 1-.5-.5V4z"/>\n                                                    </svg>\n                                                    <input id="eventends" type="text" class="form-control bg-transparent text-dark fs-6" style="max-width:220px;color:#6c757d;font-size: 12px;" value="" placeholder=" " value="" autocomplete="off" >\n                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#6c757d" class="bi bi-cloud-download po ms-2 d-none" viewBox="0 0 16 16">\n                                                        <path d="M4.406 1.342A5.53 5.53 0 0 1 8 0c2.69 0 4.923 2 5.166 4.579C14.758 4.804 16 6.137 16 7.773 16 9.569 14.502 11 12.687 11H10a.5.5 0 0 1 0-1h2.688C13.979 10 15 8.988 15 7.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 2.825 10.328 1 8 1a4.53 4.53 0 0 0-2.941 1.1c-.757.652-1.153 1.438-1.153 2.055v.448l-.445.049C2.064 4.805 1 5.952 1 7.318 1 8.785 2.23 10 3.781 10H6a.5.5 0 0 1 0 1H3.781C1.708 11 0 9.366 0 7.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383z"/>\n                                                        <path d="M7.646 15.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 14.293V5.5a.5.5 0 0 0-1 0v8.793l-2.146-2.147a.5.5 0 0 0-.708.708l3 3z"/>\n                                                    </svg>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <p class="form-text">').concat(m("Main date of the event."),'</p>\n                                    </div>\n\n                                    <div class="mb-4">\n                                        <label class="banner-descshort-l form-label" for="desc">').concat(m("Images"),'</label>\n                                        <div class="clearfix"></div>\n                                        <div class="ic"></div>\n                                        <div class="clearfix"></div>\n                                        <p class="form-text">').concat(m("Listing images, make sure that the image aspect ratio matches when listing events online."),'</p>\n                                    </div>\n\n                                    <div class="mb-4">\n                                        <label class="banner-descshort-l form-label" for="p-desc">').concat(m("Description"),'</label>\n                                        <div id="toolbar"></div>\n                                        <div id="editor" class="richtext-input"></div>\n                                        <textarea type="text" class="form-control d-none inp" style="min-height: 250px;" id="p-ldesc" name="p-ldesc" placeholder="" value="" maxlength="5000" autocomplete="off" rows="15"></textarea>\n                                    </div>\n\n                                    <div class="mb-4 mw">\n                                        <div class="list-wrapper">\n                                            <ul class="d-flex flex-column-reverse features"> </ul>\n                                        </div>\n                                        <p class="form-text"> </p>\n                                    </div>\n\n                                    <div class="price_group mt-3 mb-4">\n                                        <h4 class="card-title mb-3">').concat(m("Price"),'</h4>\n                                        <div class="price_group_base">\n                                            <div class="mb-3">\n\n                                                <div class="input-group d-none">\n                                                    <div id="p-price-c">\n                                                        <label for="p-price" class="form-label">').concat(m("Default"),' <span class="lang"></span></label>\n                                                        <div class="input-group pe-3 mb-3">\n                                                            <span id="p-price-symb" class="input-group-text">$</span>\n                                                            <input id="p-price" type="text" class="form-control inp" placeholder="55.00" autocomplete="off">\n                                                        </div>\n                                                    </div>\n                                                    <div id="p-priced-c" class="d-flex align-content-end flex-wrap">\n                                                        <a class="btn btn-outline-secondary mb-3 add-discount" href="#" role="button" id="btn-discount" >\n                                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-plus" viewBox="0 0 16 16"><path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/></svg>\n                                                            ').concat(m("discount"),'\n                                                        </a>\n                                                        <div class="d-none">\n                                                            <label for="p-priced pe-3 mb-3" class="form-label">').concat(m("Discounted"),' <span class="lang"></span></label>\n                                                            <input id="p-priced" type="text" class="form-control" placeholder="45.00" autocomplete="off">\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                                \n                                                <div class="discount-blocks mw d-none">\n                                                    <label class="discount-list form-label" for="discount-list ">').concat(m("Discount list"),'</label>\n                                                    <ul class="mb-4">\n                                               \n                                                    </ul>\n                                                </div>\n\n                                                <div class="add-mix-ctn text-left mt-3 mb-2"><a class="add-mix-block" href="#" data-action="add">').concat(m("+ add package"),'</a></div>\n                                            </div>\n\n                                            <div class="variation-blocks">\n                        \n                                            </div>\n\n                                            <div style=\'margin:24px 0 48px;border-bottom:0px solid #ccc;\'></div>\n                                        </div>\n                                    </div>\n\n                                    <div class="mb-5 mw">\n                                        <h4 id="location-title" class="card-title ">').concat(m("Location"),'</h4>\n                                        <div class="mb-3">\n                                            <div class="btn-group" role="group" aria-label="Event venue location">\n                                                <input type="radio" class="btn-check eventvenue" name="eventvenue" id="physical_event" autocomplete="off" value="physical" checked>\n                                                <label class="btn btn-outline-primary" for="physical_event">Physical Venue</label>\n                                                <input type="radio" class="btn-check eventvenue" name="eventvenue" id="online_event" autocomplete="off" value="online">\n                                                <label class="btn btn-outline-primary" for="online_event">Online Event</label>\n                                            </div>\n                                        </div>\n                                        <div class="eventlocation-cont">\n                                            <label for="eventlocation" class="form-label">').concat(m("Address"),'</label>\n                                            <input id="eventlocation" type="text" style="width:100%;" class="form-control inp eventlocation mb-2" placeholder="" maxlength="200">\n                                            <div class="mb-4">\n                                                <div id="event_map" class="rounded-3" style="min-height:260px;margin-bottom: 16px;"></div>\n                                                <p class="form-text">').concat(m("Search event location by map."),'</p>\n                                            </div>\n                                        </div>\n                                    </div>\n\n                                    <div class="mb-3 mw">\n                                        <h4 id="elan" class="card-title mb-3">').concat(m("Vendor"),'</h4>\n                                        <label for="vendor_id" class="form-label">').concat(m("Vendor ID"),'</label>\n                                        <div class="input-group">\n                                            <input id="vendor_id" type="text" style="width:100%;" class="form-control" placeholder="" maxlength="200">\n                                            <p class="form-text">').concat(m("Vendor identification number."),'</p>\n                                        </div>\n                                    </div>\n\n                                    <div class="mb-3 mw">\n                                        <label for="vendor_name" class="form-label">').concat(m("Vendor Name"),'</label>\n                                        <div class="input-group">\n                                            <input id="vendor_name" type="text" style="width:100%;" class="form-control" placeholder="" maxlength="200">\n                                            <p class="form-text">').concat(m("Vendor brand name."),'</p>\n                                        </div>\n                                    </div>\n\n                                    <div class="mb-3 mw">\n                                        <label for="vendor_logo class="form-label">').concat(m("Vendor Logo"),'</label>\n                                        <div class="clearfix"></div>\n                                        <div class="ic-vendor-logo"></div>\n                                        <div class="clearfix"></div>\n                                        <p class="form-text">').concat(m("Vendor brand or logo."),'</p>\n                                    </div>\n\n                                    <div class="mb-3 mw">\n                                        <label for="vendor_link" class="form-label">').concat(m("Social Link"),'</label>\n                                        <div class="input-group">\n                                            <input id="vendor_link" type="text" style="width:100%;" class="form-control" placeholder="" maxlength="200">\n                                            <p class="form-text">').concat(m("Link to any social network."),'</p>\n                                        </div>\n                                    </div>\n\n                                    <div class="mb-3 mw">\n                                        <label class="form-label">').concat(m("Ticket Tagline"),'</label>\n                                        <div class="input-group">\n                                            <input id="ticket_tagline" type="text" style="width:100%;" class="form-control" placeholder="" maxlength="200">\n                                            <p class="form-text">').concat(m("Invoice and email tagline text."),'</p>\n                                        </div>\n                                    </div>\n\n                                    <div class="mb-3 mw d-none">\n                                        <h4 id="stock-title" class="card-title mb-3">').concat(m("Stock"),'</h4>\n                                        <div class="form-check">\n                                            <input id="stock_management" class="form-check-input stock-management" name="stock_management" type="checkbox" value="0" data-type="checkbox">\n                                            <label class="form-check-label" for="stock_management">\n                                                ').concat(m("Quantity management"),'\n                                            </label>\n                                        </div>\n                                        <p class="form-text">').concat(m("Enable ticket quantity management."),'</p>\n                                    </div>\n\n                                    <div class="mb-3 mw stock-cont d-none">\n                                        <label class="form-label" for="stock_quantity">').concat(m("Ticket quantity"),'</label>\n                                        <input id="stock_quantity" type="text" class="form-control" placeholder="0">\n                                        <p class="form-text">').concat(m("Total number of tickets left."),'</p>\n                                    </div>\n\n                                    <div class="mb-3 mw stock-cont d-none">\n                                        <label class="form-label" for="stock_low_threshold">').concat(m("Low quantity"),'</label>\n                                        <input id="stock_low_threshold" type="text" class="form-control" placeholder="0">\n                                        <p class="form-text">').concat(m("Low quantity threshold."),'</p>\n                                    </div>\n\n                                    <div class="mb-3 mw stock-cont d-none">\n                                        <label class="form-label" >').concat(m("Inventory table"),'</label>\n                                        <div class="inventory-cont">\n\n                                        </div>\n                                        <div class="add-mix-ctn text-left mt-1 mb-2"><a class="add-inventory" href="#" data-action="add" style="font-size: 0.875rem;">').concat(m("+ add inventory"),'</a></div>\n\n                                        <p class="form-text d-none">').concat(m("Low stock threshold."),'</p>\n                                    </div>\n                                </div>\n\n                                <div class="desc-repeater-cont">\n\n                                </div>\n\n                            </div>\n                        </div>\n                    </div>\n\n                </div>\n\n            </div>\n        </div>\n        <div class="col-lg-3 mt-3 mt-lg-0 grid-margin grid-margin-lg-0 grid-margin-md-0">\n\n            <div class="row">\n                <div class="col-12 grid-margin stretch-card">\n                    <div class="card border-white shadow-sm p-sm-3">\n                        <div class="card-body">\n\n                            <h4 class="card-title" style="display:none;">').concat(m("General"),'</h4>\n                            <div class="landing_status"></div>\n                            <input type="hidden" class="form-control" id="landing-slug" value="">\n\n                            <h4 id="elan" class="card-title mb-4">').concat(m("Status"),'</h4>\n                            <div id="status-cont" class="mb-3">\n\n                                <div class="col-sm-12">\n                                    <div class="form-check">\n                                        <label class="form-check-label status-publish form-label">\n                                            <input type="radio" class="form-check-input" name="p-status"\n                                                id="p-status1" value="1">\n                                                ').concat(m("Published"),'\n                                        </label>\n                                    </div>\n                                </div>\n\n                                <div class="col-sm-12">\n                                    <div class="form-check">\n                                        <label class="form-check-label status-draft form-label">\n                                            <input type="radio" class="form-check-input" name="p-status"  id="p-status0" value="0">\n                                            ').concat(m("Draft"),'\n                                        </label>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <h4 id="elan" class="card-title mb-4">').concat(m("Categories"),'</h4>\n                            <div id="p-cats" class="simple-tags mb-4" data-simple-tags=""></div>\n                            <div class="clearfix"> </div>\n\n                            <div class="d-grid gap-2">\n                                <button class="btn btn-primary btn-save" type="button">').concat(m("Save"),'</button>\n                            </div>\n\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n        </div>\n    </div>\n  </div>\n\n  <div class="modal p-modal" tabindex="-1">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <h5 class="modal-title"></h5>\n                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>\n            </div>\n            <div class="modal-body">\n\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-primary btn-modal"></button>\n                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"></button>\n            </div>\n        </div>\n    </div>\n  </div>\n\n  <div class="position-fixed bottom-0 p-2 m-4 end-0 align-items-center">\n    <div class="toast hide align-items-center text-white bg-dark border-0" role="alert" aria-live="assertive"\n        aria-atomic="true" data-bs-delay="3000">\n        <div class="d-flex">\n            <div class="toast-body"></div>\n            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>\n        </div>\n    </div>\n  </div>\n  '),0==e.event.length)return void n.initListeners("all");n.render(e.event),n.initListeners("all"),t=m("MyTicket 2.0.8 by %1$Kenzap%2$. ❤️ Licensed %3$GPLv3%4$.",'<a class="text-muted" href="https://kenzap.com/" target="_blank">',"</a>",'<a class="text-muted" href="https://github.com/kenzap/ecommerce" target="_blank">',"</a>"),document.querySelector("footer .row").innerHTML='\n    <div class="d-sm-flex justify-content-center justify-content-sm-between">\n        <span class="text-muted text-center text-sm-left d-block d-sm-inline-block">'.concat(t,'</span>\n        <span class="float-none float-sm-right d-block mt-1 mt-sm-0 text-center text-muted">').concat("","</span>\n    </div>")}}else k(e)})).catch((function(e){k(e)}))})),a(this,"render",(function(e){var t=document;(e=>{let t='<ol class="breadcrumb mt-2 mb-0">';for(let n of e)void 0===n.link?t+=`<li class="breadcrumb-item">${n.text}</li>`:t+=`<li class="breadcrumb-item"><a href="${n.link}">${n.text}</a></li>`;t+="</ol>",document.querySelector(".bc").innerHTML=t})([{link:f("https://dashboard.kenzap.cloud"),text:m("Home")},{link:f("/"),text:m("MyTicket")},{link:f("/events/"),text:m("Events")},{text:m("Editing")}]),t.querySelector("#p-title").value=e.title,t.querySelector("#p-sdesc").value=e.sdesc,t.querySelector("#p-ldesc").value=e.ldesc,t.querySelector("#ticket_tagline").value=e.tagline,t.querySelector("#p-price").value=e.price,_("#p-price",[8,46,190]),t.querySelector("#p-price-symb").innerHTML=n.state.settings.currency_symb?n.state.settings.currency_symb:"",e.eventvenue&&(t.querySelector("#"+e.eventvenue+"_event").checked=!0,n.setMapVisibility()),t.querySelector("#eventlocation").value=e.eventlocation,e.vendor&&(document.querySelector("#vendor_id").value=e.vendor.id?e.vendor.id:"",document.querySelector("#vendor_name").value=e.vendor.name?e.vendor.name:"",document.querySelector("#vendor_link").value=e.vendor.link?e.vendor.link:""),n.state.images=new A(e),n.state.pricing=new C(n.state.settings,e),document.querySelector(".discount-blocks").dataset.data=encodeURIComponent(JSON.stringify(e.discounts?e.discounts:[])),n.renderDiscounts(),n.initEditor(),n.initCalendar(),e.eventbegins&&(n.state.eventBeginsPicker.setDate(new Date(e.eventbegins).toLocaleDateString()),n.state.eventBeginsPicker.setTime(new Date(e.eventbegins).toLocaleTimeString())),e.eventends&&(n.state.eventEndsPicker.setDate(new Date(e.eventends).toLocaleDateString()),n.state.eventEndsPicker.setTime(new Date(e.eventends).toLocaleTimeString())),V(n.state),e.stock||(e.stock={management:!1,sku:"",qty:0,low_threshold:0,inventory:[]}),document.querySelector("#stock_management").checked=e.stock.management,document.querySelector("#stock_quantity").value=e.stock.qty?M(e.stock.qty):0,document.querySelector("#stock_low_threshold").value=e.stock.low_threshold?M(e.stock.low_threshold):0,document.querySelector("#p-status"+e.status).checked=!0;var a=document.querySelector("#p-cats");e.cats&&a.setAttribute("data-simple-tags",e.cats),new H(__,a)})),a(this,"initListeners",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"partial";"all"==e&&(w(".btn-save",n.listeners.saveEvent),w(".p-modal .btn-primary",n.listeners.modalSuccessBtn)),w(".add-discount",n.listeners.addDiscountBlock),w(".stock-management",n.listeners.stockManagement),w("#physical_event",(function(e){n.setMapVisibility()})),w("#online_event",(function(e){n.setMapVisibility()}))})),a(this,"listeners",{eventDateTimeUpdate:function(e){console.log("dd"),console.log(n.state.eventBeginsPicker.getDate())},removeDiscount:function(e){if(e.preventDefault(),confirm("Remove discount?")){e.currentTarget.parentElement.remove();var t=JSON.parse(decodeURIComponent(document.querySelector(".discount-blocks").dataset.data));t.splice(e.currentTarget.dataset.index,1),document.querySelector(".discount-blocks").dataset.data=encodeURIComponent(JSON.stringify(t))}},addDiscountBlock:function(e){e.preventDefault();var t=e.currentTarget.dataset.action,a=e.currentTarget.dataset.index;e.currentTarget.dataset.action="add";var o=m("Add discount"),c="",l=0,s=m("Add"),r=m("Cancel");"edit"==t&&(o=m("Edit Variation Block"),document.querySelector(".var-block[data-index='"+a+"']").dataset.title,c=document.querySelector(".var-block[data-index='"+a+"']").dataset.type,l=parseInt(document.querySelector(".var-block[data-index='"+a+"']").dataset.required),s=m("Save"));var d=document.querySelector(".p-modal"),u=new bootstrap.Modal(d);d.querySelector(".modal-title").innerHTML=o,d.querySelector(".btn-primary").innerHTML=s,d.querySelector(".btn-secondary").innerHTML=r,u.show();var p='\n            <div class="form-cont">\n                <div class="form-group mb-3">\n                    <div class="row">\n                        <div class="col-lg-6">\n                            <label for="discount-type" class="form-label">'.concat(m("Type"),'</label>\n                            <select id="discount-type" class="form-control" >\n                                <option ').concat("percent"==c?'selected="selected"':"",' value="percent">').concat(m("By percent"),"</option>\n                                <option ").concat("value"==c?'selected="selected"':"",' value="value">').concat(m("By value"),"</option>\n                                <option ").concat("never"==c?'selected="selected"':"",' value="never">').concat(m("never discount"),'</option>\n                            </select>\n                        </div>\n                        <div id="discount-percent-cont" class="col-lg-6">\n                            <label for="discount-percent" class="form-label">').concat(m("Percent %"),'</label>\n                            <input type="text" class="form-control" id="discount-percent" autocomplete="off" placeholder="').concat(m("5"),'">\n                        </div>\n                        <div id="discount-value-cont" class="col-lg-6 d-none">\n                            <label for="discount-value" class="form-label">').concat(m("Value"),'</label>\n                            <input type="text" class="form-control" id="discount-value" autocomplete="off" placeholder="').concat(m("12.00"),'">\n                        </div>\n                    </div>\n                    <p class="form-text discount-hint-cont">').concat(m("Define how big is the discount (numeric value only)."),'</p>\n                    <p class="form-text discount-never-cont d-none">').concat(m("Never apply general discount for this event"),'</p>\n                </div>\n                <div class="discount-availability-cont form-group mb-3">\n                    <label for="discount-availability" class="form-label">').concat(m("Availability"),'</label>\n                    <select id="discount-availability" class="form-control " >\n                        <option ').concat("",' value="admin">').concat(m("Admin"),"</option>\n                        <option ").concat("",' value="always">').concat(m("Always"),"</option>\n                        <option ").concat("",' value="hourly">').concat(m("Hourly"),"</option>\n                        <option ").concat("",' value="weekly">').concat(m("Weekly"),'</option>\n                        <option class="d-none" ').concat("",' value="monthly">').concat(m("Monthly"),'</option>\n                    </select>\n                    <p class="form-text">').concat(m("Restrict discount availability."),'</p>\n                </div>\n                <div id="discount-weekly" class="discount-weekly-cont form-group mb-3 d-none">\n                    <label for="mtype" class="form-label">').concat(m("Days of week"),'</label>\n                    <div class="form-check">\n                        <label for="week-monday" class="form-check-label form-label">\n                            <input id="week-monday" type="checkbox" class="form-check-input " ').concat(1==l?'checked="checked"':"",' value="1">\n                            ').concat(m("Monday"),'\n                        </label>\n                    </div>\n                    <div class="form-check">\n                        <label for="week-tuesday" class="form-check-label form-label">\n                            <input id="week-tuesday" type="checkbox" class="form-check-input" ').concat(1==l?'checked="checked"':"",' value="1">\n                            ').concat(m("Tuesday"),'\n                        </label>\n                    </div>\n                    <div class="form-check">\n                        <label id="week-wednesday" class="form-check-label form-label">\n                            <input id="week-wednesday" type="checkbox" class="form-check-input" ').concat(1==l?'checked="checked"':"",' value="1">\n                            ').concat(m("Wednesday"),'\n                        </label>\n                    </div>\n                    <div class="form-check">\n                        <label id="week-thursday" class="form-check-label form-label">\n                            <input id="week-thursday" type="checkbox" class="form-check-input" ').concat(1==l?'checked="checked"':"",' value="1">\n                            ').concat(m("Thursday"),'\n                        </label>\n                    </div>\n                    <div class="form-check">\n                        <label id="week-friday" class="form-check-label form-label">\n                            <input id="week-friday" type="checkbox" class="form-check-input" ').concat(1==l?'checked="checked"':"",' value="1">\n                            ').concat(m("Friday"),'\n                        </label>\n                    </div>\n                    <div class="form-check">\n                        <label id="week-saturday" class="form-check-label form-label">\n                            <input id="week-saturday" type="checkbox" class="form-check-input" ').concat(1==l?'checked="checked"':"",' value="1">\n                            ').concat(m("Saturday"),'\n                        </label>\n                    </div>\n                    <div class="form-check">\n                        <label id="week-sunday" class="form-check-label form-label">\n                            <input id="week-sunday" type="checkbox" class="form-check-input" ').concat(1==l?'checked="checked"':"",' value="1">\n                            ').concat(m("Sunday"),'\n                        </label>\n                    </div>\n                    <p class="form-text">').concat(m("Days of the week when discount is available."),'</p>\n                </div>\n                <div id="discount-hourly" class="form-group discount-hourly-cont mb-3 d-none">\n                    <div class="row">\n                        <div class="col-lg-6">\n                            <div class="form-group mb-3 mt-1">\n                                <label for="discount-hour-from" class="form-label">').concat(m("From"),'</label>\n                                <input id="discount-hour-from" type="text" class="form-control" maxlength="5" autocomplete="off" placeholder="').concat(m("12:00"),'">\n                            </div>\n                        </div>\n                        <div class="col-lg-6">\n                            <div class="form-group mb-3 mt-1">\n                                <label for="discount-hour-to" class="form-label">').concat(m("To"),'</label>\n                                <input id="discount-hour-to" type="text" class="form-control" maxlength="5" autocomplete="off" placeholder="').concat(m("17:00"),'">\n                            </div>\n                        </div>\n                    </div>\n                    <p class="form-text">').concat(m("Time range when discount is available."),'</p>\n                </div>\n                <div class="form-group discount-note-cont mb-3">\n                    <div class="form-group mb-3 mt-1">\n                        <label for="discount-note" class="form-label">').concat(m("Note"),'</label>\n                        <input id="discount-note" type="text" class="form-control" maxlength="25" autocomplete="off" placeholder="').concat(m(""),'">\n                        <p class="form-text">').concat(m("Example: •happy hour promo."),"</p>\n                    </div>\n                </div> \n            </div>");d.querySelector(".modal-body").innerHTML=p,setTimeout((function(){return d.querySelector("#discount-type").focus()}),100),x("#discount-availability",(function(e){switch(console.log(e.currentTarget.value),e.currentTarget.value){case"admin":case"always":document.querySelector("#discount-weekly").classList.add("d-none"),document.querySelector("#discount-hourly").classList.add("d-none");break;case"hourly":document.querySelector("#discount-weekly").classList.add("d-none"),document.querySelector("#discount-hourly").classList.remove("d-none");break;case"weekly":document.querySelector("#discount-weekly").classList.remove("d-none"),document.querySelector("#discount-hourly").classList.remove("d-none")}})),_("#discount-percent",[8]),_("#discount-value",[8,46]),_("#discount-hour-from",[8,58]),_("#discount-hour-to",[8,58]),x("#discount-type",(function(e){switch(console.log(e.currentTarget.value),document.querySelector(".discount-never-cont").classList.add("d-none"),document.querySelector(".discount-hint-cont").classList.remove("d-none"),document.querySelector(".discount-availability-cont").classList.remove("d-none"),document.querySelector(".discount-hint-cont").classList.remove("d-none"),e.currentTarget.value){case"percent":document.querySelector("#discount-percent-cont").classList.remove("d-none"),document.querySelector("#discount-value-cont").classList.add("d-none");break;case"value":document.querySelector("#discount-percent-cont").classList.add("d-none"),document.querySelector("#discount-value-cont").classList.remove("d-none");break;case"never":document.querySelector("#discount-percent-cont").classList.add("d-none"),document.querySelector("#discount-value-cont").classList.add("d-none"),document.querySelector(".discount-never-cont").classList.remove("d-none"),document.querySelector(".discount-availability-cont").classList.add("d-none"),document.querySelector(".discount-hint-cont").classList.add("d-none")}})),n.listeners.modalSuccessBtnFunc=function(e){e.preventDefault();var t={},a=!0;document.querySelector(".form-cont").classList.add("was-validated"),document.querySelector("#discount-percent").setCustomValidity(""),document.querySelector("#discount-hour-from").setCustomValidity(""),document.querySelector("#discount-hour-to").setCustomValidity("");var o=document.querySelector(".discount-blocks").dataset.data;if(o=o?JSON.parse(decodeURIComponent(o)):[],t.note=document.querySelector("#discount-note").value,t.type=document.querySelector("#discount-type").value,"percent"==t.type?(t.percent=document.querySelector("#discount-percent").value,""==t.percent&&(document.querySelector("#discount-percent").setCustomValidity("Percent field can not be empty."),a=!1)):"value"==t.type?(t.value=document.querySelector("#discount-value").value,""==t.value&&(document.querySelector("#discount-value").setCustomValidity("Value field can not be empty."),a=!1)):"value"==t.type&&(t.value="-"),t.availability=document.querySelector("#discount-availability").value,"always"==t.availability);else if("admin"==t.availability);else if("hourly"==t.availability)t.hours={from:document.querySelector("#discount-hour-from").value,to:document.querySelector("#discount-hour-to").value},t.hours.from.length<2&&(document.querySelector("#discount-hour-from").setCustomValidity("Wrong time format"),a=!1),t.hours.to.length<2&&(document.querySelector("#discount-hour-to").setCustomValidity("Wrong time format"),a=!1);else if("weekly"==t.availability){t.hours={from:document.querySelector("#discount-hour-from").value,to:document.querySelector("#discount-hour-to").value},t.hours.from.length<2&&(document.querySelector("#discount-hour-from").setCustomValidity("Wrong time format"),a=!1),t.hours.to.length<2&&(document.querySelector("#discount-hour-to").setCustomValidity("Wrong time format"),a=!1),t.dow=[];var c,l=i(document.querySelectorAll("#discount-weekly input"));try{for(l.s();!(c=l.n()).done;){var s=c.value;t.dow.push(s.checked)}}catch(e){l.e(e)}finally{l.f()}}a?(o.push(t),document.querySelector(".discount-blocks").dataset.data=encodeURIComponent(JSON.stringify(o)),n.renderDiscounts(),u.hide(),setTimeout((function(){return n.initListeners("partial")}),10)):alert("Please enter all fields correctly.")}},saveEvent:function(e){e.preventDefault();var t={};t.sid=y();var a,o=i(document.querySelectorAll(".inp"));try{for(o.s();!(a=o.n()).done;){var c=a.value;t[c.id.replace("p-","")]=c.value.trim()}}catch(e){o.e(e)}finally{o.f()}t.ldesc=n.state.ldesc,t.tagline=document.querySelector("#ticket_tagline").value,t.cats=[];var l,s=i(document.querySelectorAll("#p-cats ul li"));try{for(s.s();!(l=s.n()).done;){var r=l.value;t.cats.push(r.innerHTML.replace("<a>×</a>","").trim())}}catch(e){s.e(e)}finally{s.f()}t.img=[];var d,u=i(document.querySelectorAll(".p-img"));try{for(u.s();!(d=u.n()).done;){var m=!d.value.getAttribute("src").includes("placeholder");t.img.push(m)}}catch(e){u.e(e)}finally{u.f()}n.state.eventBegins&&(t.eventbegins=n.state.eventBegins),n.state.eventEnds&&(t.eventends=n.state.eventEnds),t.discounts=JSON.parse(decodeURIComponent(document.querySelector(".discount-blocks").dataset.data)),t.stock={inventory:n.state.response.event.stock.inventory},t.stock.management=document.querySelector("#stock_management").checked,t.stock.qty=document.querySelector("#stock_quantity").value,t.stock.low_threshold=document.querySelector("#stock_low_threshold").value,t.status=document.querySelector('input[name="p-status"]:checked').value,t.variations=[];var v,f=0,h=i(document.querySelectorAll(".variation-blocks .var-block"));try{for(h.s();!(v=h.n()).done;){var b=v.value;void 0===t.variations[f]&&(t.variations[f]={id:b.getAttribute("data-id"),title:b.getAttribute("data-title"),type:b.getAttribute("data-type"),stock:b.getAttribute("data-stock"),price:b.getAttribute("data-price"),booked:b.getAttribute("data-booked"),features:b.getAttribute("data-features"),layout:b.getAttribute("data-layout"),layoutid:b.getAttribute("data-layoutid"),data:[]}),f++}}catch(e){h.e(e)}finally{h.f()}t.eventvenue=document.querySelector('input[name="eventvenue"]:checked').value,t.vendor={},t.vendor.id=document.querySelector("#vendor_id").value,t.vendor.name=document.querySelector("#vendor_name").value,t.vendor.link=document.querySelector("#vendor_link").value,t.vendor.logo=!document.querySelector(".v-img").getAttribute("src").includes("placeholder"),t.settings=n.state.settings,n.state.reviews&&(t.maps={reviews:n.state.reviews,rating:n.state.rating});var w=L(),x=y();p(),fetch("https://api-v1.kenzap.cloud/",{method:"post",headers:g(),body:JSON.stringify({query:{event:{type:"update",key:"myticket-event",id:w,sid:x,data:t}}})}).then((function(e){return e.json()})).then((function(e){e.success?n.state.images.uploadImages():k(e)})).catch((function(e){k(e)}))},modalSuccessBtn:function(e){n.listeners.modalSuccessBtnFunc(e)},stockManagement:function(e){},modalSuccessBtnFunc:null}),a(this,"renderDiscounts",(function(){var e=document.querySelector(".discount-blocks").dataset.data,t=[m("Monday"),m("Tuesday"),m("Wednesday"),m("Thursday"),m("Friday"),m("Saturday"),m("Sunday")];e=JSON.parse(decodeURIComponent(e));var a="";e.forEach((function(e,o){var c="value"==e.type?z(n,e.value):e.percent+"% ("+z(n,M(document.querySelector("#p-price").value)*((100-e.percent)/100))+")",l="";switch(e.availability){case"admin":l=m("Admin")+" "+c;break;case"always":l=m("Always")+" "+c;break;case"hourly":l=e.hours.from+"-"+e.hours.to+" "+c;break;case"weekly":e.dow.forEach((function(e,n){l+=1==e?t[n]+" ":""})),l+="<b>"+e.hours.from+"-"+e.hours.to+"</b> "+c}"never"==e.type&&(l=m("Avoid discount calculation for this event.")),a+='\n            <li class="form-text mb-2" >\n                '.concat(l,'\n                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#ff0079" class="remove-discount bi bi-x-circle" data-index=').concat(o,' viewBox="0 0 16 16"><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"></path><path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"></path></svg>\n            </li>')})),""==a?document.querySelector(".discount-list").classList.add("d-none"):document.querySelector(".discount-list").classList.remove("d-none"),document.querySelector(".discount-blocks ul").innerHTML=a,w(".remove-discount",n.listeners.removeDiscount)})),a(this,"initEditor",(function(){var e=n;E("/assets/js/quill-1.3.7.min.js",(function(){var t=document.querySelector(".richtext-input");e.state.quill=new Quill(t,{modules:{toolbar:[["bold","italic","link"],[{list:"ordered"},{list:"bullet"}],[{background:[]}]],clipboard:{}},theme:"snow"}),e.state.quill.clipboard.addMatcher(Node.ELEMENT_NODE,(function(e,t){var n=[];return t.ops.forEach((function(e){e.insert&&"string"==typeof e.insert&&n.push({insert:e.insert})})),t.ops=n,t})),e.state.quill.on("text-change",(function(t,n,a){e.state.quill.container.parentElement.querySelector(".richtext-input");var o=e.state.quill.container.firstChild.innerHTML;e.state.ldesc=o,localStorage.setItem("ldesc",o)})),e.state.quill.container.firstChild.innerHTML=document.querySelector("#p-ldesc").value})),E("/assets/css/quill.snow-1.3.6.css")})),a(this,"setMapVisibility",(function(){switch(document.querySelector('input[name="eventvenue"]:checked').value){case"online":document.querySelector(".eventlocation-cont").classList.add("d-none");break;case"physical":document.querySelector(".eventlocation-cont").classList.remove("d-none")}})),a(this,"initCalendar",(function(){var e=new Date;e.setMonth(e.getMonth()-6),n.state.eventBeginsPicker=new easepick.create({grid:1,calendars:1,format:n.state.dateformat,element:document.querySelector("#eventbegins"),css:["/assets/css/date_picker_core.css","/assets/css/date_picker.css"],plugins:["TimePlugin","LockPlugin"],TimePlugin:{format:"HH:mm"}}),n.state.eventBeginsPicker.on("select",(function(e){var t=easepick.DateTime;n.state.eventBegins=new t(e.detail.date).toJSDate().toJSON(),console.log(n.state.eventBegins)}),{}),n.state.eventEndsPicker=new easepick.create({grid:1,calendars:1,format:n.state.dateformat,element:document.querySelector("#eventends"),css:["/assets/css/date_picker_core.css","/assets/css/date_picker.css"],plugins:["TimePlugin","LockPlugin"],TimePlugin:{format:"HH:mm"}}),n.state.eventEndsPicker.on("select",(function(e){easepick.DateTime,n.state.eventEnds=e.detail.date}),{})})),this.state={ajaxQueue:0,settings:{},images:null,dateformat:"DD-MM-YYYY HH:mm"},this.getData()}));new B}();
