!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,c(a.key),a)}}function t(e,t,n){return(t=c(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,l=function(){};return{s:l,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,s=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){i=!0,c=e},f:function(){try{s||null==n.return||n.return()}finally{if(i)throw c}}}}function c(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}const s=(e,...t)=>{if(0===(e=String(e)).length)return"";return((e,t,...n)=>{let a=(e,t)=>(t.forEach(((t,n)=>{e=e.replace("%"+(n+1)+"$",t)})),e);return void 0===window.i18n||void 0===window.i18n.state.locale.values[e]?a(e,n):a(t(window.i18n.state.locale.values[e]),n)})(e,(e=>e.replace(/[&<>'"]/g,(e=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&apos;",'"':"&quot;"}[e])))),...t)},i=e=>{let t=new URLSearchParams(window.location.search),n=t.get("sid")?t.get("sid"):"",a=-1==e.indexOf("?")?"?sid="+n:"&sid="+n;return e+a},r=()=>{let e=new URLSearchParams(window.location.search);return e.get("sid")?e.get("sid"):""},d=e=>{let t=e+"=",n=decodeURIComponent(document.cookie).split(";");for(let e=0;e<n.length;e++){let a=n[e];for(;" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(t))return a.substring(t.length,a.length)}return""},m=()=>{let e=localStorage.hasOwnProperty("header")&&localStorage.hasOwnProperty("header-version")?localStorage.getItem("header-version"):0,t=window.location.hostname+"/"+r()+"/"+d("locale");return t!=d("check")&&(e=0,console.log("refresh")),((e,t,n)=>{let a="";if(n){let e=new Date;e.setTime(e.getTime()+24*n*60*60*1e3),a=";expires="+e.toUTCString()}document.cookie=e+"="+(escape(t)||"")+a+";path=/;domain=.kenzap.cloud"})("check",t,5),e},p=()=>({Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+d("kenzap_api_key"),"Kenzap-Locale":d("locale")?d("locale"):"en","Kenzap-Header":m(),"Kenzap-Token":d("kenzap_token"),"Kenzap-Sid":r()});d("kenzap_api_key"),d("locale")&&d("locale"),m(),d("kenzap_token"),r();const v=e=>{if(console.log(e),isNaN(e.code)){let t=e;try{t=JSON.stringify(t)}catch(e){}let n=new URLSearchParams;return n.append("cmd","report"),n.append("sid",r()),n.append("token",d("kenzap_token")),n.append("data",t),fetch("https://api-v1.kenzap.cloud/error/",{method:"post",headers:{Accept:"application/json","Content-type":"application/x-www-form-urlencoded"},body:n}),void alert("Can not connect to Kenzap Cloud")}if(401===e.code){if(-1!=window.location.href.indexOf("localhost"))return void alert(e.reason);location.href="https://auth.kenzap.com/?app=65432108792785&redirect="+window.location.href}else alert(e.reason)};var u,f,b,h=function(e){var t=s("MyTicket 2.0.8 by %1$Kenzap%2$. ❤️ Licensed %3$GPLv3%4$.",'<a class="text-muted" href="https://kenzap.com/" target="_blank">',"</a>",'<a class="text-muted" href="https://github.com/kenzap/ecommerce" target="_blank">',"</a>");document.querySelector("footer .row").innerHTML='\n    <div class="d-sm-flex justify-content-center justify-content-sm-between">\n        <span class="text-muted text-center text-sm-left d-block d-sm-inline-block">'.concat(t,'</span>\n        <span class="float-none float-sm-right d-block mt-1 mt-sm-0 text-center text-muted">').concat("","</span>\n    </div>")},y=(u=function e(){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t(this,"getData",(function(){a.state.firstLoad&&(()=>{let e=document.querySelector(".loader");e&&(e.style.display="block")})(),document.querySelector(".search-cont input")&&document.querySelector(".search-cont input").value,fetch("https://api-v1.kenzap.cloud/",{method:"post",headers:p(),body:JSON.stringify({query:{user:{type:"authenticate",fields:["avatar"],token:d("kenzap_token")},users:{type:"users",fields:["id","name"]},locale:{type:"locale",source:["extension"],key:"myticket"},settings:{type:"get",key:"myticket-settings",fields:"*"}}})}).then((function(e){return e.json()})).then((function(e){a.state.settings=e.settings,a.state.user=e.user,(()=>{let e=document.querySelector(".loader");e&&(e.style.display="none")})(),e.success?((e=>{if(e.header&&localStorage.setItem("header",e.header),!document.querySelector("#k-script")){let e=document.createElement("div");e.innerHTML=localStorage.getItem("header"),e=e.firstChild,document.body.prepend(e),Function(document.querySelector("#k-script").innerHTML).call("test")}e.locale&&window.i18n.init(e.locale)})(e),a.html(),a.render(e),a.initListeners(),h(),a.state.firstLoad=!1):v(e)})).catch((function(e){v(e)}))})),t(this,"authUser",(function(e){e.user&&e.user.success})),t(this,"html",(function(){a.state.firstLoad&&(document.querySelector("#contents").innerHTML='\n    <div class="container p-edit">\n        <div class="d-md-flex justify-content-between bd-highlight mb-3">\n            <nav class="bc" aria-label="breadcrumb"></nav>\n            <button class="btn btn-primary btn-save mt-3 mb-1 mt-md-0 mb-md-0" type="button">'.concat(s("Save changes"),'</button>\n        </div>\n        <div class="row">\n            <div class="col-md-12 grid-margin grid-margin-lg-0 grid-margin-md-0 stretch-card">\n              <div class="card border-white shadow-sm p-sm-3 ">\n                <nav class="nav tab-content mb-4" role="tablist">\n                    <div class="nav nav-tabs" id="nav-tab" role="tablist">\n                        <a class="nav-link active" id="nav-notifications-link" data-bs-toggle="tab" data-bs-target="#nav-notifications" type="button" role="tab" aria-controls="nav-notifications" aria-selected="true" href="#">').concat(s("General"),'</a>\n                        <a class="nav-link" id="nav-checkout-link" data-bs-toggle="tab" data-bs-target="#nav-checkout" type="button" role="tab" aria-controls="nav-checkout" aria-selected="true"  href="#">').concat(s("Checkout"),'</a>\n                        <a class="nav-link" id="nav-templates-link" data-bs-toggle="tab" data-bs-target="#nav-templates" type="button" role="tab" aria-controls="nav-templates" aria-selected="true"  href="#">').concat(s("Templates"),'</a>\n                    </div>\n                </nav>\n                <div class="card-body tab-content" id="nav-tabContent">\n                  <div class="tab-pane fade show active" id="nav-notifications" role="tabpanel" aria-labelledby="nav-notifications-link">\n                    \n                    <h4 id="h-general" class="card-title mb-4">').concat(s("General"),'</h4>\n                    <div class="row">\n                      <div class="col-lg-6">\n                        <div class="form-group row mb-3 mt-1">\n                          <label class="col-sm-3 col-form-label">').concat(s("Brand Name"),'</label>\n                          <div class="col-sm-9">\n                            <input id="brand_name" type="text" class="form-control inp" name="brand_name" data-type="text">\n                            <p class="form-text">').concat(s("Used for notifications, mobile  app and tickets."),'</p>\n                          </div>\n                        </div>\n                      </div>\n                      <div class="col-lg-6">\n                        <div class="form-group row mb-3 mt-1 d-none">\n                          <label class="col-sm-3 col-form-label">').concat(s("Auto complete"),'</label>\n                          <div class="col-sm-9">\n                            <select id="auto_complete" class="form-select inp" name="auto_complete" data-type="select">\n                                <option value="">').concat(s("None"),'</option>\n                                <option value="60">').concat(s("1 minute"),'</option>\n                                <option value="300">').concat(s("5 minutes"),'</option>\n                                <option value="1200">').concat(s("20 minutes"),'</option>\n                                <option value="3600">').concat(s("1 hour"),'</option>\n                                <option value="43200">').concat(s("12 hours"),'</option>\n                                <option value="86400">').concat(s("24 hours"),'</option>\n                            </select>\n                            <p class="form-text">').concat(s("Auto complete orders after certain amount of time."),'</p>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n\n                    <h4 id="h-orders" class="card-title mb-4 mt-4">').concat(s("Orders"),'</h4>\n                    <div class="row">\n                      <div class="col-lg-6">\n                        <div class="form-group row mb-3 mt-1">\n                          <label class="col-sm-3 col-form-label">').concat(s("Order ID"),'</label>\n                          <div class="col-sm-9">\n                            <input id="last_order_id" type="text" class="form-control inp" name="last_order_id" data-type="emails">\n                            <p class="form-text">').concat(s("Define next new order ID number."),'</p>\n                          </div>\n                        </div>\n                      </div>\n                      <div class="col-lg-6">\n                        <div class="form-group row mb-3 mt-1 d-none">\n                          <label class="col-sm-3 col-form-label">').concat(s("Auto complete"),'</label>\n                          <div class="col-sm-9">\n                            <select id="auto_complete" class="form-select inp" name="auto_complete" data-type="select">\n                                <option value="">').concat(s("None"),'</option>\n                                <option value="60">').concat(s("1 minute"),'</option>\n                                <option value="300">').concat(s("5 minutes"),'</option>\n                                <option value="1200">').concat(s("20 minutes"),'</option>\n                                <option value="3600">').concat(s("1 hour"),'</option>\n                                <option value="43200">').concat(s("12 hours"),'</option>\n                                <option value="86400">').concat(s("24 hours"),'</option>\n                            </select>\n                            <p class="form-text">').concat(s("Auto complete orders after certain amount of time."),'</p>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n\n                    <h4 id="h-notifications" class="card-title mb-4 mt-4">').concat(s("Notifications"),'</h4>\n                    <div class="row">\n                      <div class="col-lg-6">\n                        <div class="form-group row mb-3 mt-1">\n                          <label class="col-sm-3 col-form-label">').concat(s("New order"),'</label>\n                          <div class="col-sm-9">\n                            <select id="notify_new_order" class="form-select inp" name="notify_new_order" data-type="select">\n                                <option value="">').concat(s("None"),'</option>\n                                <option value="client">').concat(s("Client"),'</option>\n                                <option value="admin">').concat(s("Administrator"),'</option>\n                                <option value="both">').concat(s("Client and administrator"),'</option>\n                            </select>\n                          </div>\n                        </div>\n                      </div>\n                      <div class="col-lg-6">\n                        <div class="form-group row mb-3 mt-1">\n                          <label class="col-sm-3 col-form-label">').concat(s("Emails"),'</label>\n                          <div class="col-sm-9">\n                            <input id="notify_new_order_emails" type="text" class="form-control inp" name="notify_new_order_emails" data-type="emails">\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <div class="row">\n                      <div class="col-lg-6">\n                        <div class="form-group row mb-3 mt-1">\n                          <label class="col-sm-3 col-form-label">').concat(s("Cancelled order"),'</label>\n                          <div class="col-sm-9">\n                            <select id="notify_cancel_order" class="form-select inp" name="notify_cancel_order" data-type="select">\n                                <option value="">').concat(s("None"),'</option>\n                                <option value="client">').concat(s("Client"),'</option>\n                                <option value="admin">').concat(s("Administrator"),'</option>\n                                <option value="both">').concat(s("Client and administrator"),'</option>\n                            </select>\n                          </div>\n                        </div>\n                      </div>\n                      <div class="col-lg-6">\n                        <div class="form-group row mb-3 mt-1">\n                          <label class="col-sm-3 col-form-label">').concat(s("Emails"),'</label>\n                          <div class="col-sm-9">\n                            <input id="notify_cancel_order_emails" type="text" class="form-control inp" name="notify_cancel_order_emails" data-type="emails">\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <div class="row">\n                      <div class="col-lg-6">\n                        <div class="form-group row mb-3 mt-1">\n                          <label class="col-sm-3 col-form-label">').concat(s("Processing order"),'</label>\n                          <div class="col-sm-9">\n                            <select id="notify_proc_order" class="form-select inp" name="notify_proc_order" data-type="select">\n                                <option value="">').concat(s("None"),'</option>\n                                <option value="client">').concat(s("Client"),'</option>\n                                <option value="admin">').concat(s("Administrator"),'</option>\n                                <option value="both">').concat(s("Client and administrator"),'</option>\n                            </select>\n                          </div>\n                        </div>\n                      </div>\n                      <div class="col-lg-6">\n                        <div class="form-group row mb-3 mt-1">\n                          <label class="col-sm-3 col-form-label">').concat(s("Emails"),'</label>\n                          <div class="col-sm-9">\n                            <input id="notify_proc_order_emails" type="text" class="form-control inp" name="notify_proc_order_emails" data-type="emails">\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <div class="row">\n                      <div class="col-lg-6">\n                        <div class="form-group row mb-3 mt-1">\n                          <label class="col-sm-3 col-form-label">').concat(s("Refunded order"),'</label>\n                          <div class="col-sm-9">\n                            <select id="notify_refunded_order" class="form-select inp" name="notify_refunded_order" data-type="select">\n                                <option value="">').concat(s("None"),'</option>\n                                <option value="client">').concat(s("Client"),'</option>\n                                <option value="admin">').concat(s("Administrator"),'</option>\n                                <option value="both">').concat(s("Client and administrator"),'</option>\n                            </select>\n                          </div>\n                        </div>\n                      </div>\n                      <div class="col-lg-6">\n                        <div class="form-group row mb-3 mt-1">\n                          <label class="col-sm-3 col-form-label">').concat(s("Emails"),'</label>\n                          <div class="col-sm-9">\n                            <input id="notify_refunded_order_emails" type="text" class="form-control inp" name="notify_refunded_order_emails" data-type="emails">\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <div class="row">\n                      <div class="col-lg-6">\n                        <div class="form-group row mb-3 mt-1">\n                          <label class="col-sm-3 col-form-label">').concat(s("Completed order"),'</label>\n                          <div class="col-sm-9">\n                            <select id="notify_completed_order" class="form-select inp" name="notify_completed_order" data-type="select">\n                                <option value="">').concat(s("None"),'</option>\n                                <option value="client">').concat(s("Client"),'</option>\n                                <option value="admin">').concat(s("Administrator"),'</option>\n                                <option value="both">').concat(s("Client and administrator"),'</option>\n                            </select>\n                            <p class="form-text">').concat(s("Choose how to trigger notifications."),'</p>\n                          </div>\n                        </div>\n                      </div>\n                      <div class="col-lg-6">\n                        <div class="form-group row mb-3 mt-1">\n                          <label class="col-sm-3 col-form-label">').concat(s("Emails"),'</label>\n                          <div class="col-sm-9">\n                            <input id="notify_completed_order_emails" type="text" class="form-control inp" name="notify_completed_order_emails" data-type="emails">\n                            <p class="form-text d-none">').concat(s("Example: alex@kenzap.com, orders@kenzap.com"),'</p>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <div class="row">\n                      <div class="col-lg-6">\n                        <div class="form-group row mb-3 mt-1">\n                          <label class="col-sm-3 col-form-label">').concat(s("Low stock"),'</label>\n                          <div class="col-sm-9">\n                            <select id="notify_low_stock" class="form-select inp" name="notify_low_stock" data-type="select">\n                                <option value="">').concat(s("None"),'</option>\n                                <option value="dashboard">').concat(s("Via dashboard"),'</option>\n                                <option value="email">').concat(s("Via email"),'</option>\n                                <option value="all">').concat(s("Via dashboard and email"),'</option>\n                            </select>\n                            <p class="form-text">').concat(s("Product low stock notification settings."),'</p>\n                          </div>\n                        </div>\n                      </div>\n                      <div class="col-lg-6">\n                        <div class="form-group row mb-3 mt-1">\n                          <label class="col-sm-3 col-form-label">').concat(s("Emails"),'</label>\n                          <div class="col-sm-9">\n                            <input id="notify_low_stock_emails" type="text" class="form-control inp" name="notify_low_stock_emails" data-type="emails">\n                            <p class="form-text">').concat(s("Example: alex@kenzap.com, orders@kenzap.com"),'</p>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n\n                    <div class="d-none">\n                    <h4 id="h-tax" class="card-title mb-4 mt-4">').concat(s("Tax"),'</h4>\n                    <div class="row">\n                      <div class="col-lg-6">\n                        <div class="form-group row mb-3 mt-1">\n                          <label class="col-sm-3 col-form-label">').concat(s("Tax"),'</label>\n                          <div class="col-sm-9">\n                            <div class="form-check">\n                              <input id="tax_calc" class="form-check-input inp" name="tax_calc" type="checkbox" value="1" data-type="checkbox">\n                              <label class="form-check-label" for="tax_calc">\n                                ').concat(s("Calculate"),'\n                              </label>\n                            </div>\n                            <p class="form-text">').concat(s("Enable tax calculations when processing orders."),'</p>\n                          </div> \n                        </div>\n                      </div>\n          \n                      <div class="col-lg-6">\n                        <div class="form-group row mb-3 mt-1">\n                          <label class="col-sm-3 col-form-label">').concat(s("Geolocation"),'</label>\n                          <div class="col-sm-9">\n                            <div class="form-check">\n                              <input id="tax_percent_auto" class="form-check-input inp" name="tax_percent_auto" type="checkbox" value="1" data-type="checkbox">\n                              <label class="form-check-label" for="tax_percent_auto">\n                                ').concat(s("Auto tax rate"),'\n                              </label>\n                            </div>\n                            <p class="form-text">').concat(s("Automatically detect tax rate whenever applicable."),'</p>\n                          </div> \n                        </div>\n                      </div>\n                    </div>\n\n                    <div class="row">\n                      <div class="col-lg-6">\n                        <div class="form-group row mb-3 mt-1">\n                          <label class="col-sm-3 col-form-label">').concat(s("Percent"),'</label>\n                          <div class="col-sm-9">\n                            <input id="tax_percent" type="text" class="form-control inp" placeholder="21" name="tax_percent" data-type="text">\n                            <p class="form-text">').concat(s("Default tax rate. Example, 9 or 21. Use numeric value."),'</p>\n                          </div>\n                        </div>\n                      </div>\n                      <div class="col-lg-6">\n                        <div class="form-group row mb-3 mt-1">\n                          <label class="col-sm-3 col-form-label">').concat(s("Display"),'</label>\n                          <div class="col-sm-9">\n                            <input id="tax_display" type="text" class="form-control inp" placeholder="VAT" name="tax_display" data-type="text">\n                            <p class="form-text">').concat(s("Tax title. Example, VAT or GST."),'</p>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n\n                    <h4 id="h-fees" class="card-title mb-4 mt-4">').concat(s("Fees"),'</h4>\n                    <div class="row">\n                      <div class="col-lg-6">\n                        <div class="form-group row mb-3 mt-1">\n                          <label class="col-sm-3 col-form-label">').concat(s("Service"),'</label>\n                          <div class="col-sm-9">\n                            <div class="form-check">\n                              <input id="fee_calc" class="form-check-input inp" name="fee_calc" type="checkbox" value="1" data-type="checkbox">\n                              <label class="form-check-label" for="fee_calc">\n                                ').concat(s("Calculate"),'\n                              </label>\n                            </div>\n                            <p class="form-text">').concat(s("Calculate service fee when processing orders."),'</p>\n                          </div> \n                        </div>\n                      </div>\n          \n                      <div class="col-lg-6 d-none">\n                        <div class="form-group row mb-3 mt-1">\n                          <label class="col-sm-3 col-form-label">').concat(s("Geolocation"),'</label>\n                          <div class="col-sm-9">\n                            <div class="form-check">\n                              <input id="tax_auto_rate" class="form-check-input inp" name="tax_auto_rate" type="checkbox" value="1" data-type="checkbox">\n                              <label class="form-check-label" for="tax_auto_rate">\n                                ').concat(s("Auto tax rate"),'\n                              </label>\n                            </div>\n                            <p class="form-text">').concat(s("Automatically detect tax rate whenever applicable."),'</p>\n                          </div> \n                        </div>\n                      </div>\n                    </div>\n\n                    <div class="row">\n                      <div class="col-lg-6">\n                        <div class="form-group row mb-3 mt-1">\n                          <label class="col-sm-3 col-form-label">').concat(s("Percent"),'</label>\n                          <div class="col-sm-9">\n                            <input id="fee_percent" type="text" class="form-control inp" placeholder="5" name="fee_percent" data-type="text">\n                            <p class="form-text">').concat(s("Default fee rate. Example, 5 or 7. Use numeric value."),'</p>\n                          </div>\n                        </div>\n                      </div>\n                      <div class="col-lg-6">\n                        <div class="form-group row mb-3 mt-1">\n                          <label class="col-sm-3 col-form-label">').concat(s("Display"),'</label>\n                          <div class="col-sm-9">\n                            <input id="fee_display" type="text" class="form-control inp" placeholder="Service fee" name="fee_display" data-type="text">\n                            <p class="form-text">').concat(s("Fee title. Example, Service fee."),'</p>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n\n                    <h4 id="h-payment" class="card-title mb-4 mt-4">').concat(s("Payment"),'</h4>\n                    <div class="row">\n                      <div class="col-lg-6">\n                        <div class="form-group row mb-3 mt-1">\n                          <label class="col-sm-3 col-form-label">').concat(s("Methods"),'</label>\n                          <div class="col-sm-9">\n                            <div class="form-check">\n                              <input id="custom_payment_method" class="form-check-input inp" name="custom_payment_method" type="checkbox" value="1" data-type="checkbox">\n                              <label class="form-check-label" for="custom_payment_method">\n                                ').concat(s("Custom methods"),'\n                              </label>\n                            </div>\n                            <p class="form-text">').concat(s("Allow changing of payment method in the dashboard."),'</p>\n                          </div> \n                        </div>\n                      </div>\n          \n                      <div class="col-lg-6">\n                        <div class="form-group row mb-3 mt-1">\n                          <label class="col-sm-3 col-form-label">').concat(s("List of Methods"),'</label>\n                          <div class="col-sm-9">\n                            <textarea id="payment_methods" class="form-control inp" name="payment_methods" rows="4" data-type="text" style="font-size:13px;font-family: monospace;"></textarea>\n                            <p class="form-text">').concat(s("Provide list of available payment methods. Example: PayPal, PayNow."),'</p>\n                          </div> \n                        </div>\n                      </div>\n                    </div>\n\n                    <h4 id="h-discounts" class="card-title mb-4 mt-4">').concat(s("Discounts"),'</h4>\n                    <div class="row">\n                      <div class="col-lg-6">\n                        <div class="form-group row mb-3 mt-1">\n                          <label class="col-sm-3 col-form-label">').concat(s("Coupons"),'</label>\n                          <div class="col-sm-9">\n                            <div class="form-check">\n                              <input id="coupons" class="form-check-input inp" name="coupons" type="checkbox" value="1" data-type="checkbox">\n                              <label class="form-check-label" for="coupons">\n                                ').concat(s("Enable coupons"),'\n                              </label>\n                            </div>\n                            <p class="form-text">').concat(s("Allow use of coupons upon checkout."),'</p>\n                          </div> \n                        </div>\n                      </div>\n          \n                      <div class="col-lg-6">\n                        <div class="form-group row mb-3 mt-1">\n                          <label class="col-sm-3 col-form-label">').concat(s("List of coupons"),'</label>\n                          <div class="col-sm-9">\n                            <textarea id="coupon_list" class="form-control inp" name="coupon_list" rows="2" data-type="text" style="font-size:13px;font-family: monospace;"></textarea>\n                            <p class="form-text">').concat(s("Provide one coupon and its discount rate per line. Example: BESTDEALS 15."),'</p>\n                          </div> \n                        </div>\n                      </div>\n                    </div>\n\n                    <div class="row">\n                      <div class="col-lg-6">\n                        <div class="form-group row mb-3 mt-1">\n                          <label class="col-sm-3 col-form-label">').concat(s("Products"),'</label>\n                          <div class="col-sm-9">\n                            <div class="form-check">\n                              <input id="product_discounts" class="form-check-input inp" name="product_discounts" type="checkbox" value="1" data-type="checkbox">\n                              <label class="form-check-label" for="product_discounts">\n                                ').concat(s("Product discounts"),'\n                              </label>\n                            </div>\n                            <p class="form-text">').concat(s("Enable or disable all discounts defined under individual products page."),'</p>\n                          </div>\n                        </div>\n                      </div>\n                      <div class="col-lg-6 d-none">\n                        <div class="form-group row mb-3 mt-1">\n                          <label class="col-sm-3 col-form-label">').concat(s("List of hours"),'</label>\n                          <div class="col-sm-9">\n                            <textarea id="happy_hours_list" class="form-control inp" name="happy_hours_list" rows="2" data-type="text" style="font-size:13px;font-family: monospace;"></textarea>\n                            <p class="form-text">').concat(s("Provide one happy hour, its discount per line. Example: Monday 15:00-17:30 10."),'</p>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    </div>\n\n                    <h4 id="h-discounts" class="card-title mb-4 mt-4">').concat(s("Scanner"),'</h4>\n                    <div class="row">\n                      <div class="col-lg-6">\n                        <div class="form-group row mb-3 mt-1">\n                          <label class="col-sm-3 col-form-label">').concat(s("Access"),'</label>\n                          <div class="col-sm-9">\n                            <div class="form-check">\n                              <input id="scanner_enabled" class="form-check-input scanner_enabled" name="scanner_enabled" type="checkbox" value="1" data-type="checkbox">\n                              <label class="form-check-label" for="scanner_enabled">\n                                ').concat(s("Restrict access"),'\n                              </label>\n                            </div>\n                            <p class="form-text">').concat(s("Allow checkin operation for registered devices only."),'</p>\n                          </div> \n                        </div>\n                      </div>\n                      <div class="col-lg-6">\n                        <div class="form-group row mb-3 mt-1">\n                          <label class="col-sm-3 col-form-label">').concat(s("List of Devices"),'</label>\n                          <div class="col-sm-9">\n                            <textarea id="scanner_list" class="form-control scanner_list" name="scanner_list" rows="4" data-type="text" style="font-size:13px;font-family: monospace;"></textarea>\n                            <p class="form-text">').concat(s("Provide one device ID per line, example: 98UP7FZ8. To find device ID go to MyTicket Scanner app > Settings > ID. "),'</p>\n                          </div> \n                        </div>\n                      </div>\n                    </div>\n\n                    <h4 id="h-webhooks" class="card-title mb-4 mt-4">').concat(s("Webhooks"),'</h4>\n                    <div class="row webhook-list">\n                      <div class="col-lg-6">\n                        <div class="form-group row mb-3 mt-1">\n                          <label class="col-sm-3 col-form-label">').concat(s("Trigger"),'</label>\n                          <div class="col-sm-9">\n                            <select id="webhook1_trigger" class="form-select webhook_trigger" name="webhook1_trigger" data-type="select">\n                                <option value="">').concat(s("None"),'</option>\n                                <option value="new_order">').concat(s("New order"),'</option>\n                                <option value="canceled_order">').concat(s("Canceled order"),'</option>\n                                <option value="refunded_order">').concat(s("Refunded order"),'</option>\n                                <option value="completed_order">').concat(s("Completed order"),'</option>\n                                <option value="low_stock">').concat(s("Low stock"),'</option>\n                            </select>\n                            <p class="form-text">').concat(s("Action when the URL is called."),'</p>\n                          </div>\n                        </div>\n                      </div>\n                      <div class="col-lg-6">\n                        <div class="form-group row mb-3 mt-1">\n                          <label class="col-sm-3 col-form-label">').concat(s("Webhook"),'</label>\n                          <div class="col-sm-9">\n                            <input id="webhook1_url" type="text" class="form-control webhook_url" name="webhook1_url" >\n                            <p class="form-text">').concat(s("URL with parameters. Ex.: https://example.com/{{order_id}}"),'</p>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div class="tab-pane fade" id="nav-checkout" role="tabpanel" aria-labelledby="nav-checkout-link">\n\n                    <h4 id="holder-fields" class="card-title mb-4">').concat(s("Holder Fields"),'</h4>\n                    <div class="row">\n                      <div class="col-lg-6">\n                        <div class="form-group row mb-3 mt-1">\n                          <label class="col-sm-3 col-form-label">').concat(s("Full Name"),'</label>\n                          <div class="col-sm-9">\n                            <select id="holder_full_name" class="form-select" name="holder_full_name" data-group="holder-checkout-fields" data-name="full_name" data-type="select">\n                                <option value="0">').concat(s("Hidden"),'</option>\n                                <option value="1">').concat(s("Optional"),'</option>\n                                <option value="2" selected>').concat(s("Required"),'</option>\n                            </select>\n                            <p class="form-text">').concat(s("Ask user to provide full name upon checkout."),'</p>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <div class="row">\n                      <div class="col-lg-6">\n                        <div class="form-group row mb-3 mt-1">\n                          <label class="col-sm-3 col-form-label">').concat(s("Email"),'</label>\n                          <div class="col-sm-9">\n                            <select id="holder_email" class="form-select" name="holder_email" data-group="holder-checkout-fields" data-name="email" data-type="select">\n                                <option value="0">').concat(s("Hidden"),'</option>\n                                <option value="1">').concat(s("Optional"),'</option>\n                                <option value="2" selected>').concat(s("Required"),'</option>\n                            </select>\n                            <p class="form-text">').concat(s("Ask user to provide email upon checkout."),'</p>\n                          </div> \n                        </div>\n                      </div>\n                    </div>\n                    <div class="row">\n                      <div class="col-lg-6">\n                        <div class="form-group row mb-3 mt-1">\n                          <label class="col-sm-3 col-form-label">').concat(s("Phone"),'</label>\n                          <div class="col-sm-9">\n                            <select id="holder_phone" class="form-select" name="holder_phone" data-group="holder-checkout-fields" data-name="phone" data-type="select">\n                                <option value="0">').concat(s("Hidden"),'</option>\n                                <option value="1" selected>').concat(s("Optional"),'</option>\n                                <option value="2">').concat(s("Required"),'</option>\n                            </select>\n                            <p class="form-text">').concat(s("Ask user to provide phone number upon checkout."),'</p>\n                          </div> \n                        </div>\n                      </div>\n                    </div>\n                    <div class="row">\n                      <div class="col-lg-6">\n                        <div class="form-group row mb-3 mt-1">\n                          <label class="col-sm-3 col-form-label">').concat(s("Address"),'</label>\n                          <div class="col-sm-9">\n                            <select id="holder_address" class="form-select" name="holder_address" data-group="holder-checkout-fields" data-name="address" data-type="select">\n                                <option value="0" selected>').concat(s("Hidden"),'</option>\n                                <option value="1">').concat(s("Optional"),'</option>\n                                <option value="2">').concat(s("Required"),'</option>\n                            </select>\n                            <p class="form-text">').concat(s("Ask user to provide address upon checkout."),'</p>\n                          </div> \n                        </div>\n                      </div>\n                    </div>\n\n                    <h4 id="general-fields" class="card-title mt-4 mb-4">').concat(s("General Fields"),'</h4>\n                    <div class="row">\n                      <div class="col-lg-6">\n                        <div class="form-group row mb-3 mt-1">\n                          <label class="col-sm-3 col-form-label">').concat(s("Tax Invoice"),'</label>\n                          <div class="col-sm-9">\n                            <select id="general_tax" class="form-select" name="general_tax_invoice" data-group="general-checkout-fields" data-name="tax" data-type="select">\n                                <option value="0">').concat(s("Hidden"),'</option>\n                                <option value="1" selected>').concat(s("Optional"),'</option>\n                                <option value="2">').concat(s("Required"),'</option>\n                            </select>\n                            <p class="form-text">').concat(s("Ask user to provide tax inforformation upon checkout."),'</p>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <div class="row">\n                      <div class="col-lg-6">\n                        <div class="form-group row mb-3 mt-1">\n                          <label class="col-sm-3 col-form-label">').concat(s("Discount Coupon"),'</label>\n                          <div class="col-sm-9">\n                            <select id="general_discount" class="form-select" name="holder_email" data-group="general-checkout-fields" data-name="discount" data-type="select">\n                                <option value="0">').concat(s("Hidden"),'</option>\n                                <option value="1" selected>').concat(s("Optional"),'</option>\n                            </select>\n                            <p class="form-text">').concat(s("Ask user to enter discount coupon upon checkout."),'</p>\n                          </div> \n                        </div>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div class="tab-pane fade" id="nav-templates" role="tabpanel" aria-labelledby="nav-templates-link">\n                    <h4 id="email-orders" class="card-title mb-4">').concat(s("Email Templates"),'</h4>\n                    <div class="row">\n                      <div class="col-lg-12">\n                        <div class="form-group row mb-3 mt-1">\n                          <label class="col-sm-3 col-form-label">').concat(s("New order client email"),'</label>\n                          <div class="col-sm-9">\n                            <div id="new_order_client_email_template" class="html-editor inp" data-type="editor" style="min-height:600px;"></div>\n                            <textarea id="new_order_client_email_template-" type="text" class="form-control d-none" name="new_order_client_email_template" data-type="textarea" rows="20"></textarea>\n                            <p class="form-text">').concat(s("New order email templates, available dynamic fields {{ticket_id}}, {{holder_list}} etc."),'</p>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <div class="row">\n                      <div class="col-lg-12">\n                        <div class="form-group row mb-3 mt-1">\n                          <label class="col-sm-3 col-form-label">').concat(s("New order vendor email"),'</label>\n                          <div class="col-sm-9">\n                            <div id="new_order_vendor_email_template" class="html-editor inp" data-type="editor" style="min-height:600px;"></div>\n                            <textarea id="new_order_vendor_email_template-" type="text" class="form-control d-none" name="new_order_vendor_email_template" data-type="textarea" rows="20"></textarea>\n                            <p class="form-text">').concat(s("New order email templates, available dynamic fields {{ticket_id}}, {{holder_list}} etc."),'</p>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n\n                    <h4 id="invoice-orders" class="card-title mb-4">').concat(s("Invoice Templates"),'</h4>\n                    <div class="row">\n                      <div class="col-lg-12">\n                        <div class="form-group row mb-3 mt-1">\n                          <label class="col-sm-3 col-form-label">').concat(s("Invoice"),'</label>\n                          <div class="col-sm-9">\n                            <div id="invoice_template" class="html-editor inp" data-type="editor" style="min-height:600px;"></div>\n                            <textarea id="invoice_template-" type="text" class="form-control inp d-none" name="invoice_template" data-type="textarea" rows="20"></textarea>\n                            <p class="form-text">').concat(s("Invoice template, available dynamic fields {{ticket_id}}, {{holder_list}} etc."),'</p>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n\n                    <h4 id="ticket-orders" class="card-title mb-4">').concat(s("Ticket Templates"),'</h4>\n                    <div class="row">\n                      <div class="col-lg-12">\n                        <div class="form-group row mb-3 mt-1">\n                          <label class="col-sm-3 col-form-label">').concat(s("General ticket"),'</label>\n                          <div class="col-sm-9">\n                            <div id="general_ticket_template" class="html-editor inp" data-type="editor" style="min-height:600px;"></div>\n                            <textarea id="general_ticket_template-" type="text" class="form-control inp d-none" name="general_ticket_template" data-type="textarea" rows="20"></textarea>\n                            <p class="form-text">').concat(s("General ticket template, available dynamic fields {{ticket_id}}, {{holder_list}} etc."),'</p>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <div class="row">\n                      <div class="col-lg-12">\n                        <div class="form-group row mb-3 mt-1">\n                          <label class="col-sm-3 col-form-label">').concat(s("Individual ticket"),'</label>\n                          <div class="col-sm-9">\n                            <div id="individual_ticket_template" class="html-editor inp" data-type="editor" style="min-height:600px;"></div>\n                            <textarea id="individual_ticket_template-" type="text" class="form-control inp d-none" name="individual_ticket_template" data-type="textarea" rows="20"></textarea>\n                            <p class="form-text">').concat(s("Individual ticket holder template, available dynamic fields {{ticket_id}}, {{holder_list}} etc."),'</p>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n\n                  </div>\n                </div>\n              </div>\n            </div>\n        </div>\n    </div>\n    \n    <div class="position-fixed bottom-0 p-2 m-4 end-0 align-items-center" >   \n      <div class="toast hide align-items-center text-white bg-dark border-0" role="alert" aria-live="assertive" aria-atomic="true" data-bs-delay="3000">\n        <div class="d-flex">  \n          <div class="toast-body"></div>\n          <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>\n        </div>\n      </div>\n    </div>\n    '))})),t(this,"render",(function(e){a.state.response=e;var t=a;for(var o in a.state.firstLoad&&(e=>{let t='<ol class="breadcrumb mt-2 mb-0">';for(let n of e)void 0===n.link?t+=`<li class="breadcrumb-item">${n.text}</li>`:t+=`<li class="breadcrumb-item"><a href="${n.link}">${n.text}</a></li>`;t+="</ol>",document.querySelector(".bc").innerHTML=t})([{link:i("https://dashboard.kenzap.cloud"),text:s("Home")},{link:i("/"),text:s("MyTicket")},{text:s("Settings")}]),e.settings)if(void 0!==e.settings[o]&&""!=e.settings[o]&&document.querySelector("[name='"+o+"']"))switch(document.querySelector("[name='"+o+"']").dataset.type){case"text":case"email":case"emails":case"select":case"textarea":document.querySelector("#"+o).value=e.settings[o];break;case"checkbox":document.querySelector("#"+o).checked="1"==e.settings[o];break;case"radio":document.querySelector("[name='"+o+"'][value='"+e.settings[o]+"']").checked=!0}var c,r=l(document.querySelectorAll(".inp-local"));try{for(r.s();!(c=r.n()).done;){var d=c.value;switch(document.querySelector("[name='"+d.name+"']").dataset.type){case"text":case"email":case"emails":case"select":case"textarea":d.value=localStorage.hasOwnProperty(d.name)?localStorage.getItem(d.name):"";break;case"checkbox":console.log(!!localStorage.hasOwnProperty(d.name)&&localStorage.getItem(d.name)),d.checked=!!localStorage.hasOwnProperty(d.name)&&"true"==localStorage.getItem(d.name)}}}catch(e){r.e(e)}finally{r.f()}n(document.querySelectorAll(".html-editor")).forEach((function(n){t.state.editors[n.id]=ace.edit(n.id),ace.config.set("basePath","https://account.kenzap.com/js/ace/"),t.state.editors[n.id].getSession().setMode("ace/mode/html"),e.settings[n.id]&&t.state.editors[n.id].setValue(e.settings[n.id],-1)})),e.settings.scanner&&(document.querySelector(".scanner_enabled").checked=e.settings.scanner.security,document.querySelector(".scanner_list").value=e.settings.scanner.list),e.settings.checkout_fields&&(e.settings.checkout_fields.holder.forEach((function(e){document.querySelector("#holder_"+e.field).value=e.val})),e.settings.checkout_fields.general.forEach((function(e){document.querySelector("#general_"+e.field).value=e.val}))),e.settings.webhooks&&e.settings.webhooks.forEach((function(e,t){document.querySelector('[name="webhook1_trigger"]').value=e.trigger,document.querySelector('[name="webhook1_url"]').value=e.url}))})),t(this,"initListeners",(function(){a.state.firstLoad&&((e,t)=>{if(document.querySelector(e))for(let n of document.querySelectorAll(e))n.removeEventListener("click",t,!0),n.addEventListener("click",t,!0)})(".btn-save",a.saveSettings)})),t(this,"listeners",{removeProduct:function(e){e.preventDefault(),confirm(s("Completely remove this product?"))&&fetch("https://api-v1.kenzap.cloud/",{method:"post",headers:p(),body:JSON.stringify({query:{product:{type:"delete",key:"product",id:e.currentTarget.dataset.id}}})}).then((function(e){return e.json()})).then((function(e){e.success?a.getData():v(e)})).catch((function(e){v(e)}))},searchProductsActivate:function(e){e.preventDefault(),document.querySelector(".table-p-list thead tr th:nth-child(2) span").style.display="none",document.querySelector(".table-p-list thead tr th:nth-child(2) .search-cont").style.display="flex",document.querySelector(".table-p-list thead tr th:nth-child(2) .search-cont input").focus(),((e,t)=>{if(document.querySelector(e))for(let n of document.querySelectorAll(e))n.removeEventListener("keyup",t,!0),n.addEventListener("keyup",t,!0)})(".table-p-list thead tr th:nth-child(2) .search-cont input",a.listeners.searchProducts)},searchProducts:function(e){e.preventDefault(),a.getData()},modalSuccessBtn:function(e){a.listeners.modalSuccessBtnFunc(e)},modalSuccessBtnFunc:null}),t(this,"saveSettings",(function(e){e.preventDefault();var t,n={},o=l(document.querySelectorAll(".inp"));try{for(o.s();!(t=o.n()).done;){var c=t.value;switch(c.dataset.type){case"text":case"email":case"emails":case"select":case"textarea":n[c.id]=c.value;break;case"checkbox":n[c.id]=c.checked?c.value:"";break;case"radio":n[c.name]=c.parentElement.parentElement.parentElement.parentElement.querySelector("input:checked").value;break;case"editor":n[c.id]=a.state.editors[c.id].getValue()}}}catch(e){o.e(e)}finally{o.f()}var s,i=l(document.querySelectorAll(".inp-local"));try{for(i.s();!(s=i.n()).done;){var r=s.value;switch(document.querySelector("[name='"+r.name+"']").dataset.type){case"text":case"email":case"emails":case"select":case"textarea":localStorage.setItem(r.name,r.value);break;case"checkbox":localStorage.setItem(r.name,r.checked)}}}catch(e){i.e(e)}finally{i.f()}a.state.response.settings.last_order_id==n.last_order_id&&delete n.last_order_id,n.scanner={security:document.querySelector(".scanner_enabled").checked,list:document.querySelector(".scanner_list").value},n.checkout_fields={holder:[],general:[]};var d,m=l(document.querySelectorAll('[data-group="holder-checkout-fields"]'));try{for(m.s();!(d=m.n()).done;){var u=d.value,f={field:u.dataset.name,val:u.value};n.checkout_fields.holder.push(f)}}catch(e){m.e(e)}finally{m.f()}var b,h=l(document.querySelectorAll('[data-group="general-checkout-fields"]'));try{for(h.s();!(b=h.n()).done;){var y=b.value,g={field:y.dataset.name,val:y.value};n.checkout_fields.general.push(g)}}catch(e){h.e(e)}finally{h.f()}n.webhooks=[];var _,k=l(document.querySelectorAll(".webhook-list"));try{for(k.s();!(_=k.n()).done;){var w=_.value,x={};x.trigger=w.querySelector(".webhook_trigger").value,x.url=w.querySelector(".webhook_url").value,n.webhooks.push(x)}}catch(e){k.e(e)}finally{k.f()}fetch("https://api-v1.kenzap.cloud/",{method:"post",headers:p(),body:JSON.stringify({query:{settings:{type:"set",key:"myticket-settings",data:n}}})}).then((function(e){return e.json()})).then((function(e){e.success?(e=>{if(!document.querySelector(".toast")){let e='\n        <div class="toast-cont position-fixed bottom-0 p-2 m-4 end-0 align-items-center" style="z-index:10000;">\n            <div class="toast hide align-items-center text-white bg-dark border-0" role="alert" aria-live="assertive" aria-atomic="true" data-bs-delay="3000">\n                <div class="d-flex">\n                    <div class="toast-body"></div>\n                    <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>\n                </div>\n            </div>\n        </div>';document.querySelector("body > div")&&document.querySelector("body > div").insertAdjacentHTML("afterend",e)}let t=new bootstrap.Toast(document.querySelector(".toast"));document.querySelector(".toast .toast-body").innerHTML=e,t.show()})("Changes applied"):v(e)})).catch((function(e){v(e)}))})),t(this,"initFooter",(function(){h(s("Created by %1$Kenzap%2$. ❤️ Licensed %3$GPL3%4$.",'<a class="text-muted" href="https://kenzap.com/" target="_blank">',"</a>",'<a class="text-muted" href="https://github.com/kenzap/ecommerce" target="_blank">',"</a>"))})),this.state={firstLoad:!0,response:null,limit:10,editors:{}},this.getData()},f&&e(u.prototype,f),b&&e(u,b),Object.defineProperty(u,"prototype",{writable:!1}),u);new y}();
